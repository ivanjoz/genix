import{a as c,k as U,c as o,d as H,g as p,b as l,i as n,r as L,e as O,t as x,l as A,f as Q}from"./web-BZ6LonWj.js";import{e as R,o as q,t as B,f as z,b as h,N as v,L as b}from"./Input-Cf7HKpQs.js";import{D as $}from"./Datepicker-CBN0ZvJN.js";import{Q as G}from"./QTable-DpMhOfGM.js";import{S as J,P as K}from"./app-B5wVexcE.js";import{u as W,c as X,g as Y}from"./ventas-CdqJ0Agz.js";var Z=x('<div class="flex ai-center jc-between mb-06"><div class="flex ai-center w100-10"><!$><!/><!$><!/><!$><!/><button class="bn1 b-blue ml-10"><i class=icon-search></i></button></div><div class="search-c4 mr-16 w14rem ml-auto"><div><i class=icon-search></i></div><input class=w100 autocomplete=off type=text>'),ee=x("<span>");function ie(){const m=R(X,"id"),u=q.getFechaUnix(),C=u-7,[t,_]=c({fechaFin:u,fechaInicio:C}),[s]=W(),[j,S]=c([]),[M,w]=c(""),F=async()=>{const e=t();if(console.log("form::",e),!e.CajaID||!e.fechaInicio||!e.fechaFin){v.failure("Debe seleccionar una caja y un rango de fechas.");return}b.standard("Consultando registros...");let a;try{a=await Y(e)}catch(i){v.failure(i);return}b.remove(),S(a),console.log("movimientos obtenidos: ",a)};return U(A(()=>[s()],()=>{(s()?.Cajas||[]).length>0&&_({...t(),CajaID:s().Cajas[0].ID})})),o(K,{title:"Almacén Stock",get children(){return[(()=>{var e=p(Z),a=e.firstChild,i=a.firstChild,[f,T]=l(i.nextSibling),y=f.nextSibling,[g,k]=l(y.nextSibling),I=g.nextSibling,[d,D]=l(I.nextSibling),N=d.nextSibling,P=a.nextSibling,E=P.firstChild,V=E.nextSibling;return a.style.setProperty("max-width","64rem"),n(a,o(J,{get saveOn(){return t()},save:"CajaID",css:"w-08x mb-02 mr-12",label:"Cajas & Bancos",keys:"ID.Nombre",get options(){return s()?.Cajas||[]},placeholder:"",required:!0,onChange:r=>{}}),f,T),n(a,o($,{label:"Fecha Inicio",css:"w-045x",save:"fechaInicio",get saveOn(){return t()}}),g,k),n(a,o($,{label:"Fecha Fin",css:"w-045x",save:"fechaFin",get saveOn(){return t()}}),d,D),N.$$click=r=>{r.stopPropagation(),F()},V.$$keyup=r=>{r.stopPropagation(),B(()=>{w((r.target.value||"").toLowerCase().trim())},150)},L(),e})(),o(G,{get data(){return j()},css:"w100",tableCss:"w-page-t w100",maxHeight:"calc(100vh - 8rem - 12px)",makeFilter:e=>[m.get(e.Tipo)?.name||"",e.Usuario?.usuario].join(" "),get filterText(){return M()},columns:[{header:"Fecha Hora",getValue:e=>z(e.Created,"d-M h:n")},{header:"Tipo Mov.",getValue:e=>m.get(e.Tipo)?.name||""},{header:"Monto",css:"ff-mono t-r",render:e=>(()=>{var a=p(ee);return n(a,()=>h(e.Monto/100,2)),O(()=>Q(a,e.Monto<0?"c-red":"")),a})()},{header:"Saldo Final",css:"ff-mono t-r",getValue:e=>h(e.SaldoFinal/100,2)},{header:"Nº Documento",getValue:e=>""},{header:"Usuario",css:"t-c",getValue:e=>e.Usuario?.usuario||""}]})]}})}H(["click","keyup"]);export{ie as default};
