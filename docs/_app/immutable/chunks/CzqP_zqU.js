import"./DsnmJJEf.js";import{p as ot,l as rt,h as f,x as lt,a as vt,b as w,d as dt,e as re,f as P,c as r,s,r as l,i as a,t as C,u as F,m as ct}from"./CaHRSXkO.js";import{s as j}from"./CrFq4NBa.js";import{i as le}from"./BLuAT40e.js";import{e as ee,i as te}from"./cG-FGtBW.js";import{r as Ke,s as g,c as J,a as Be,b as He}from"./ZZ_SO04P.js";import{d as ut,e as ae}from"./EZdBy8tr.js";import{b as Je}from"./D1kHjzM_.js";import{p as W}from"./DdsaxoiY.js";import{s as D}from"./BMRmn4k7.js";var ft=P('<div class="dp-col text-center flex items-center justify-center text-[13px] ff-bold svelte-13htn88"> </div>'),_t=P('<div class="ln-today svelte-13htn88"></div>'),mt=P("<div> <!></div>"),ht=P('<div class="flex"><div class="dp-week text-[13px] ff-bold text-center flex items-center justify-center c-purple svelte-13htn88"> </div> <!></div>'),pt=P('<div class="date-picker-c svelte-13htn88"><div class="flex justify-between items-center mb-[2px]"><div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">«</div> <div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">‹</div> <div class="bn-d2 flex items-center justify-center svelte-13htn88"><div class="mr-[4px]"> </div> <div> </div></div> <div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">›</div> <div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">»</div></div> <div class="flex"><div class="dp-week base text-[13px] ff-bold c-purple svelte-13htn88"></div> <!></div> <!></div>'),gt=P('<div><div><div></div></div> <div> </div> <div><div></div></div> <div><div></div></div> <div><div><div></div></div> <input type="text"/></div> <!></div>'),xt=P('<div class="dp-col text-center flex items-center justify-center text-[13px] ff-bold svelte-13htn88"> </div>'),yt=P('<div class="ln-today svelte-13htn88"></div>'),bt=P("<div> <!></div>"),wt=P('<div class="flex"><div class="dp-week text-[13px] ff-bold text-center flex items-center justify-center c-purple svelte-13htn88"> </div> <!></div>'),Dt=P('<div class="date-picker-c svelte-13htn88"><div class="flex justify-between items-center mb-[2px]"><div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">«</div> <div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">‹</div> <div class="bn-d2 flex items-center justify-center svelte-13htn88"><div class="mr-[4px]"> </div> <div> </div></div> <div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">›</div> <div class="h2 bn-d1 flex items-center justify-center svelte-13htn88">»</div></div> <div class="flex"><div class="dp-week base text-[13px] ff-bold c-purple svelte-13htn88"></div> <!></div> <!></div>'),kt=P('<div><div><div></div></div> <div><div><div></div></div> <input type="text"/></div> <!></div>');function It(We,u){ot(u,!0);let z=W(u,"saveOn",15),De=W(u,"label",3,""),ve=W(u,"css",3,""),ke=W(u,"inputCss",3,""),Me=W(u,"placeholder",3,"DD-MM-YYYY");W(u,"required",3,!1);let Pe=W(u,"disabled",3,!1);W(u,"type",3,"unix");const Se=[{n:1,name:"LU"},{n:2,name:"MA"},{n:3,name:"MI"},{n:4,name:"JU"},{n:5,name:"VI"},{n:6,name:"SA"},{n:7,name:"DO"}],ze=[{n:1,name:"Enero"},{n:2,name:"Febrero"},{n:3,name:"Marzo"},{n:4,name:"Abril"},{n:5,name:"Mayo"},{n:6,name:"Junio"},{n:7,name:"Julio"},{n:8,name:"Agosto"},{n:9,name:"Septiembre"},{n:10,name:"Octubre"},{n:11,name:"Noviembre"},{n:12,name:"Diciembre"}],qe=new Map(ze.map(e=>[e.n,e])),q=new Date,de=q.getTimezoneOffset()*60,Fe=Math.floor((q.getTime()-de*1e3)/864e5),je=q.getFullYear()*100+(q.getMonth()+1);let O=re(je),ce=re(0),T=re(0),E=re(!1),ne=re(""),m=!1,S;const Te=e=>{const t=String(e),n=parseInt(t.substring(0,4)),i=parseInt(t.substring(4,6));return{name:qe.get(i)?.name||"-",year:n,month:i}},Le=e=>{const t=new Date(e),n=t.getDay(),i=(n===0?-6:1)-n;return t.setDate(t.getDate()+i),t.setHours(0,0,0,0),t},Ge=e=>{const t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const n=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-n.getTime())/864e5+1)/7)},Qe=e=>{const t=new Date(e);return t.setDate(t.getDate()+4-(t.getDay()||7)),t.getFullYear()},Ue=F(()=>{let e;if(a(O)){const{year:h,month:k}=Te(a(O));e=new Date(h,k-1,1,0,0,0)}else e=new Date;const t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),i=e.getMonth();let _=Le(t);const o=[];for(;_.getTime()<=n.getTime();){const h=_.getTime(),k=Math.floor((h-de*1e3)/864e5),b=Qe(_),d=Ge(_),p=[];for(let U=0;U<7;U++){const x=new Date(h+864e5*U),Y=k+U,A=x.getDate(),L=x.getFullYear()*100+(x.getMonth()+1);p.push({date:x,fechaUnix:Y,day:A,month:L})}o.push({year:b,week:d,weekDays:p,monthCurrent:i}),_=new Date(h+864e5*7)}return o}),se=F(()=>Te(a(O))),V=e=>{const t=a(se),n=new Date(t.year,t.month-1,1,0,0,0);n.setMonth(n.getMonth()+e);const i=n.getFullYear()*100+(n.getMonth()+1);f(O,i),S?.focus()},Re=e=>{if(!e)return"";const t=e*86400+de,n=new Date(t*1e3),i=String(n.getDate()).padStart(2,"0"),_=String(n.getMonth()+1).padStart(2,"0"),o=n.getFullYear();return`${i}-${_}-${o}`},Ye=e=>{e=e.trim().substring(0,10).replaceAll("/","-");const t=String(q.getFullYear()),n=e.split("-").filter(p=>p);let i=isNaN(n[0])?0:parseInt(n[0]),_=isNaN(n[1])?0:parseInt(n[1]),o=n[2]||"";if(o.length!==4)for(let p=0;p<t.length;p++)o[p]||(o+=t[p]);let h=isNaN(o)?0:parseInt(o);const k=i&&_&&o.length===4;let b=0,d=null;return i&&(_||(_=q.getMonth()+1),h||(h=q.getFullYear()),d=new Date(h,_-1,i,0,0,0),d.getTime?b=Math.floor((d.getTime()-de*1e3)/864e5):d=null),{isCompleted:k,fechaUnixAutocomplated:b,fechaAutocomplated:d,day:i,month:_,year:h}},Ce=e=>{const t=Ye(e);if(t.fechaAutocomplated){const n=t.fechaAutocomplated.getFullYear()*100+(t.fechaAutocomplated.getMonth()+1);f(O,n),f(T,t.fechaUnixAutocomplated,!0)}else f(T,0)},me=e=>{ct(()=>{u.save&&z()&&z(z()[u.save]=e,!0)}),f(ce,e,!0)},Ae=new Set(["1","2","3","4","5","6","7","8","9","0","-","/"]),Xe=new Set([...Ae,"Backspace","Control","c","v","x","Tab"]);let he;const Ze=(e,t)=>{he&&clearTimeout(he),he=setTimeout(e,t)},Ie=e=>{Xe.has(e.key)||e.preventDefault()},Ne=e=>{e.stopPropagation();let t=e.target.value,n="";for(let i of t)Ae.has(i)&&(n+=i);t!==n&&(e.target.value=n),f(ne,n,!0),Ze(()=>{Ce(n)},150)},Oe=e=>{e.stopPropagation(),f(E,!0)},Ee=e=>{if(e.stopPropagation(),m){m=!1;return}if(f(E,!1),a(T)!==0){const t=(e.target.value||"").trim(),n=Ye(t);t.length===10&&n.isCompleted?(me(n.fechaUnixAutocomplated),u.onChange&&u.onChange()):(e.target.value="",u.save&&z()&&delete z()[u.save]),f(T,0)}};rt(()=>{if(z()&&u.save){const e=z()[u.save];if(e){const t=Re(e);Ce(t),f(ne,t,!0),S&&(S.value=t)}else f(ne,""),S&&(S.value=""),f(O,je);f(ce,e||0,!0)}});let $e=F(()=>`${D.input} relative date-input-container`+(ve()?" "+ve():""));var Ve=lt(),et=vt(Ve);{var tt=e=>{var t=gt(),n=r(t),i=s(n,2),_=r(i,!0);l(i);var o=s(i,2),h=s(o,2),k=s(h,2),b=r(k),d=s(b,2);Ke(d),d.__keydown=Ie,d.__keyup=Ne,Je(d,x=>S=x,()=>S),l(k);var p=s(k,2);{var U=x=>{var Y=pt(),A=r(Y),L=r(A);L.__mousedown=c=>{c.stopPropagation(),m=!0},L.__click=c=>{c.stopPropagation(),V(-12)};var X=s(L,2);X.__mousedown=c=>{c.stopPropagation(),m=!0},X.__click=c=>{c.stopPropagation(),V(-1)};var ie=s(X,2),G=r(ie),ue=r(G,!0);l(G);var Z=s(G,2),pe=r(Z,!0);l(Z),l(ie);var oe=s(ie,2);oe.__mousedown=c=>{c.stopPropagation(),m=!0},oe.__click=c=>{c.stopPropagation(),V(1)};var v=s(oe,2);v.__mousedown=c=>{c.stopPropagation(),m=!0},v.__click=c=>{c.stopPropagation(),V(12)},l(A);var K=s(A,2),I=s(r(K),2);ee(I,17,()=>Se,te,(c,$)=>{var N=ft(),M=r(N,!0);l(N),C(()=>j(M,a($).name)),w(c,N)}),l(K);var Q=s(K,2);ee(Q,17,()=>a(Ue),te,(c,$)=>{var N=ht(),M=r(N),ge=r(M,!0);l(M);var xe=s(M,2);ee(xe,17,()=>a($).weekDays,te,(ye,B)=>{const H=F(()=>a(B).month!==a(O)),fe=F(()=>a(B).fechaUnix===a(ce)),be=F(()=>a(B).fechaUnix===a(T)),we=F(()=>Fe===a(B).fechaUnix);var y=mt();y.__click=R=>{R.stopPropagation(),me(a(B).fechaUnix),f(E,!1),f(T,0),m=!1,u.onChange&&u.onChange()},y.__mousedown=R=>{m=!0,R.stopPropagation()};var _e=r(y),nt=s(_e);{var st=R=>{var it=_t();w(R,it)};le(nt,R=>{a(we)&&R(st)})}l(y),C(()=>{g(y,1,`relative dp-day text-center flex items-center justify-center ${a(H)?"is-out":""} ${a(fe)?"selected":""} ${a(be)?"focused":""}`,"svelte-13htn88"),j(_e,`${a(B).day??""} `)}),w(ye,y)}),l(N),C(()=>j(ge,a($).week)),w(c,N)}),l(Y),C(()=>{j(ue,a(se).name),j(pe,a(se).year)}),ae("mouseleave",Y,c=>{c.stopPropagation(),S!==document.activeElement&&(m=!1,f(E,!1),f(T,0))}),w(x,Y)};le(p,x=>{a(E)&&x(U)})}l(t),C(()=>{g(t,1,J(a($e)),"svelte-13htn88"),g(n,1,J(D.input_lab_cell_left),"svelte-13htn88"),g(i,1,J(D.input_lab),"svelte-13htn88"),j(_,De()),g(o,1,J(D.input_lab_cell_right),"svelte-13htn88"),g(h,1,J(D.input_shadow_layer),"svelte-13htn88"),g(k,1,`${D.input_div} flex w-full`,"svelte-13htn88"),g(b,1,J(D.input_div_1),"svelte-13htn88"),g(d,1,`w-full ${D.input_inp} ff-mono ${(ke()||"")??""}`,"svelte-13htn88"),Be(d,a(ne)),He(d,"placeholder",Me()),d.disabled=Pe()}),ae("focus",d,Oe),ae("blur",d,Ee),w(e,t)},at=e=>{var t=kt(),n=r(t),i=s(n,2),_=r(i),o=s(_,2);Ke(o),o.__keydown=Ie,o.__keyup=Ne,Je(o,b=>S=b,()=>S),l(i);var h=s(i,2);{var k=b=>{var d=Dt(),p=r(d),U=r(p);U.__mousedown=v=>{v.stopPropagation(),m=!0},U.__click=v=>{v.stopPropagation(),V(-12)};var x=s(U,2);x.__mousedown=v=>{v.stopPropagation(),m=!0},x.__click=v=>{v.stopPropagation(),V(-1)};var Y=s(x,2),A=r(Y),L=r(A,!0);l(A);var X=s(A,2),ie=r(X,!0);l(X),l(Y);var G=s(Y,2);G.__mousedown=v=>{v.stopPropagation(),m=!0},G.__click=v=>{v.stopPropagation(),V(1)};var ue=s(G,2);ue.__mousedown=v=>{v.stopPropagation(),m=!0},ue.__click=v=>{v.stopPropagation(),V(12)},l(p);var Z=s(p,2),pe=s(r(Z),2);ee(pe,17,()=>Se,te,(v,K)=>{var I=xt(),Q=r(I,!0);l(I),C(()=>j(Q,a(K).name)),w(v,I)}),l(Z);var oe=s(Z,2);ee(oe,17,()=>a(Ue),te,(v,K)=>{var I=wt(),Q=r(I),c=r(Q,!0);l(Q);var $=s(Q,2);ee($,17,()=>a(K).weekDays,te,(N,M)=>{const ge=F(()=>a(M).month!==a(O)),xe=F(()=>a(M).fechaUnix===a(ce)),ye=F(()=>a(M).fechaUnix===a(T)),B=F(()=>Fe===a(M).fechaUnix);var H=bt();H.__click=y=>{y.stopPropagation(),me(a(M).fechaUnix),f(E,!1),f(T,0),m=!1,u.onChange&&u.onChange()},H.__mousedown=y=>{m=!0,y.stopPropagation()};var fe=r(H),be=s(fe);{var we=y=>{var _e=yt();w(y,_e)};le(be,y=>{a(B)&&y(we)})}l(H),C(()=>{g(H,1,`relative dp-day text-center flex items-center justify-center ${a(ge)?"is-out":""} ${a(xe)?"selected":""} ${a(ye)?"focused":""}`,"svelte-13htn88"),j(fe,`${a(M).day??""} `)}),w(N,H)}),l(I),C(()=>j(c,a(K).week)),w(v,I)}),l(d),C(()=>{j(L,a(se).name),j(ie,a(se).year)}),ae("mouseleave",d,v=>{v.stopPropagation(),S!==document.activeElement&&(m=!1,f(E,!1),f(T,0))}),w(b,d)};le(h,b=>{a(E)&&b(k)})}l(t),C(()=>{g(t,1,`${D.input} no-label relative date-input-container`+(ve()?" "+ve():""),"svelte-13htn88"),g(n,1,J(D.input_shadow_layer),"svelte-13htn88"),g(i,1,`${D.input_div} flex w-full`,"svelte-13htn88"),g(_,1,J(D.input_div_1),"svelte-13htn88"),g(o,1,`w-full ${D.input_inp} ff-mono ${(ke()||"")??""}`,"svelte-13htn88"),Be(o,a(ne)),He(o,"placeholder",Me()),o.disabled=Pe()}),ae("focus",o,Oe),ae("blur",o,Ee),w(e,t)};le(et,e=>{De()?e(tt):e(at,!1)})}w(We,Ve),dt()}ut(["keydown","keyup","mousedown","click"]);export{It as D};
