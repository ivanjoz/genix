import{d as $,t as g,i as n,c as y}from"./web-B9EQUxsk.js";import{e as I,P as _,t as D,f as P,b as u,N as f,L as p}from"./main-CypfFe8I.js";import{a as c,e as S,c as s,f as k,b as N}from"./solid-DoXAfIeo.js";import{D as d}from"./Datepicker-DB0F0sWp.js";import{Q as V}from"./QTable-Dm9Z2GHQ.js";import{S as U,P as E}from"./app-BTQHO6nA.js";import{u as L,c as O,g as A}from"./ventas-H5T0bkyN.js";import"./store-DHPf-lLy.js";import"./main-Xr7ZHKo0.js";import"./http-BThfyHi6.js";var H=g('<div class="flex ai-center jc-between mb-06"><div class="flex ai-center w100-10"><button class="bn1 b-blue ml-10"><i class=icon-search></i></button></div><div class="search-c4 mr-16 w14rem ml-auto"><div><i class=icon-search></i></div><input class=w100 autocomplete=off type=text>'),Q=g("<span>");function Z(){const l=I(O,"id"),m=_.getFechaUnix(),h=m-7,[r,v]=c({fechaFin:m,fechaInicio:h}),[i]=L(),[C,b]=c([]),[j,x]=c(""),w=async()=>{const e=r();if(console.log("form::",e),!e.CajaID||!e.fechaInicio||!e.fechaFin){f.failure("Debe seleccionar una caja y un rango de fechas.");return}p.standard("Consultando registros...");let a;try{a=await A(e)}catch(t){f.failure(t);return}p.remove(),b(a),console.log("movimientos obtenidos: ",a)};return S(k(()=>[i()],()=>{(i()?.Cajas||[]).length>0&&v({...r(),CajaID:i().Cajas[0].ID})})),s(E,{title:"Almacén Stock",get children(){return[(()=>{var e=H(),a=e.firstChild,t=a.firstChild,F=a.nextSibling,M=F.firstChild,T=M.nextSibling;return a.style.setProperty("max-width","64rem"),n(a,s(U,{get saveOn(){return r()},save:"CajaID",css:"w-08x mb-02 mr-12",label:"Cajas & Bancos",keys:"ID.Nombre",get options(){return i()?.Cajas||[]},placeholder:"",required:!0,onChange:o=>{}}),t),n(a,s(d,{label:"Fecha Inicio",css:"w-045x",save:"fechaInicio",get saveOn(){return r()}}),t),n(a,s(d,{label:"Fecha Fin",css:"w-045x",save:"fechaFin",get saveOn(){return r()}}),t),t.$$click=o=>{o.stopPropagation(),w()},T.$$keyup=o=>{o.stopPropagation(),D(()=>{x((o.target.value||"").toLowerCase().trim())},150)},e})(),s(V,{get data(){return C()},css:"w100 w-page-t",tableCss:"w100",maxHeight:"calc(100vh - 8rem - 12px)",makeFilter:e=>[l.get(e.Tipo)?.name||"",e.Usuario?.usuario].join(" "),get filterText(){return j()},columns:[{header:"Fecha Hora",getValue:e=>P(e.Created,"d-M h:n")},{header:"Tipo Mov.",getValue:e=>l.get(e.Tipo)?.name||""},{header:"Monto",css:"ff-mono t-r",render:e=>(()=>{var a=Q();return n(a,()=>u(e.Monto/100,2)),N(()=>y(a,e.Monto<0?"c-red":"")),a})()},{header:"Saldo Final",css:"ff-mono t-r",getValue:e=>u(e.SaldoFinal/100,2)},{header:"Nº Documento",getValue:e=>""},{header:"Usuario",css:"t-c",getValue:e=>e.Usuario?.usuario||""}]})]}})}$(["click","keyup"]);export{Z as default};
