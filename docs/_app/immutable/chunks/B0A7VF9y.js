import{p as v}from"./DP6SISrU.js";import{E as m}from"./CUNP7WoD.js";const{Notify:y,Loading:W,Confirm:b}=v;let p;typeof window<"u"&&W.init({zindex:400});const D=(e,s,n,t,l,r)=>{b.init({fontFamily:"main",messageFontSize:"15px",titleColor:"#db3030",titleFontSize:"18px",messageColor:"#1e1e1e",okButtonColor:"#f8f8f8",okButtonBackground:"#f35c5c"}),b.show(e,s,n,t,l,r)},P=(e,s)=>{p&&clearTimeout(p),p=setTimeout(()=>{e(),p=null},s)},R=(e,s)=>{if(typeof e!="string")return console.error("no es string"),console.log(e),[{text:"!"}];const n=[{text:e}];if(!s||s.length===0)return n;for(let t of s)if(!(t.length<2))for(let l=0;l<n.length;l++){const r=n[l].text;if(typeof r!="string")continue;const a=r.toLowerCase().indexOf(t);if(a!==-1){const f=r.slice(0,a),i=r.slice(a,a+t.length),c=r.slice(a+t.length),o=[{text:f},{text:i,highl:!0},{text:c}].filter(u=>u.text);if(n.splice(l,1,...o),n.length>40)return n.filter(u=>u);continue}}return console.log("words 111:",n.filter(t=>t),"|",e,s),n.filter(t=>t)},O=e=>`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e)}`;function $(e,s){return s&&typeof s=="string"&&(s=s.split(" ").filter(n=>n.length>0)),!s||s==="undefined"||s.length===0?!0:s.length===1?e.includes(s[0]):s.length===2?e.includes(s[0])&&e.includes(s[1]):s.length===3?e.includes(s[0])&&e.includes(s[1])&&e.includes(s[2]):s.length===4?e.includes(s[0])&&e.includes(s[1])&&e.includes(s[2])&&e.includes(s[3]):s.length===5?e.includes(s[0])&&e.includes(s[1])&&e.includes(s[2])&&e.includes(s[3])&&e.includes(s[4]):e.includes(s[0])&&e.includes(s[1])&&e.includes(s[2])&&e.includes(s[3])&&e.includes(s[4])&&e.includes(s[5])}const d=new Map,g=new Map,E=4,M=e=>{e.worker.onmessage=({data:s})=>{e.tasks=Math.max(0,e.tasks-1);const{id:n,dataUrl:t,error:l}=s,r=d.get(n);r&&(clearTimeout(r.timeout),d.delete(n),l?(console.error(`âŒ Worker error for request ${n}:`,l),r.reject(l)):(console.log(`ðŸ“¨ Received message from worker for request ${n} | len: ${t.length}`),r.resolve(t||"")))},e.worker.onerror=s=>{e.tasks=Math.max(0,e.tasks-1),console.error("âŒ Worker error:",s)}},A=()=>{if(m.imageWorker&&!g.has("preloaded")){const s={worker:m.imageWorker,tasks:0};M(s),g.set("preloaded",s)}let e=null;for(const s of g.values()){if(s.tasks===0){e=s;break}(!e||s.tasks<e.tasks)&&(e=s)}if((!e||e.tasks>0)&&g.size<E&&m.ImageWorkerClass){console.log(`ðŸš€ Spawning new worker (Pool size: ${g.size+1})`);const s={worker:new m.ImageWorkerClass,tasks:0};M(s);const n=Math.random();g.set(n,s),e=s}return e?(e.tasks++,e.worker):m.imageWorker},B=(e,s,n)=>{if(s>2e3)return y.failure("2mpx is max resolution for image conversion."),Promise.resolve("");const t=n==="jpg",l=n==="avif",r=A();return console.log("ðŸ“¸ fileToImage called with:",{blobType:e.type,blobSize:e.size,resolution:s,useJpeg:t,useAvif:l,poolSize:g.size,workerExists:!!r}),r?new Promise((a,f)=>{const i=Math.floor(Math.random()*1e6),c=setTimeout(()=>{console.error(`â±ï¸ Worker timeout - no response after 8 seconds (id=${i}, r=${s})`),d.delete(i),f("Error al procesar la imagen. (superÃ³ los 8 segundos.)")},8e3);d.set(i,{resolve:a,reject:f,timeout:c}),console.log(`ðŸ“¤ Posting message to worker (id=${i})...`),r.postMessage({id:i,blob:e,resolution:s,useJpeg:t,useAvif:l})}):(console.error("âŒ No image worker available!"),Promise.reject("Image worker not available"))},I=new Map([["01",{es:"ENE",en:"JAN"}],["02",{es:"FEB",en:"FEB"}],["03",{es:"MAR",en:"MAR"}],["04",{es:"ABR",en:"APR"}],["05",{es:"MAY",en:"MAY"}],["06",{es:"JUN",en:"JUN"}],["07",{es:"JUL",en:"JUL"}],["08",{es:"AGO",en:"AUG"}],["09",{es:"SEP",en:"SEP"}],["10",{es:"OCT",en:"OCT"}],["11",{es:"NOV",en:"NOV"}],["12",{es:"DIC",en:"DEC"}]]),U=(e,s)=>{let n;if(!e)n=new Date;else if(typeof e=="number")e<3e4?e=e*1e3*86400+36e6:e<8e8&&(e=10**9+e*2),e<18e10&&(e=e*1e3),n=new Date(e);else if(typeof e=="object"&&e.constructor===Date)n=e;else if(typeof e=="string"&&e.length===8){const c=parseInt(e.substring(0,4)),o=parseInt(e.substring(4,6))-1,u=parseInt(e.substring(6,8));n=new Date(c,o,u)}else if(typeof e=="string"){if(e.includes("T")&&(e=e.replace("T"," ")),e.includes("Z")&&e.includes(".")){const k=e.lastIndexOf(".");e=e.substring(0,k)}const c=e.split(" ");let o=c[0];const u=/[0-9]{1,2}(\.|-|\/)[0-9]{1,2}(\.|-|\/)[0-9]{4}/g,C=/[0-9]{4}(\.|-|\/)[0-9]{1,2}(\.|-|\/)[0-9]{1,2}/g,w=u.test(o),S=w?void 0:C.test(o);if(w||S){for(const k of["/","-","."])if(o.includes(k)){let x=o.split(k);w&&x.reverse();const T=x.join("-")+"T"+(c[1]||"12:00:00");if(n=new Date(T),!n.getTime)return null}}else return null}if(!n||!(n instanceof Date)||!n.getTime)return s?"":null;const t=n.getDate();if(isNaN(t))return s?"":null;const l=t<10?"0"+t:String(t),r=n.getMonth()+1,a=r<10?"0"+r:String(r),f=String(n.getFullYear());if(!s)return n;let i="";for(const c of s)switch(c){case"y":i+=f.substring(2,4);break;case"Y":i+=f;break;case"m":i+=a;break;case"M":i+=I.get(a)?.es||"?";break;case"d":i+=l;break;case"h":{let o=n.getHours();o<10&&(o="0"+o),i+=o;break}case"n":{let o=n.getMinutes();o<10&&(o="0"+o),i+=o;break}default:i+=c}return i};export{D as C,W as L,y as N,B as a,U as f,R as h,$ as i,O as p,P as t};
