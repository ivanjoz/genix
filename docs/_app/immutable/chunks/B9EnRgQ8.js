import"./DsnmJJEf.js";import{A as ae,aI as ie,aJ as ne,aK as re,x as V,aq as le,F as _e,h as F,a6 as se,aL as ue,p as fe,a2 as U,at as ve,g as de,k as b,f as C,t as k,b as y,c as ce,s as h,d as M,a3 as w,r as E,aH as oe,a as W,aM as be,au as me}from"./Du-3VwLa.js";import{s as j}from"./DnqKjY9W.js";import{i as N}from"./QNJoOfXk.js";import{h as z}from"./BLKgBUNY.js";import{s as d,c as x,b as O,r as he}from"./DDksb93E.js";import{e as B}from"./1RyHG_68.js";import{p as ge}from"./DeYnh8U8.js";const we=[];function ye(e,t=!1,r=!1){return D(e,new Map,"",we,null,r)}function D(e,t,r,f,n=null,l=!1){if(typeof e=="object"&&e!==null){var m=t.get(e);if(m!==void 0)return m;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ae(e)){var _=Array(e.length);t.set(e,_),n!==null&&t.set(n,_);for(var v=0;v<e.length;v+=1){var o=e[v];v in e&&(_[v]=D(o,t,r,f,null,l))}return _}if(ie(e)===ne){_={},t.set(e,_),n!==null&&t.set(n,_);for(var S in e)_[S]=D(e[S],t,r,f,null,l);return _}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!l)return D(e.toJSON(),t,r,f,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function G(e,t,r=t){var f=new WeakSet;re(e,"input",async n=>{var l=n?e.defaultValue:e.value;if(l=A(e)?J(l):l,r(l),V!==null&&f.add(V),await le(),l!==(l=t())){var m=e.selectionStart,_=e.selectionEnd,v=e.value.length;if(e.value=l??"",_!==null){var o=e.value.length;m===_&&_===v&&o>v?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=m,e.selectionEnd=Math.min(_,o))}}}),(_e&&e.defaultValue!==e.value||F(t)==null&&e.value)&&(r(A(e)?J(e.value):e.value),V!==null&&f.add(V)),se(()=>{var n=t();if(e===document.activeElement){var l=ue??V;if(f.has(l))return}A(e)&&n===J(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function A(e){var t=e.type;return t==="number"||t==="range"}function J(e){return e===""?null:+e}const xe="_input_1w6ug_1",Se="_input_lab_1w6ug_17",Ve="_input_div_1w6ug_29",ke="_input_div_1_1w6ug_46",Ce="_input_inp_1w6ug_64",Ie="_input_lab_cell_left_1w6ug_85",Me="_input_lab_cell_right_1w6ug_86",Ee="_input_shadow_layer_1w6ug_127",Ne="_input_post_value_1w6ug_301",c={input:xe,input_lab:Se,input_div:Ve,input_div_1:ke,input_inp:Ce,input_lab_cell_left:Ie,input_lab_cell_right:Me,input_shadow_layer:Ee,input_post_value:Ne};var Oe=C("<div><div></div></div> <div> <!></div> <div><div></div></div>",1),De=C("<textarea></textarea>"),qe=C("<input/>"),Ae=C("<div> </div>"),Je=C("<div><!> <div><div></div></div> <div><div><div></div></div> <!> <!> <!></div></div>");function We(e,t){fe(t,!0);const r=ge(t,"saveOn",7),f=t.baseDecimals?10**t.baseDecimals:0;let n=U(""),l=U(ve(_())),m=0;function _(){if(!t.required||t.disabled)return 0;if(!r()||!t.save)return 1;const i=r()[t.save];let a=!t.required;return t.validator?a=t.validator(i):(i||i===0)&&(a=!0),a?2:1}function v(i,a){i.stopPropagation();let u=i.target.value;t.type==="number"&&(isNaN(u)?u=void 0:u=parseFloat(u)),t.transform&&a&&(u=t.transform(u)),F(()=>{if(r()&&t.save){let g=u;f&&typeof g=="number"&&(g=Math.round(g*f)),r()[t.save]=g,w(l,_(),!0)}}),w(n,u,!0)}function o(){if(b(l)){if(b(l)===2)return'<i class="v-icon icon-ok c-green"></i>';if(b(l)===1)return'<i class="v-icon icon-attention c-red"></i>'}else return null;return null}let S;de(()=>{!r()||!t.save||S!==r()&&(S=r(),r()[t.save]!==b(n)&&F(()=>{const i=r()[t.save];w(n,typeof i=="number"?i:i||"",!0),f&&typeof b(n)=="number"&&w(n,b(n)/f),w(l,_(),!0)}))});let K=oe(()=>`${c.input} p-rel`+(t.css?" "+t.css:""));var I=Je(),T=M(I);{var Q=i=>{var a=Oe(),s=W(a),u=h(s,2),g=M(u,!0),ee=h(g);z(ee,()=>o()||""),E(u);var te=h(u,2);k(()=>{d(s,1,x(c.input_lab_cell_left)),d(u,1,x(c.input_lab)),j(g,t.label),d(te,1,x(c.input_lab_cell_right))}),y(i,a)};N(T,i=>{t.label&&i(Q)})}var p=h(T,2),q=h(p,2),H=M(q),L=h(H,2);{var R=i=>{var a=De();be(a),k(()=>{d(a,1,`w-full ${c.input_inp} ${t.inputCss||""}`),O(a,"placeholder",t.placeholder||""),a.disabled=t.disabled,O(a,"rows",t.rows)}),B("blur",a,s=>{console.log("input saveon:",ye(r())),v(s,!0),t.onChange}),G(a,()=>b(n),s=>w(n,s)),y(i,a)},X=i=>{var a=qe();he(a),k(()=>{d(a,1,`w-full ${c.input_inp} ${(t.inputCss||"")??""}`),O(a,"type",t.type||"text"),O(a,"placeholder",t.placeholder||""),a.disabled=t.disabled}),B("blur",a,s=>{v(s,!0),t.onChange}),G(a,()=>b(n),s=>w(n,s)),y(i,a)};N(L,i=>{t.useTextArea?i(R):i(X,!1)})}var P=h(L,2);{var Y=i=>{var a=me(),s=W(a);z(s,()=>o()||""),y(i,a)};N(P,i=>{t.label||i(Y)})}var Z=h(P,2);{var $=i=>{var a=Ae(),s=M(a,!0);E(a),k(()=>{d(a,1,c.input_post_value),j(s,t.postValue)}),y(i,a)};N(Z,i=>{t.postValue&&i($)})}E(q),E(I),k(()=>{d(I,1,x(b(K))),d(p,1,x(c.input_shadow_layer)),d(q,1,`${c.input_div} flex w-full`),d(H,1,x(c.input_div_1))}),y(e,I),ce()}export{We as I,c as a,ye as s};
