import"./DsnmJJEf.js";import{p as H,l as V,i as n,e as k,h as z,f as N,c as C,r as R,t as T,b as S,d as U,aA as W,g as O,D as j,x as A,a as D,s as F,u as G}from"./Bf0lWsRu.js";import{s as X}from"./Csa_d837.js";import{i as q}from"./D7jGWfSg.js";import{b as Y,a as J}from"./BWVkWQLM.js";import{s as M,c as K}from"./C7iUW-It.js";import{b as B}from"./CPRIj_W5.js";import{p as b}from"./DEnCy23-.js";import{a as Q}from"./DP6SISrU.js";import{a as Z}from"./CZSWOYhl.js";var $=N('<div class="_1 absolute top-0 Portal_14b2gl0"><!></div>');function tt(x,o){H(o,!0);let p=b(o,"target",3,void 0),t=k(null),w=k(null);V(()=>{if(!n(t))return;const a=p()||document.body;return z(w,a,!0),a.appendChild(n(t)),()=>{n(t)&&n(t).parentNode&&n(t).parentNode.removeChild(n(t))}});var g=$();let e;var i=C(g);X(i,()=>o.children??W),R(g),B(g,a=>z(t,a),()=>n(t)),T(()=>e=Y(g,"",e,{"z-index":o.zIndex?o.zIndex:void 0})),S(x,g),U()}function et(x,o,p={}){const{offset:t=8,preferredPlacement:w="bottom",fitViewport:g=!0}=p,e=x.getBoundingClientRect(),i=o.getBoundingClientRect(),a=window.innerWidth,d=window.innerHeight,v=window.scrollX||window.pageXOffset,_=window.scrollY||window.pageYOffset,f={top:e.top,bottom:d-e.bottom,left:e.left,right:a-e.right},c={top:f.top>=i.height+t,bottom:f.bottom>=i.height+t,left:f.left>=i.width+t,right:f.right>=i.width+t},h=w.split("-")[0];let s=w,r=h;c[h]||(h==="bottom"||h==="top"?h==="bottom"&&c.top?r="top":h==="top"&&c.bottom?r="bottom":c.right?r="right":c.left?r="left":r=f.bottom>=f.top?"bottom":"top":h==="right"&&c.left?r="left":h==="left"&&c.right?r="right":c.bottom?r="bottom":c.top?r="top":r=f.right>=f.left?"right":"left",s=r);let m=0,l=0;switch(r){case"bottom":m=e.bottom+t,l=e.left+e.width/2-i.width/2;break;case"top":m=e.top-i.height-t,l=e.left+e.width/2-i.width/2;break;case"right":m=e.top+e.height/2-i.height/2,l=e.right+t;break;case"left":m=e.top+e.height/2-i.height/2,l=e.left-i.width-t;break}if(w.includes("-")){const u=w.split("-")[1];r==="top"||r==="bottom"?u==="start"?l=e.left:u==="end"&&(l=e.right-i.width):u==="start"?m=e.top:u==="end"&&(m=e.bottom-i.height)}if(m+=_,l+=v,g){const u=t+v,E=a-i.width-t+v,L=t+_,I=d-i.height-t+_;l=Math.max(u,Math.min(l,E)),m=Math.max(L,Math.min(m,I))}const y=d-t*2,P=a-t*2;return{top:Math.round(m),left:Math.round(l),placement:s,maxHeight:y,maxWidth:P}}var ot=N('<div><!> <div><img alt=""/></div></div>');function ht(x,o){H(o,!0);let p=b(o,"open",3,!1),t=b(o,"placement",3,"bottom"),w=b(o,"offset",3,8),g=b(o,"fitViewport",3,!0),e=b(o,"class",3,""),i=b(o,"style",3,""),a=k(null),d=k(O({top:0,left:0,placement:t()}));V(()=>{p()&&o.referenceElement&&n(a)&&(console.log("referenceElement",o.referenceElement),v())}),V(()=>{if(!p())return;const s=()=>{p()&&o.referenceElement&&n(a)&&v()};return window.addEventListener("scroll",s,!0),window.addEventListener("resize",s),()=>{window.removeEventListener("scroll",s,!0),window.removeEventListener("resize",s)}});async function v(){if(!o.referenceElement||!n(a))return;await j();const s=et(o.referenceElement,n(a),{offset:w(),preferredPlacement:t(),fitViewport:g()});z(d,s,!0),o.onPositionUpdate&&o.onPositionUpdate(s)}const _=G(()=>()=>p()?`
			position: absolute;
			top: ${n(d).top}px;
			left: ${n(d).left}px;
			z-index: 210;
			${i()}
		`.trim():"display: none;");var f=A(),c=D(f);{var h=s=>{tt(s,{children:(r,m)=>{var l=ot(),y=C(l);X(y,()=>o.children??W);var P=F(y,2),u=C(P);M(u,1,"_5 w-24 h-24 top"),R(P),R(l),B(l,E=>z(a,E),()=>n(a)),T((E,L)=>{M(l,1,`${e()??""} ps-${n(d).placement??""}`),Y(l,E),M(P,1,K(["absolute overflow-hidden h-18 flex justify-center w-full",n(d).placement==="bottom"&&"top-[-18px]",n(d).placement==="top"&&"bottom-[-18px] rotate-180"])),J(u,"src",L)},[()=>n(_)(),()=>Q(Z)]),S(r,l)},$$slots:{default:!0}})};q(c,s=>{p()&&s(h)})}S(x,f),U()}export{ht as P,tt as a};
