import{a as j,c,d as T,i as s,S as b,b as z,t as o,e as I}from"./web-D2t8vN-4.js";import{Q as O}from"./QTable-Ek_A2ckd.js";import{C as f,f as h,a as g,d as V,P as E,L as r,b as v}from"./app-wv8zGSIX.js";import{u as G}from"./empresas-CwqwzXJu.js";import{c as Q}from"./layout.module-x1zG1p6h.js";var Y=o('<div class="w100 flex-wrap box-error-ms mt-16">Seleccione un Backup'),A=o('<div class="flex w100 jc-between"><div><div class="w100 flex-wrap"></div><div> mb</div></div><button class="bn1 d-purple"><i class=icon-download>'),D=o('<div class="flex jc-center w100 mt-16"><button class="bn1 d-blue">Restaurar <i class=icon-database>'),F=o('<div class="w100 grid"><div><div class="flex jc-between ai-center mb-06"><div><h2 class=mb-08>Backups</h2></div><div class="flex ai-center"><button class="bn1 s4 b-green mr-08"><i class=icon-plus></i></button><button class="bn1 s4 d-blue"><i class=icon-upload></i></button></div></div></div><div class=""><h2 class=mb-08>Restore</h2><div>');function K(){const[$]=G(),[a,k]=j(null),w=async()=>{r.standard("Generando Backup...");try{await v({data:{},route:"backup-create"})}catch{r.remove();return}r.remove()},_=async t=>{r.standard("Rstaurando Backup...");try{await v({data:{Name:t},route:"backup-restore"})}catch{r.remove();return}r.remove()};return c(E,{title:"Backups & Restore",fetchLoading:!0,get children(){var t=F(),l=t.firstChild,S=l.firstChild,x=S.firstChild,C=x.nextSibling,y=C.firstChild,u=l.nextSibling,N=u.firstChild,d=N.nextSibling;return t.style.setProperty("grid-template-columns","4fr 3fr"),y.$$click=e=>{e.stopPropagation(),f("Generar Backup","¿Desea generar el backup ahora?","SI","NO",()=>{w()})},s(l,c(O,{get data(){return $()},css:"selectable w100",maxHeight:"calc(80vh - 13rem)",get selected(){return a()},isSelected:e=>e.Name===a()?.Name,onRowCLick:e=>{a()===e&&(e=null),k(e)},columns:[{header:"Created",headerStyle:{width:"11rem"},css:"nowrap",getValue:e=>h(e.upd,"Y-m-d h:n")},{header:"Nombre",getValue:e=>e.Name},{header:"Tamaño",css:"t-c",getValue:e=>`${g(e.Size/1e3/1e3,2)} mb`}]}),null),u.style.setProperty("margin-left","20px"),s(d,c(b,{get when(){return!a()},get children(){return Y()}}),null),s(d,c(b,{get when(){return a()},get children(){return[(()=>{var e=A(),i=e.firstChild,n=i.firstChild,p=n.nextSibling,B=p.firstChild,P=i.nextSibling;return s(n,()=>a().Name),s(p,()=>g(a().Size/1e3/1e3,2),B),P.$$click=R=>{R.stopPropagation();const L=["backups",1,a().Name].join("/"),m=window.S3_URL+L;console.log("url to download::",m),V(m)},e})(),(()=>{var e=D(),i=e.firstChild;return i.$$click=n=>{n.stopPropagation(),f("Restaurar Backup",`Restaurar el backup realizado el ${h(a().upd,"Y-m-d h:n")}`,"SI","NO",()=>{_(a().Name)})},e})()]}}),null),z(()=>I(d,`w100 ${Q.layer_propiedades} py-10 px-12`)),t}})}T(["click"]);export{K as default};
