import"./DsnmJJEf.js";import{ac as ie,aC as re,aD as ne,p as fe,e as j,g as se,l as z,i as u,f as V,c as D,s as g,r as M,t as C,b as y,d as le,m as G,h as c,a as H,aE as ue,x as de,u as ve}from"./Bf0lWsRu.js";import{s as L}from"./WwA8pLij.js";import{i as S}from"./D7jGWfSg.js";import{h as Q}from"./B9_QpWQw.js";import{a as N,r as oe}from"./BWVkWQLM.js";import{s as v,c as w}from"./C7iUW-It.js";import{d as _e,e as E}from"./Cu2BEfFs.js";import{b as R}from"./OShJgGfR.js";import{p as ce}from"./DEnCy23-.js";import{s as o}from"./BMRmn4k7.js";const me=[];function be(i,e=!1,n=!1){return O(i,new Map,"",me,null,n)}function O(i,e,n,d,m=null,f=!1){if(typeof i=="object"&&i!==null){var b=e.get(i);if(b!==void 0)return b;if(i instanceof Map)return new Map(i);if(i instanceof Set)return new Set(i);if(ie(i)){var l=Array(i.length);e.set(i,l),m!==null&&e.set(m,l);for(var _=0;_<i.length;_+=1){var x=i[_];_ in i&&(l[_]=O(x,e,n,d,null,f))}return l}if(re(i)===ne){l={},e.set(i,l),m!==null&&e.set(m,l);for(var k in i)l[k]=O(i[k],e,n,d,null,f);return l}if(i instanceof Date)return structuredClone(i);if(typeof i.toJSON=="function"&&!f)return O(i.toJSON(),e,n,d,i)}if(i instanceof EventTarget)return i;try{return structuredClone(i)}catch{return i}}var ge=V("<div><div></div></div> <div> <!></div> <div><div></div></div> <div><div></div></div>",1),he=V("<div><div></div></div>"),ye=V("<textarea></textarea>"),xe=V("<input/>"),Ce=V("<div> </div>"),we=V("<div><!> <div><!> <!> <!> <!></div></div>");function Je(i,e){fe(e,!0);const n=ce(e,"saveOn",15),d=e.baseDecimals?10**e.baseDecimals:0,m=()=>{if(!e.required||e.disabled)return 0;if(!n()||!e.save)return 1;const a=n()[e.save];let t=!e.required;return e.validator?t=e.validator(a):(a||a===0)&&(t=!0),t?2:1};let f=j(""),b=j(se(m())),l=0,_=null;const x=(a,t)=>{a.stopPropagation();let s=a.target.value;if(e.type==="number"){if(!t&&!s&&a.key==="-")return;isNaN(s)?s=void 0:s=parseFloat(s)}if(t&&e.validator&&!e.validator(s)){c(f,_,!0),n()&&e.save&&(d&&typeof u(f)=="number"&&c(f,Math.round(u(f)*d),!0),n(n()[e.save]=u(f),!0));return}e.transform&&t&&(s=e.transform(s)),G(()=>{if(n()&&e.save){let h=s;d&&typeof h=="number"&&(h=Math.round(h*d)),n(n()[e.save]=h,!0),c(b,m(),!0)}}),t||(l=1),c(f,s,!0)},k=()=>{if(u(b)){if(u(b)===2)return'<i class="v-icon icon-ok c-green"></i>';if(u(b)===1)return'<i class="v-icon icon-attention c-red"></i>'}else return null;return null};let q;const J=()=>{G(()=>{const a=n()[e.save];c(f,typeof a=="number"?a:a||"",!0),d&&typeof u(f)=="number"&&c(f,u(f)/d),c(b,m(),!0)})};z(()=>{!n()||!e.save||q!==n()&&(q=n(),n()[e.save]!==u(f)&&J())}),z(()=>{e.dependencyValue&&J()});let W=ve(()=>`${o.input} p-rel${e.css?` ${e.css}`:""}${e.label?"":" no-label"}`);var I=we(),T=D(I);{var X=a=>{var t=ge(),r=H(t),s=g(r,2),h=D(s,!0),te=g(h);Q(te,()=>k()||""),M(s);var U=g(s,2),ae=g(U,2);C(()=>{v(r,1,w(o.input_lab_cell_left)),v(s,1,w(o.input_lab)),L(h,e.label),v(U,1,w(o.input_lab_cell_right)),v(ae,1,w(o.input_shadow_layer))}),y(a,t)};S(T,a=>{e.label&&a(X)})}var A=g(T,2),F=D(A);{var Y=a=>{var t=he();C(()=>v(t,1,w(o.input_div_1))),y(a,t)};S(F,a=>{e.label&&a(Y)})}var K=g(F,2);{var Z=a=>{var t=ye();ue(t),t.__keyup=r=>{x(r)},C(()=>{v(t,1,`w-full ${o.input_inp} ${e.inputCss||""}`),N(t,"placeholder",e.placeholder||""),t.disabled=e.disabled,N(t,"rows",e.rows)}),E("blur",t,r=>{console.log("input saveon:",be(n())),x(r,!0),e.onChange&&l&&(e.onChange(),l=0)}),R(t,()=>u(f),r=>c(f,r)),y(a,t)},B=a=>{var t=xe();oe(t),t.__keyup=r=>{x(r)},C(()=>{v(t,1,`w-full ${o.input_inp} ${(e.inputCss||"")??""}`),N(t,"type",e.type||"search"),N(t,"placeholder",e.placeholder||""),t.disabled=e.disabled}),E("focus",t,r=>{_=r.target.value}),E("blur",t,r=>{x(r,!0),e.onChange&&l&&(e.onChange(),l=0),_=null}),R(t,()=>u(f),r=>c(f,r)),y(a,t)};S(K,a=>{e.useTextArea?a(Z):a(B,!1)})}var P=g(K,2);{var p=a=>{var t=de(),r=H(t);Q(r,()=>k()||""),y(a,t)};S(P,a=>{e.label||a(p)})}var $=g(P,2);{var ee=a=>{var t=Ce(),r=D(t,!0);M(t),C(()=>{v(t,1,o.input_post_value),L(r,e.postValue)}),y(a,t)};S($,a=>{e.postValue&&a(ee)})}M(A),M(I),C(()=>{v(I,1,w(u(W))),v(A,1,`${o.input_div} flex w-full`)}),y(i,I),le()}_e(["keyup"]);export{Je as I,be as s};
