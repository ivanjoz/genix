import{a as M,c as o,d as U,g as d,b as u,i as l,S as v,r as p,e as W,t as m,f as q}from"./web-n9SrCLWm.js";import{Q as J}from"./QTable-BpZD-x6b.js";import{C as S,f as k,a as x,d as K,P as X,E as Z,L as r,b as w}from"./app-CxTCLAtU.js";import{u as ee}from"./empresas-BJmgJAZ8.js";import{c as ae}from"./layout.module-x1zG1p6h.js";var te=m('<div class="w100 flex-wrap box-error-ms mt-16">Seleccione un Backup'),re=m('<div class="flex w100 jc-between"><div><div class="w100 flex-wrap"></div><div><!$><!/> mb</div></div><button class="bn1 d-purple"><i class=icon-download>'),le=m('<div class="flex jc-center w100 mt-16"><button class="bn1 d-blue">Restaurar <i class=icon-database>'),se=m('<div class="w100 grid"><div><div class="flex jc-between ai-center mb-06"><div><h2 class=mb-08>Backups</h2></div><div class="flex ai-center"><button class="bn1 s4 b-green mr-08"><i class=icon-plus></i></button><button class="bn1 s4 d-blue"><i class=icon-upload></i></button></div></div><!$><!/></div><div class=""><h2 class=mb-08>Restore</h2><div><!$><!/><!$><!/>');function ue(){const[C]=ee(),[a,N]=M(null),y=async()=>{r.standard("Generando Backup...");try{await w({data:{},route:"backup-create"})}catch{r.remove();return}r.remove()},B=async t=>{r.standard("Rstaurando Backup...");try{await w({data:{Name:t},route:"backup-restore"})}catch{r.remove();return}r.remove()};return o(X,{title:"Backups & Restore",fetchLoading:!0,get children(){var t=d(se),s=t.firstChild,b=s.firstChild,P=b.firstChild,R=P.nextSibling,E=R.firstChild,L=b.nextSibling,[j,T]=u(L.nextSibling),$=s.nextSibling,z=$.firstChild,i=z.nextSibling,I=i.firstChild,[g,O]=u(I.nextSibling),V=g.nextSibling,[G,H]=u(V.nextSibling);return t.style.setProperty("grid-template-columns","4fr 3fr"),E.$$click=e=>{e.stopPropagation(),S("Generar Backup","¿Desea generar el backup ahora?","SI","NO",()=>{y()})},l(s,o(J,{get data(){return C()},css:"selectable w100",maxHeight:"calc(80vh - 13rem)",get selected(){return a()},isSelected:e=>e.Name===a()?.Name,onRowCLick:e=>{a()===e&&(e=null),N(e)},columns:[{header:"Created",headerStyle:{width:"11rem"},css:"nowrap",getValue:e=>k(e.upd,"Y-m-d h:n")},{header:"Nombre",getValue:e=>e.Name},{header:"Tamaño",css:"t-c",getValue:e=>`${x(e.Size/1e3/1e3,2)} mb`}]}),j,T),$.style.setProperty("margin-left","20px"),l(i,o(v,{get when(){return!a()},get children(){return d(te)}}),g,O),l(i,o(v,{get when(){return a()},get children(){return[(()=>{var e=d(re),n=e.firstChild,c=n.firstChild,f=c.nextSibling,Q=f.firstChild,[_,Y]=u(Q.nextSibling);_.nextSibling;var A=n.nextSibling;return l(c,()=>a().Name),l(f,()=>x(a().Size/1e3/1e3,2),_,Y),A.$$click=D=>{D.stopPropagation();const F=["backups",1,a().Name].join("/"),h=Z.S3_URL+F;console.log("url to download::",h),K(h)},p(),e})(),(()=>{var e=d(le),n=e.firstChild;return n.$$click=c=>{c.stopPropagation(),S("Restaurar Backup",`Restaurar el backup realizado el ${k(a().upd,"Y-m-d h:n")}`,"SI","NO",()=>{B(a().Name)})},p(),e})()]}}),G,H),W(()=>q(i,`w100 ${ae.layer_propiedades} py-10 px-12`)),p(),t}})}U(["click"]);export{ue as default};
