import{d as j,t as o,i as s,c as E}from"./web-B9EQUxsk.js";import{Q as T}from"./QTable-Bindcl4_.js";import{C as b,f,b as h,E as z,d as I,L as t}from"./main-CyvPQj02.js";import{P as O}from"./app-CK7_gtPn.js";import{u as V}from"./empresas-DJ-V3S_r.js";import{c as G}from"./layout.module-x1zG1p6h.js";import{a as Q,c,S as g,b as Y}from"./solid-DoXAfIeo.js";import{P as v}from"./http-5mnECz6S.js";import"./store-DHPf-lLy.js";import"./main-3KfG555U.js";var A=o('<div class="w100 flex-wrap box-error-ms mt-16">Seleccione un Backup'),D=o('<div class="flex w100 jc-between"><div><div class="w100 flex-wrap"></div><div> mb</div></div><button class="bn1 d-purple"><i class=icon-download>'),F=o('<div class="flex jc-center w100 mt-16"><button class="bn1 d-blue">Restaurar <i class=icon-database>'),H=o('<div class="w100 grid"><div><div class="flex jc-between ai-center mb-06"><div><h2 class=mb-08>Backups</h2></div><div class="flex ai-center"><button class="bn1 s4 b-green mr-08"><i class=icon-plus></i></button><button class="bn1 s4 d-blue"><i class=icon-upload></i></button></div></div></div><div class><h2 class=mb-08>Restore</h2><div>');function re(){const[$]=V(),[a,k]=Q(null),_=async()=>{t.standard("Generando Backup...");try{await v({data:{},route:"backup-create"})}catch{t.remove();return}t.remove()},w=async r=>{t.standard("Rstaurando Backup...");try{await v({data:{Name:r},route:"backup-restore"})}catch{t.remove();return}t.remove()};return c(O,{title:"Backups & Restore",fetchLoading:!0,get children(){var r=H(),l=r.firstChild,S=l.firstChild,x=S.firstChild,C=x.nextSibling,y=C.firstChild,u=l.nextSibling,N=u.firstChild,d=N.nextSibling;return r.style.setProperty("grid-template-columns","4fr 3fr"),y.$$click=e=>{e.stopPropagation(),b("Generar Backup","¿Desea generar el backup ahora?","SI","NO",()=>{_()})},s(l,c(T,{get data(){return $()},css:"selectable w100",maxHeight:"calc(80vh - 13rem)",get selected(){return a()},isSelected:e=>e.Name===a()?.Name,onRowCLick:e=>{a()===e&&(e=null),k(e)},columns:[{header:"Created",headerStyle:{width:"11rem"},css:"nowrap",getValue:e=>f(e.upd,"Y-m-d h:n")},{header:"Nombre",getValue:e=>e.Name},{header:"Tamaño",css:"t-c",getValue:e=>`${h(e.Size/1e3/1e3,2)} mb`}]}),null),u.style.setProperty("margin-left","20px"),s(d,c(g,{get when(){return!a()},get children(){return A()}}),null),s(d,c(g,{get when(){return a()},get children(){return[(()=>{var e=D(),i=e.firstChild,n=i.firstChild,m=n.nextSibling,B=m.firstChild,P=i.nextSibling;return s(n,()=>a().Name),s(m,()=>h(a().Size/1e3/1e3,2),B),P.$$click=R=>{R.stopPropagation();const L=["backups",1,a().Name].join("/"),p=z.S3_URL+L;console.log("url to download::",p),I(p)},e})(),(()=>{var e=F(),i=e.firstChild;return i.$$click=n=>{n.stopPropagation(),b("Restaurar Backup",`Restaurar el backup realizado el ${f(a().upd,"Y-m-d h:n")}`,"SI","NO",()=>{w(a().Name)})},e})()]}}),null),Y(()=>E(d,`w100 ${G.layer_propiedades} py-10 px-12`)),r}})}j(["click"]);export{re as default};
