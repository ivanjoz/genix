import"./DsnmJJEf.js";import{H as Ut,m as wt,x as G,a as F,b as l,aA as Tt,f as P,c as L,s as he,r as S,t as $,i as e,aB as rt,p as Ct,e as k,g as vt,l as De,d as yt,h as p,u as le,D as tt,bl as Nt}from"./Bf0lWsRu.js";import{s as Ce}from"./WwA8pLij.js";import{s as pt}from"./Csa_d837.js";import{i as C}from"./D7jGWfSg.js";import{e as je,i as it}from"./CA0Nq6W4.js";import{h as Ge}from"./B9_QpWQw.js";import{b as Ye,r as Pt,a as gt,s as qt,d as ut,S as Et}from"./BWVkWQLM.js";import{s as Se,c as Dt}from"./C7iUW-It.js";import{d as xt,e as Ht}from"./Cu2BEfFs.js";import{b as nt}from"./CPRIj_W5.js";import{p as He}from"./DEnCy23-.js";import{t as jt,i as Wt,h as Gt}from"./DP6SISrU.js";import{o as Yt}from"./BFTutmdY.js";import{W as _t,C as bt}from"./CUNP7WoD.js";import{P as Jt}from"./DcGgFXmX.js";function Zt(_,t,r){Ut(()=>{var s=wt(()=>t(_,r?.())||{});if(s?.destroy)return()=>s.destroy()})}function Kt(_){let t=null,r=0,s=new Map,h=null,o=new Set,a=!1,c=null;function u(){if(a||(t=_.getScrollElement(),!t))return;a=!0,r=t.scrollTop;const f=()=>{h!==null&&cancelAnimationFrame(h),h=requestAnimationFrame(()=>{t&&(r=t.scrollTop,n()),h=null})};t.addEventListener("scroll",f,{passive:!0}),c=new ResizeObserver(()=>{n()}),c.observe(t)}function n(){o.forEach(f=>f())}function g(f){return s.get(f)??_.estimateSize(f)}function T(){return _.getCount?_.getCount():_.count}function v(){let f=0;const y=T();for(let B=0;B<y;B++)f+=g(B);return f}function H(){if(!t)return[];r=t.scrollTop;const f=T(),y=_.overscan??3,B=t.clientHeight;if(B<=0)return[];let D=0,M=0;for(let I=0;I<f;I++){const ae=g(I);if(M+ae>r){D=Math.max(0,I-y);break}M+=ae}M=0;for(let I=0;I<D;I++)M+=g(I);const j=[],A=r+B;for(let I=D;I<f;I++){const ae=g(I),be=M+ae;if(j.push({index:I,start:M,size:ae,end:be,key:I}),M=be,M>A+y*_.estimateSize(0))break}return j}return u(),{subscribe:f=>(o.add(f),()=>{o.delete(f)}),getVirtualItems:()=>(a||u(),H()),getTotalSize:()=>(a||u(),v()),refresh:()=>{n()}}}var Qt=P("<button><!> <!></button>"),Xt=P("<div><!> <!></div>");function qe(_,t){const r=(u,n=Tt)=>{var g=G(),T=F(g);{var v=f=>{var y=Qt();y.__click=()=>s(n());var B=L(y);{var D=A=>{var I=rt();$(()=>Ce(I,n().text)),l(A,I)};C(B,A=>{n().text&&A(D)})}var M=he(B,2);{var j=A=>{var I=G(),ae=F(I);je(ae,17,()=>n().children,it,(be,ye)=>{r(be,()=>e(ye))}),l(A,I)};C(M,A=>{n().children&&A(j)})}S(y),$(()=>Se(y,1,Dt(n().css))),l(f,y)},H=f=>{var y=Xt(),B=L(y);{var D=A=>{var I=rt();$(()=>Ce(I,n().text)),l(A,I)};C(B,A=>{n().text&&A(D)})}var M=he(B,2);{var j=A=>{var I=G(),ae=F(I);je(ae,17,()=>n().children,it,(be,ye)=>{r(be,()=>e(ye))}),l(A,I)};C(M,A=>{n().children&&A(j)})}S(y),$(()=>Se(y,1,Dt(n().css))),l(f,y)};C(T,f=>{n().tagName==="BUTTON"?f(v):f(H,!1)})}l(u,g)},s=u=>{u.onClick&&u.onClick(u.id||0)};var h=G(),o=F(h);{var a=u=>{var n=G(),g=F(n);je(g,17,()=>t.elements,it,(T,v)=>{r(T,()=>e(v))}),l(u,n)},c=u=>{r(u,()=>t.elements)};C(o,u=>{Array.isArray(t.elements)?u(a):u(c,!1)})}l(_,h)}xt(["click"]);var $t=P('<i class="icon-attention c-red CellEditable_1ksghja"></i>'),ei=P("<input/>"),ti=P('<div class="_2 CellEditable_1ksghja"> </div> <div><div role="button" tabindex="0"><!> <!></div> <!></div>',1);function ii(_,t){Ct(t,!0);let r=He(t,"contentClass",3,""),s=He(t,"inputClass",3,""),h=He(t,"required",3,!1),o=He(t,"type",3,"text"),a=k(!1),c=k(void 0);const u=t.getValue?t.getValue(t.saveOn):(t.saveOn||{})[t.save];let n=k(vt(u));De(()=>{e(a)&&e(c)&&e(c).focus()});function g(q){return o()==="number"?parseFloat(q||"0"):q}function T(q){q.stopPropagation(),p(a,!0)}function v(q){q.stopPropagation();const i=g(q.target.value);e(n)!==i&&(console.log("cambiando::"),t.onChange&&t.onChange(i),p(n,i,!0)),p(a,!1)}var H=ti(),f=F(H),y=L(f,!0);S(f);var B=he(f,2),D=L(B);D.__click=T,D.__keydown=q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),T(q))};let M;var j=L(D);{var A=q=>{{let i=le(()=>t.render(e(n)));qe(q,{get elements(){return e(i)}})}},I=q=>{var i=rt();$(()=>Ce(i,e(n))),l(q,i)};C(j,q=>{t.render?q(A):q(I,!1)})}var ae=he(j,2);{var be=q=>{var i=$t();l(q,i)};C(ae,q=>{!e(n)&&h()&&q(be)})}S(D);var ye=he(D,2);{var Je=q=>{var i=ei();Pt(i),nt(i,ve=>p(c,ve),()=>e(c)),$(()=>{gt(i,"type",o()),qt(i,e(n)||""),Se(i,1,`w-full ${s()}`,"CellEditable_1ksghja")}),Ht("blur",i,v),l(q,i)};C(ye,q=>{e(a)&&q(Je)})}S(B),$(()=>{Ce(y,e(n)),Se(B,1,`_1 ${t.css??""}`,"CellEditable_1ksghja"),Se(D,1,r(),"CellEditable_1ksghja"),M=Ye(D,"",M,{visibility:e(a)?"hidden":"visible"})}),l(_,H),yt()}xt(["click","keydown"]);const ri={smoothScroll:!0,shouldThrowOnBounds:!0,align:"auto"},ni=(_,t,r)=>{if(_===0)return 0;const s=_*t;return Math.max(0,s-r)},Rt=(_,t,r,s,h,o,a,c,u,n,g)=>{if(o==="bottomToTop"){const T=Math.ceil(t/r)+1,v=n??s*r,f=Math.max(0,v-t)-_,y=Math.floor(f/r);if(y<0)return{start:0,end:Math.min(s,T+h*2)};const B=Math.max(0,y-h),D=Math.min(s,y+T+h);return{start:B,end:D}}else{const T=Math.floor(_/r),v=Math.min(s,T+Math.ceil(t/r)+1),H=n??s*r,f=Math.max(0,H-t),y=Math.max(1,Math.floor(r*.25));if(Math.abs(_-f)<=y){const j=s;let A=j,I=0;const ae=be=>{const ye=g?g[be]:void 0;return Number.isFinite(ye)&&ye>0?ye:r};for(;A>0&&I<t;){const be=ae(A-1);I+=be,A-=1}return{start:Math.max(0,A-h),end:j}}const D=Math.max(0,T-h),M=Math.min(s,v+h);return{start:D,end:M}}},ai=(_,t,r,s,h,o,a,c,u)=>{const n=o||u||0;if(_==="bottomToTop"){const g=a??t*h,T=(t-r)*h,v=Math.max(0,n-g);return T+v}else{if(c){const g=Fe(c,h,s);return Math.max(0,Math.round(g))}return s*h}},si=(_,t,r=!1)=>{const{initialized:s,mode:h,containerElement:o,viewportElement:a,calculatedItemHeight:c,scrollTop:u}=_,{setHeight:n,setScrollTop:g}=t;if(r&&o&&a&&s){const T=o.getBoundingClientRect().height;if(n(T),h==="bottomToTop"){const H=Math.floor(u/c)*c;a.scrollTop=H,g(H)}}},oi=(_,t,r,s,h,o=0,a=0,c="topToBottom")=>{const u=_.filter(f=>f);if(u.length===0)return{newHeight:s,newLastMeasuredIndex:t.start,updatedHeightCache:r,clearedDirtyItems:new Set,newTotalHeight:o,newValidCount:a,heightChanges:[]};const n={...r},g=new Set,T=[];let v=o,H=a;return h.size>0?h.forEach(f=>{let y;c==="bottomToTop"?y=u.length-1-(f-t.start):y=f-t.start;const B=u[y];if(B&&y>=0&&y<u.length)try{B.offsetHeight;const D=B.getBoundingClientRect().height,M=n[f];if(Number.isFinite(D)&&D>0&&(!M||Math.abs(M-D)>=.1)){const j=M||s,A=D-j;T.push({index:f,oldHeight:j,newHeight:D,delta:A}),M&&Number.isFinite(M)&&M>0?v=v-M+D:(v+=D,H++),n[f]=D}g.add(f)}catch{g.add(f)}else g.add(f)}):u.forEach((f,y)=>{const B=c==="bottomToTop"?Math.max(0,(t.end??t.start+u.length)-1-y):t.start+y;if(!n[B])try{const D=f.getBoundingClientRect().height;Number.isFinite(D)&&D>0&&(v+=D,H++,n[B]=D)}catch{}}),{newHeight:H>0?v/H:s,newLastMeasuredIndex:t.start,updatedHeightCache:n,clearedDirtyItems:g,newTotalHeight:v,newValidCount:H,heightChanges:T}},Fe=(_,t,r,s,h=1e3)=>{const o=Math.max(0,Math.floor(r));if(o<=0)return 0;{let a=0;for(let c=0;c<o;c++){const u=_[c],n=Number.isFinite(u)&&u>0?u:t;a+=n}return a}},li=(_,t,r,s,h,o,a,c,u,n,g=0,T=0,v="topToBottom")=>{const H=r();return H.start===o&&n.size===0?null:(t&&clearTimeout(t),setTimeout(()=>{const{newHeight:y,newLastMeasuredIndex:B,updatedHeightCache:D,clearedDirtyItems:M,newTotalHeight:j,newValidCount:A,heightChanges:I}=oi(s,H,h,a,n,g,T,v);(Math.abs(y-a)>1||n.size>0)&&c({newHeight:y,newLastMeasuredIndex:B,updatedHeightCache:D,clearedDirtyItems:M,newTotalHeight:j,newValidCount:A,heightChanges:I})},u))},ci=()=>{let _=!1,t=null;return r=>{t=r,_||(_=!0,requestAnimationFrame(()=>{_=!1,t&&(t(),t=null)}))}},di=(_,t,r,s=1)=>{const h=r[_];return h===void 0?!0:Math.abs(t-h)>s},hi=(_,t,r,s)=>_?_.start!==t.start||_.end!==t.end||r!==s:!0,ui=(_,t,r,s,h,o,a)=>{const c=h<=1,u=h>=a-o-1;return{visibleItemsCount:_.end-_.start,startIndex:_.start,endIndex:_.end,totalItems:t,processedItems:r,averageItemHeight:s,atTop:c,atBottom:u,totalHeight:a}},gi=_=>{const{mode:t,align:r,targetIndex:s,itemsLength:h,calculatedItemHeight:o,height:a,scrollTop:c,firstVisibleIndex:u,lastVisibleIndex:n,heightCache:g}=_;return t==="bottomToTop"?vi({align:r,targetIndex:s,itemsLength:h,calculatedItemHeight:o,height:a,scrollTop:c,firstVisibleIndex:u,lastVisibleIndex:n,heightCache:g}):fi({align:r,targetIndex:s,calculatedItemHeight:o,height:a,scrollTop:c,firstVisibleIndex:u,lastVisibleIndex:n,heightCache:g})},vi=_=>{const{align:t,targetIndex:r,itemsLength:s,calculatedItemHeight:h,height:o,scrollTop:a,firstVisibleIndex:c,lastVisibleIndex:u,heightCache:n}=_,g=Fe(n,h,s),T=Fe(n,h,r),v=h;if(t==="auto"){if(r<c)return Math.max(0,g-(T+v));if(r>u-1)return Math.max(0,g-T-o);{const H=g-(T+v),f=g-T,y=Math.abs(a-H),B=Math.abs(a+o-f);return y<B?H:Math.max(0,f-o)}}else{if(t==="top")return Math.max(0,g-(T+v));if(t==="bottom")return Math.max(0,g-T-o);if(t==="nearest"){const H=g-(T+v),f=g-T;if(f<=a||H>=a+o){const y=Math.abs(a-H),B=Math.abs(a+o-f);return y<B?H:Math.max(0,f-o)}else return null}}return null},fi=_=>{const{align:t,targetIndex:r,calculatedItemHeight:s,height:h,scrollTop:o,firstVisibleIndex:a,lastVisibleIndex:c,heightCache:u}=_;if(t==="auto"){if(r<a)return Fe(u,s,r);if(r>c-1){const n=Fe(u,s,r+1);return Math.max(0,n-h)}else{const n=Fe(u,s,r),g=Fe(u,s,r+1),T=Math.abs(o-n),v=Math.abs(o+h-g);return T<v?n:Math.max(0,g-h)}}else{if(t==="top")return Fe(u,s,r);if(t==="bottom"){const n=Fe(u,s,r+1);return Math.max(0,n-h)}else if(t==="nearest"){const n=Fe(u,s,r),g=Fe(u,s,r+1);if(g<=o||n>=o+h){const T=Math.abs(o-n),v=Math.abs(o+h-g);return T<v?n:Math.max(0,g-h)}else return null}}return null},Lt={now:()=>typeof performance<"u"&&performance.now?performance.now():Date.now()},mi=(_,t,r={})=>{const{leading:s=!0,trailing:h=!1}=r;let o=0,a=null,c=null,u=!0;const n=g=>{o=Lt.now(),_(...g)};return((...g)=>{const T=Lt.now(),v=u?t:T-o;if(c=g,a&&(clearTimeout(a),a=null),v>=t)s&&(u=!1,n(g)),h&&!s&&(a=setTimeout(()=>{c&&n(c),a=null},t));else if(u&&s)u=!1,n(g);else if(h){const H=t-v;a=setTimeout(()=>{c&&n(c),a=null},H)}})};var kt={},_i=P("<!> <div><!></div>",1),bi=P("<div><div><div><div></div></div></div></div>");function Bt(_,t){Ct(t,!0);const r=ci(),s=16,h=new WeakMap,o=typeof process<"u"&&(kt?.PUBLIC_SVELTE_VIRTUAL_LIST_DEBUG==="true"||kt?.SVELTE_VIRTUAL_LIST_DEBUG==="true"),a=He(t,"items",19,()=>[]),c=He(t,"defaultEstimatedItemHeight",3,40),u=He(t,"debug",3,!1),n=He(t,"mode",3,"topToBottom"),g=He(t,"bufferSize",3,20),T=vt([]);let v=k(0);const H=!1;let f=k(!1),y=k(-1),B=k(0),D=null,M=null,j=null;const A=vt(new Set);let I=k(0),ae=k(0),be=k(null),ye=k(0),Je=k(0),q=k(null);const i=new Ti({itemLength:a().length,itemHeight:c(),internalDebug:o}),ve=Math.random().toString(36).slice(2,7),K=(d,x)=>{if(!(!u()&&!o))try{const R=new Date().toISOString().split("T")[1]?.replace("Z","");console.info(`[SVL][${ve}] ${R} ${d}`,x??"")}catch{}};let Ae=k(0);const ft=le(()=>()=>{const d=e(te)();return(n()==="bottomToTop"?a().slice(d.start,d.end).reverse():a().slice(d.start,d.end)).map((R,E)=>({item:R,originalIndex:n()==="bottomToTop"?d.end-1-E:d.start+E,sliceIndex:E}))}),w=d=>{if(!i.viewportElement||!i.initialized||e(Q))return;if(n()==="bottomToTop"&&Me&&!e(ue)&&performance.now()>=e(Ae)){const N=performance.now(),re=i.viewport,ne=h.get(re)??0;if(N-ne<s){p(Ae,N+50);return}h.set(re,N);const m=Math.max(0,e(Te)()-e(v));K("b2t-correction-approx",{approximateScrollTop:m}),i.viewport.scrollTop=m,i.scrollTop=m,tt().then(()=>{const W=i.viewport.querySelector('[data-original-index="0"]');if(W){const ce=i.viewport.getBoundingClientRect(),xe=W.getBoundingClientRect();Math.abs(ce.y+ce.height-(xe.y+xe.height))<=4||(W.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"}),K("b2t-correction-native",{containerBottom:ce.y+ce.height,itemBottom:xe.y+xe.height})),i.scrollTop=i.viewport.scrollTop,p(Ae,performance.now()+200)}});return}const x=i.viewport.scrollTop,R=Math.max(0,e(Te)()-e(v));let E=0;const ie=e(te)();for(const N of d)N.index<ie.start&&(E+=N.delta);if(Math.abs(E)>1){const N=Math.min(R,Math.max(0,x+E));i.viewport.scrollTop=N,i.scrollTop=N}},U=mi(()=>{e(I)>0&&(Me=e(Ie),i.startDynamicUpdate(),ee())},16,{leading:!0,trailing:!0});De(()=>{U()}),De(()=>{i.updateItemLength(a().length)});const ee=()=>{p(Je,i.totalHeight,!0),D=li(H,D,e(te),T,i.getHeightCache(),e(y),i.averageHeight,d=>{if(i.itemHeight=d.newHeight,p(y,d.newLastMeasuredIndex,!0),d.heightChanges.length>0&&i.processDirtyHeights(d.heightChanges),d.heightChanges.length>0&&n()==="bottomToTop"){const x=d.heightChanges;queueMicrotask(()=>w(x))}if(n()==="topToBottom"&&i.isReady&&i.initialized){const x=e(Je),R=i.totalHeight,E=R-x;if(Math.abs(E)>1){const ie=Math.max(0,R-(e(v)||0)),N=Math.max(i.averageHeight,10),re=i.viewport.scrollTop;if(Math.abs(re-ie)<=N){const m=Math.min(ie,Math.max(0,re+E));i.viewport.scrollTop=m,i.scrollTop=m}}}wt(()=>{A.clear(),p(I,0),Me=!1}),i.endDynamicUpdate()},e(y)<0?0:100,A,0,0,n())};let Q=k(!1),ue=k(!1),Re=k(0),Be=k(0);const Te=le(()=>()=>i.totalHeight),Ie=le(()=>i.scrollTop>=e(Te)()-e(v)-1);let Me=!1,se=null;function ge(){if(!i.viewportElement)return;const d=i.viewport.querySelector(`[data-original-index="${a().length-1}"]`);if(!d)return;const x=i.viewport.getBoundingClientRect(),R=d.getBoundingClientRect();p(q,Math.round(Math.abs(R.bottom-x.bottom)),!0),o&&console.info("[SVL] bottomDistance(px):",e(q))}De(()=>{if(i.initialized&&n()==="bottomToTop"&&i.viewportElement){const d=Math.max(0,e(Te)()-e(v)),x=i.viewport.scrollTop,R=Math.abs(x-d),E=Math.abs(i.averageHeight-e(Re))>1,ie=Math.max(0,e(Te)()-e(v)),N=Math.abs(x-ie)<i.averageHeight;if(E&&!e(Q)&&!N&&!e(ue)&&performance.now()>=e(Ae)&&!i.isDynamicUpdateInProgress&&R>i.averageHeight*3){const ne=Math.round(d);i.viewport.scrollTop=ne,i.scrollTop=ne}R>i.averageHeight*5&&p(Q,!0),p(Re,i.averageHeight,!0)}}),De(()=>{const d=a().length;if(i.initialized&&n()==="bottomToTop"&&i.isReady&&e(Be)>0&&d-e(Be)!==0){const R=i.viewport.scrollTop,E=i.averageHeight,ie=e(v),N=e(Te)(),re=Math.max(0,N-ie);(Math.abs(R-Math.max(0,e(Be)*E-ie))<E*2||R===0)&&i.runDynamicUpdate(()=>{const m=re;i.viewport.scrollTop=m,i.scrollTop=m,p(Q,!1)})}p(Be,d,!0)}),De(()=>{if(i.isReady){const d=i.container.getBoundingClientRect().height;Number.isFinite(d)&&d>0&&p(v,d,!0)}}),De(()=>{if(e(v)===0&&i.isReady){const d=i.container.getBoundingClientRect().height;Number.isFinite(d)&&d>0&&p(ae,d,!0)}});const te=le(()=>()=>{if(!a().length)return{start:0,end:0};const d=e(v)||0;if(n()==="bottomToTop"&&!i.initialized&&i.scrollTop===0&&d>0){const x=Math.max(0,e(Te)()-d);return se=Rt(x,d,i.averageHeight,a().length,g(),n(),e(Ie),Me,se,e(Te)(),i.getHeightCache()),se}return se=Rt(i.scrollTop,d,i.averageHeight,a().length,g(),n(),e(Ie),Me,se,e(Te)(),i.getHeightCache()),se}),_e=()=>{i.viewportElement&&(e(f)||(p(f,!0),r(()=>{const d=i.viewport.scrollTop;if(n()==="bottomToTop"&&e(B)-d>.5&&(p(Ae,performance.now()+450),p(Q,!0)),p(B,d,!0),i.scrollTop=d,ge(),o){const x=e(te)();K("scroll",{mode:n(),scrollTop:i.scrollTop,height:e(v),totalHeight:e(Te)(),averageItemHeight:i.averageHeight,visibleRange:x})}p(f,!1)})))},b=(d=!1)=>{if(K("updateHeightAndScroll-enter",{immediate:d,initialized:i.initialized,mode:n()}),!i.initialized&&n()==="bottomToTop"){tt().then(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!i.isReady)return;const x=i.container.getBoundingClientRect().height;p(v,x,!0);const R=ni(a().length,i.averageHeight,x),ie=String(ve).toLowerCase().replace(/[^a-z0-9]/g,"").slice(-4),N=parseInt(ie,36),re=Number.isNaN(N)?Math.floor(Math.random()*3):N%3;K("b2t-init",{measuredHeight:x,targetScrollTop:R,jitterMs:re}),setTimeout(()=>{i.viewport.scrollTop=R,i.scrollTop=R,requestAnimationFrame(()=>{i.initialized||(i.initialized=!0),tt().then(()=>{const ne=i.viewport.querySelector('[data-original-index="0"]');if(!ne)return;const m=i.viewport.getBoundingClientRect(),W=ne.getBoundingClientRect();Math.abs(m.y+m.height-(W.y+W.height))<=4||(ne.scrollIntoView({block:"end",inline:"nearest"}),i.scrollTop=i.viewport.scrollTop,K("b2t-init-native-fallback",{containerBottom:m.y+m.height,itemBottom:W.y+W.height}))})})},re)})})});return}si({initialized:i.initialized,mode:n(),containerElement:i.containerElement,viewportElement:i.viewportElement,calculatedItemHeight:i.averageHeight,height:e(v),scrollTop:i.scrollTop},{setHeight:x=>p(v,x,!0),setScrollTop:x=>i.scrollTop=x},d),K("updateHeightAndScroll-exit",{immediate:d})};j=new ResizeObserver(d=>{r(()=>{K("item-resize-observer",{entries:d.length});let x=!1;e(te)();for(const R of d){const E=R.target,ie=T.indexOf(E),N=parseInt(E.dataset.originalIndex||"-1",10);if(ie!==-1&&N>=0){const re=E.getBoundingClientRect().height;di(N,re,i.getHeightCache())&&(e(I)===0&&(Me=e(Ie)),A.add(N),p(I,A.size,!0),x=!0)}}x&&(K("item-resize-recalc"),ee())})}),Yt(()=>(K("onMount-enter",{mode:n(),items:a().length}),b(),tt().then(()=>requestAnimationFrame(()=>requestAnimationFrame(()=>{K("post-hydration-measure"),ee()}))),M=new ResizeObserver(()=>{if(!i.initialized){K("container-resize-ignored","not-initialized");return}K("container-resize"),b(!0)}),i.isReady&&M.observe(i.container),()=>{M&&M.disconnect(),j&&j.disconnect()})),De(()=>{o&&(p(be,e(te)(),!0),p(ye,i.averageHeight,!0))});const Ue=(d,x=!0,R=!0)=>{console.warn("SvelteVirtualList: scrollToIndex is deprecated and will be removed in a future version. Use the new scroll method from the component instance instead."),Le({index:d,smoothScroll:x,shouldThrowOnBounds:R})},Le=async d=>{const{index:x,smoothScroll:R,shouldThrowOnBounds:E,align:ie}={...ri,...d};if(!a().length)return;if(!i.viewportElement){tt().then(()=>{i.viewportElement&&Le({index:x,smoothScroll:R,shouldThrowOnBounds:E,align:ie})});return}let N=x;if(N<0||N>=a().length){if(E)throw new Error(`scroll: index ${N} is out of bounds (0-${a().length-1})`);N=Math.max(0,Math.min(N,a().length-1))}const{start:re,end:ne}=e(te)(),m=gi({mode:n(),align:ie||"auto",targetIndex:N,itemsLength:a().length,calculatedItemHeight:i.averageHeight,height:e(v),scrollTop:i.scrollTop,firstVisibleIndex:re,lastVisibleIndex:ne,heightCache:i.getHeightCache()});if(m!==null){if(p(ue,!0),o&&i.viewportElement){const W=Math.max(0,i.viewport.scrollHeight-i.viewport.clientHeight);console.info("[SVL] scroll-intent",{targetIndex:N,align:ie||"auto",firstVisibleIndex:re,lastVisibleIndex:ne,currentScrollTop:i.scrollTop,scrollTarget:m,domMaxScrollTop:W})}if(n()==="bottomToTop"&&R){const W=i.viewport.querySelectorAll("[data-original-index]");let ce=-1,xe=null;for(const Ve of W){const Oe=parseInt(Ve.getAttribute("data-original-index")||"-1");Oe>ce&&(ce=Oe,xe=Ve)}xe?.scrollIntoView({behavior:"smooth"}),await tt(),await new Promise(Ve=>setTimeout(Ve,100)),await tt()}i.viewport.scrollTo({top:m,behavior:R?"smooth":"auto"}),requestAnimationFrame(()=>{if(i.scrollTop=m,o&&i.viewportElement){const W=Math.max(0,i.viewport.scrollHeight-i.viewport.clientHeight);console.info("[SVL] scroll-after-call",{scrollTop:i.scrollTop,domMaxScrollTop:W})}}),setTimeout(()=>{p(ue,!1)},R?500:100)}};function ke(d){return j&&j.observe(d),{destroy(){j&&j.unobserve(d)}}}var We={scrollToIndex:Ue,scroll:Le},pe=bi();ut(pe,()=>({id:"virtual-list-container",...t.testId?{"data-testid":`${t.testId}-container`}:{},class:t.containerClass??"virtual-list-container"}),void 0,void 0,"SvelteVirtualList_4xpf5r");var fe=L(pe);ut(fe,()=>({id:"virtual-list-viewport",...t.testId?{"data-testid":`${t.testId}-viewport`}:{},class:t.viewportClass??"virtual-list-viewport",onscroll:_e}),void 0,void 0,"SvelteVirtualList_4xpf5r");var Ze=L(fe);ut(Ze,d=>({id:"virtual-list-content",...t.testId?{"data-testid":`${t.testId}-content`}:{},class:t.contentClass??"virtual-list-content",[Et]:d}),[()=>({height:`${Math.max(e(v),e(Te)())??""}px`})],void 0,"SvelteVirtualList_4xpf5r");var Xe=L(Ze);return ut(Xe,d=>({id:"virtual-list-items",...t.testId?{"data-testid":`${t.testId}-items`}:{},class:t.itemsClass??"virtual-list-items",[Et]:d}),[()=>({visibility:e(v)===0&&n()==="bottomToTop"?"hidden":"visible",transform:`translateY(${(()=>{const d=e(v)||e(ae)||0,x=e(te)(),R=d===0?400:d;return Math.round(ai(n(),a().length,x.end,x.start,i.averageHeight,R,e(Te)(),i.getHeightCache(),e(ae)))})()??""}px)`})],void 0,"SvelteVirtualList_4xpf5r"),je(Xe,23,()=>e(ft)(),d=>d.originalIndex,(d,x,R)=>{var E=_i(),ie=F(E);{var N=m=>{const W=le(()=>ui(e(te)(),a().length,Object.keys(i.getHeightCache()).length,i.averageHeight,i.scrollTop,e(v)||0,e(Te)()));var ce=rt();$(xe=>Ce(ce,xe),[()=>t.debugFunction?t.debugFunction(e(W)):console.info("Virtual List Debug:",e(W))]),l(m,ce)};C(ie,m=>{u()&&e(R)===0&&hi(e(be),e(te)(),e(ye),i.averageHeight)&&m(N)})}var re=he(ie,2);ut(re,()=>({"data-original-index":e(x).originalIndex,...t.testId?{"data-testid":`${t.testId}-item-${e(x).originalIndex}`}:{}}),void 0,void 0,"SvelteVirtualList_4xpf5r");var ne=L(re);pt(ne,()=>t.renderItem,()=>e(x).item,()=>e(x).originalIndex),S(re),nt(re,(m,W)=>T[W.sliceIndex]=m,m=>T?.[m.sliceIndex],()=>[e(x)]),Zt(re,m=>ke?.(m)),l(d,E)}),S(Xe),S(Ze),S(fe),nt(fe,d=>i.viewportElement=d,()=>i?.viewportElement),S(pe),nt(pe,d=>i.containerElement=d,()=>i?.containerElement),l(_,pe),yt(We)}class pi{onRecompute;isScheduled=!1;isPending=!1;blockDepth=0;timeoutId=null;rafId=null;constructor(t){this.onRecompute=t}schedule=()=>{if(this.blockDepth>0){this.isPending=!0;return}if(this.isScheduled)return;if(this.isScheduled=!0,!(typeof window<"u"&&typeof requestAnimationFrame=="function")){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.isScheduled=!1,this.onRecompute()},0);return}this.rafId!==null&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{this.rafId=null,this.isScheduled=!1,this.onRecompute()})};block=()=>{this.blockDepth+=1,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null,this.isScheduled=!1,this.isPending=!0),this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null,this.isScheduled=!1,this.isPending=!0)};unblock=()=>{this.blockDepth!==0&&(this.blockDepth-=1,this.blockDepth===0&&this.isPending&&(this.isPending=!1,this.onRecompute()))};cancel=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.isScheduled=!1,this.isPending=!1}}class Ti{#n=k(0);get _totalMeasuredHeight(){return e(this.#n)}set _totalMeasuredHeight(t){p(this.#n,t,!0)}#a=k(0);get _measuredCount(){return e(this.#a)}set _measuredCount(t){p(this.#a,t,!0)}#s=k(0);get _itemLength(){return e(this.#s)}set _itemLength(t){p(this.#s,t,!0)}#o=k(40);get _itemHeight(){return e(this.#o)}set _itemHeight(t){p(this.#o,t,!0)}#l=k(40);get _averageHeight(){return e(this.#l)}set _averageHeight(t){p(this.#l,t,!0)}#c=k(0);get _totalHeight(){return e(this.#c)}set _totalHeight(t){p(this.#c,t,!0)}_measuredFlags=null;#d=k(!1);get _initialized(){return e(this.#d)}set _initialized(t){p(this.#d,t,!0)}#h=k(0);get _scrollTop(){return e(this.#h)}set _scrollTop(t){p(this.#h,t,!0)}#u=k(null);get _containerElement(){return e(this.#u)}set _containerElement(t){p(this.#u,t,!0)}#g=k(null);get _viewportElement(){return e(this.#g)}set _viewportElement(t){p(this.#g,t,!0)}_internalDebug=!1;#v=k(!1);get _isReady(){return e(this.#v)}set _isReady(t){p(this.#v,t,!0)}#f=k(!1);get _dynamicUpdateInProgress(){return e(this.#f)}set _dynamicUpdateInProgress(t){p(this.#f,t,!0)}#m=k(0);get _dynamicUpdateDepth(){return e(this.#m)}set _dynamicUpdateDepth(t){p(this.#m,t,!0)}#_=k(null);get _itemsWrapperElement(){return e(this.#_)}set _itemsWrapperElement(t){p(this.#_,t,!0)}#b=k(!1);get _gridDetected(){return e(this.#b)}set _gridDetected(t){p(this.#b,t,!0)}#p=k(1);get _gridColumns(){return e(this.#p)}set _gridColumns(t){p(this.#p,t,!0)}_gridObserver=null;_mutationObserver=null;_heightCache={};_scheduler=new pi(()=>this.recomputeDerivedHeights());recomputeDerivedHeights(){const t=this._measuredCount>0?this._totalMeasuredHeight/this._measuredCount:this._itemHeight;this._averageHeight=t;const r=this._itemLength-this._measuredCount;this._totalHeight=this._totalMeasuredHeight+r*t}recomputeIsReady(){this._isReady=!!this._containerElement&&!!this._viewportElement}scheduleRecomputeDerivedHeights(){const t=typeof navigator<"u"&&typeof navigator.userAgent=="string"?/jsdom/i.test(navigator.userAgent):!1;if(typeof window>"u"||t){this.recomputeDerivedHeights();return}if(this._dynamicUpdateDepth>0){this._scheduler.block();return}this._scheduler.schedule()}get totalMeasuredHeight(){return this._totalMeasuredHeight}get measuredCount(){return this._measuredCount}get itemLength(){return this._itemLength}get itemHeight(){return this._itemHeight}set itemHeight(t){this._itemHeight=t,this.scheduleRecomputeDerivedHeights()}get initialized(){return this._initialized}set initialized(t){if(this._initialized)throw new Error("ReactiveListManager: initialized flag cannot be set to true after it has been set to true");this._initialized=t}get scrollTop(){return this._scrollTop}set scrollTop(t){this._internalDebug&&this.#w(t),this._scrollTop=t}get containerElement(){return this._containerElement}get container(){if(!this._isReady)throw new Error("ReactiveListManager: container is not ready");return this._containerElement}set containerElement(t){this._containerElement=t,this.recomputeIsReady()}get viewportElement(){return this._viewportElement}get viewport(){if(!this._isReady)throw new Error("ReactiveListManager: viewport is not ready");return this._viewportElement}set viewportElement(t){this._viewportElement=t,this.recomputeIsReady()}get itemsWrapperElement(){return this._itemsWrapperElement}set itemsWrapperElement(t){if(this._itemsWrapperElement!==t){if(this._gridObserver){try{this._gridObserver.disconnect()}catch{}this._gridObserver=null}if(this._mutationObserver){try{this._mutationObserver.disconnect()}catch{}this._mutationObserver=null}}if(this._itemsWrapperElement=t,!t){this._gridDetected=!1,this._gridColumns=1;return}this.#C(),this.#y(),this.#r()}get gridDetected(){return this._gridDetected}get gridColumns(){return this._gridColumns}get isReady(){return this._isReady}get isDynamicUpdateInProgress(){return this._dynamicUpdateDepth>0}startDynamicUpdate(){const t=this._dynamicUpdateDepth===0;this._dynamicUpdateDepth+=1,t&&(this._dynamicUpdateInProgress=!0,this._isReady&&this._viewportElement&&this._viewportElement.style.setProperty("overflow-anchor","none"))}endDynamicUpdate(){this._dynamicUpdateDepth<=0||(this._dynamicUpdateDepth-=1,this._dynamicUpdateDepth===0&&(this._isReady&&this._viewportElement&&this._viewportElement.style.setProperty("overflow-anchor","auto"),this._dynamicUpdateInProgress=!1,this._scheduler.unblock()))}async runDynamicUpdate(t){this.startDynamicUpdate();try{const r=t();return r instanceof Promise?await r:r}finally{this.endDynamicUpdate()}}#T=null;#t=0;#e=0;#i=!1;#w(t){const r=typeof performance<"u"&&performance.now?performance.now():Date.now();this.#T===t?r-this.#t<=1e3?(this.#e+=1,this.#e>10&&!this.#i&&(this.#i=!0,console.warn(`
================ SvelteVirtualList DEBUG ================
scrollTop assigned same value ${t} > 10 times within 1s
count=${this.#e}, windowStart=${Math.round(this.#t)}ms
This may indicate redundant updates or feedback loops.
========================================================
`))):(this.#t=r,this.#e=1,this.#i=!1):(this.#T=t,this.#t=r,this.#e=1,this.#i=!1)}get averageHeight(){return this._averageHeight}get totalHeight(){return this._totalHeight}flushRecompute=()=>{this.recomputeDerivedHeights()};getHeightCache(){return this._heightCache}constructor(t){this._itemLength=t.itemLength,this._itemHeight=t.itemHeight,this._internalDebug=t.internalDebug??!1,this._measuredFlags=new Uint8Array(Math.max(0,this._itemLength)),this.recomputeDerivedHeights()}processDirtyHeights(t){if(t.length===0)return;let r=0,s=0;for(const a of t){const{index:c,oldHeight:u,newHeight:n}=a;u!==void 0&&(r-=u,s-=1),n!==void 0?(r+=n,s+=1,this._heightCache[c]=n):delete this._heightCache[c],this._measuredFlags&&c>=0&&c<this._measuredFlags.length&&(this._measuredFlags[c]=1)}const h=typeof navigator<"u"&&typeof navigator.userAgent=="string"?/jsdom/i.test(navigator.userAgent):!1;if(typeof window>"u"||h){if(r===0&&s===0)return}else if(s===0)return;this._totalMeasuredHeight+=r,this._measuredCount+=s,this.scheduleRecomputeDerivedHeights()}updateItemLength(t){this._itemLength=t,this._measuredFlags=new Uint8Array(Math.max(0,t)),this.recomputeDerivedHeights()}updateEstimatedHeight(t){this._itemHeight=t,this.scheduleRecomputeDerivedHeights()}setMeasuredHeight(t,r){if(t<0||t>=this._itemLength)return;const s=this._heightCache[t];Number.isFinite(s)&&s>0?this._totalMeasuredHeight-=s:this._measuredCount+=1,Number.isFinite(r)&&r>0&&(this._heightCache[t]=r,this._totalMeasuredHeight+=r,this.scheduleRecomputeDerivedHeights())}reset(){this._totalMeasuredHeight=0,this._measuredCount=0,this._measuredFlags=this._itemLength>0?new Uint8Array(this._itemLength):null,this.scheduleRecomputeDerivedHeights()}getDebugInfo(){return{totalMeasuredHeight:this._totalMeasuredHeight,measuredCount:this._measuredCount,itemLength:this._itemLength,coveragePercent:this._itemLength>0?this._measuredCount/this._itemLength*100:0,itemHeight:this._itemHeight,averageHeight:this.averageHeight,totalHeight:this.totalHeight,gridDetected:this._gridDetected,gridColumns:this._gridColumns}}getMeasurementCoverage(){return this.getDebugInfo().coveragePercent}hasSufficientMeasurements(t=10){return this.getMeasurementCoverage()>=t}recomputeGridDetection(){this.#r()}#C(){const t=this._itemsWrapperElement;if(!(typeof window>"u"||!t))try{this._gridObserver=new ResizeObserver(()=>{this.#r()}),this._gridObserver.observe(t)}catch{this._gridObserver=null}}#y(){const t=this._itemsWrapperElement;if(!(typeof window>"u"||!t))try{this._mutationObserver=new MutationObserver(r=>{for(const s of r)if(s.type==="attributes"&&(s.attributeName==="class"||s.attributeName==="style")){this.#r();break}}),this._mutationObserver.observe(t,{attributes:!0,attributeFilter:["class","style"]})}catch{this._mutationObserver=null}}#r(){const t=this._itemsWrapperElement;if(!t){this._gridDetected=!1,this._gridColumns=1;return}let r=!1,s=1;try{const h=getComputedStyle(t);if(h.display==="grid"){const o=h.gridTemplateColumns,a=/repeat\(\s*(\d+)\s*,/i.exec(o);if(a&&a[1])s=Math.max(1,parseInt(a[1],10)),r=!0;else if(o&&o!=="none"){const c=this.#x(o);Number.isFinite(c)&&c>0&&(s=c,r=!0)}}}catch{}if(!r){const h=t.children;if(h&&h.length>0){const o=h[0].getBoundingClientRect().top;let a=0;for(let c=0;c<h.length;c+=1){const u=h[c].getBoundingClientRect().top;if(Math.abs(u-o)<=1)a+=1;else break}a>0&&(s=a,r=a>1)}}this._gridDetected=r,this._gridColumns=Math.max(1,s),this._internalDebug&&console.info("[ReactiveListManager] grid detection:",{detected:this._gridDetected,columns:this._gridColumns})}#x(t){let r=0,s=0,h=!1;for(let o=0;o<t.length;o+=1){const a=t[o];a==="("?r+=1:a===")"&&(r=Math.max(0,r-1)),r===0&&/\s/.test(a)?h&&(s+=1,h=!1):a!==" "&&(h=!0)}return h&&(s+=1),s}}var wi=P('<i class="icon-attention c-red"></i>'),Ci=P('<input class="CellSelector_q11x5x"/>'),yi=P('<div class="_3 min-h-28 px-8 py-4 flex items-center CellSelector_q11x5x" role="button" tabindex="0"> </div>'),xi=P('<div class="h-200 w-400 p-4 _4 overflow-auto CellSelector_q11x5x"><!></div>'),Si=P('<div class="_2 CellSelector_q11x5x"> </div> <div class="_1 CellSelector_q11x5x" role="button" tabindex="0"><div> <!></div> <!> <!></div>',1);function Hi(_,t){Ct(t,!0);let r=He(t,"saveOn",7),s=le(()=>bt.popoverShowID===t.id),h=k(null),o=k(null),a=k(""),c=k(null),u=!1;const n=()=>{if(_t.has(t.options))return;const i=new Map,ve=new Map;for(const K of t.options)i.set(K[t.keyId],K),ve.set(K[t.keyName].toLowerCase(),K);_t.set(t.options,{idToRecord:i,valueToRecord:ve})};n();let g=le(()=>(console.log("filtrando valores::",e(a)),e(a)?t.options.filter(i=>String(i[t.keyName]||"").toLowerCase().includes(e(a))):t.options));const T=i=>{const ve=_t.get(t.options)?.valueToRecord||new Map;p(c,ve.get(String(i.value||"").toLowerCase()),!0),e(c)?i.value=e(c)[t.keyName]:i.value="",r()&&t.save&&(e(c)?r()[t.save]=e(c)[t.keyId]:delete r()[t.save])},v=i=>{console.log("selected",i),p(c,i,!0),e(o)&&(e(o).value=i[t.keyName]),r()&&t.save&&(r()[t.save]=i[t.keyId]),bt.popoverShowID=0};De(()=>{(e(c)||!e(c))&&console.log("selected 2",e(c))});const H=le(()=>t.render?t.render(e(c),e(s)):e(c)?.[t.keyName]||""),f=()=>{p(a,""),bt.popoverShowID=t.id};De(()=>{e(s)&&e(o)&&(e(c)&&(e(o).value=e(c)[t.keyName]),e(o).focus())}),De(()=>{r()&&t.save&&(n(),wt(()=>{const i=_t.get(t.options)?.idToRecord||new Map;p(c,r()[t.save]?i.get(r()[t.save]):null,!0),console.log("selected 3",e(c)),e(c)?e(o)&&(e(o).value=e(c)[t.keyName]):e(o)&&(e(o).value="")}))});var y=Si(),B=F(y),D=L(B,!0);S(B);var M=he(B,2);M.__keydown=i=>{(i.key==="Enter"||i.key===" ")&&i.preventDefault()},M.__click=i=>{i.stopPropagation(),f()};var j=L(M);let A;var I=L(j),ae=he(I);{var be=i=>{var ve=wi();l(i,ve)};C(ae,i=>{!e(c)&&t.required&&i(be)})}S(j);var ye=he(j,2);{var Je=i=>{var ve=Ci();ve.__keyup=K=>{const Ae=(K.target.value||"").trim();jt(()=>{p(a,String(Ae||"").toLowerCase(),!0)},200)},nt(ve,K=>p(o,K),()=>e(o)),$(K=>gt(ve,"id",K),[()=>String(t.id)]),Ht("focus",ve,()=>{}),Ht("blur",ve,K=>{if(u){u=!1;return}T(K.target),bt.popoverShowID=0,p(a,"")}),l(i,ve)};C(ye,i=>{e(s)&&i(Je)})}var q=he(ye,2);Jt(q,{get referenceElement(){return e(h)},get open(){return e(s)},placement:"bottom",children:(i,ve)=>{var K=xi(),Ae=L(K);Bt(Ae,{get items(){return e(g)},renderItem:(w,U=Tt)=>{var ee=yi();ee.__click=ue=>{ue.stopPropagation(),v(U())},ee.__mousedown=()=>{u=!0},ee.__keydown=ue=>{(ue.key==="Enter"||ue.key===" ")&&(ue.preventDefault(),v(U()))};var Q=L(ee,!0);S(ee),$(()=>Ce(Q,U()[t.keyName])),l(w,ee)},$$slots:{renderItem:!0}}),S(K),l(i,K)},$$slots:{default:!0}}),S(M),nt(M,i=>p(h,i),()=>e(h)),$(()=>{Ce(D,e(H)),Se(j,1,t.contentClass,"CellSelector_q11x5x"),A=Ye(j,"",A,{visibility:e(s)?"hidden":"visible"}),Ce(I,`${e(H)??""} `)}),l(_,y),yt()}xt(["keydown","click","keyup","mousedown"]);var Mi=P('<div class="mobile-empty-message vTable_1r3tbgn"> </div>'),Ii=P("<i></i>"),Ei=P('<span class="mobile-card-label-left vTable_1r3tbgn"> </span>'),Di=P('<div class="mobile-card-left vTable_1r3tbgn"><!></div>'),Ri=P('<div class="mobile-card-right vTable_1r3tbgn"><!></div>'),Li=P('<div><div class="mobile-card-label-top vTable_1r3tbgn"> </div> <div class="mobile-card-content-wrapper vTable_1r3tbgn"><!> <!> <!> <div class="mobile-card-content vTable_1r3tbgn"><!></div> <!></div></div>'),ki=P("<i></i>"),Bi=P('<span class="mobile-card-label-left vTable_1r3tbgn"> </span>'),zi=P('<div class="mobile-card-left vTable_1r3tbgn"><!></div>'),Ai=P('<div class="mobile-card-right vTable_1r3tbgn"><!></div>'),Vi=P('<div><!> <!> <!> <div class="mobile-card-content vTable_1r3tbgn"><!></div> <!></div>'),Oi=P('<div role="button" tabindex="0"><div class="mobile-card-grid vTable_1r3tbgn"></div></div>'),Fi=P('<div class="mobile-card-container vTable_1r3tbgn"><!></div>'),Ui=P('<th><div class="vTable_1r3tbgn"> </div></th>'),Ni=P('<th><div class="vTable_1r3tbgn"> </div></th>'),Pi=P('<tr class="vtable-header-row vtable-header-row-sub vTable_1r3tbgn"></tr>'),qi=P('<tr><td class="vtable-empty vTable_1r3tbgn"><div class="vtable-empty-message vTable_1r3tbgn"> </div></td></tr>'),ji=P("<span> </span>"),Wi=P('<button class="_11 _e vTable_1r3tbgn" title="edit"><i class="icon-pencil"></i></button>'),Gi=P('<button class="_11 _d vTable_1r3tbgn" title="delete"><i class="icon-trash"></i></button>'),Yi=P('<div class="flex gap-4 items-center justify-center vTable_1r3tbgn"><!> <!></div>'),Ji=P("<td><!> <!></td>"),Zi=P('<tr><td style="border: none;"></td></tr>'),Ki=P("<tr></tr> <!>",1),Qi=P('<table><thead class="vtable-header vTable_1r3tbgn"><tr class="vtable-header-row vTable_1r3tbgn"></tr><!></thead><tbody class="vtable-body vTable_1r3tbgn"><!></tbody></table>'),Xi=P("<div><!></div>");function fr(_,t){Ct(t,!0);let r=He(t,"maxHeight",3,"calc(100vh - 8rem)"),s=He(t,"css",3,""),h=He(t,"tableCss",3,""),o=He(t,"estimateSize",3,34),a=He(t,"overscan",3,15),c=He(t,"emptyMessage",3,"No se encontraron registros."),u=He(t,"useFilterCache",3,!1),n=He(t,"mobileCardCss",3,""),g=k(void 0),T=k(vt([])),v=k(0),H=null,f=!1,y=k(0);const B=new WeakMap;let D=k(vt(typeof window<"u"?window.innerWidth:1024));De(()=>{const w=()=>{p(D,window.innerWidth,!0)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)});const M=le(()=>{const w=[],U=[],ee=[];for(const Q of t.columns){const ue={...Q};if(ue._colspan=Q.subcols?.length||0,w.push(ue),Q.subcols&&Q.subcols.length>0)for(const Re of Q.subcols)U.push(Re),ee.push(Re);else ee.push(ue)}return{level1:w,level2:U,flatColumns:ee,hasSubcols:U.length>0}}),j=le(()=>e(M).flatColumns.filter(w=>w.mobile).sort((w,U)=>(w.mobile?.order||0)-(U.mobile?.order||0))),A=le(()=>e(D)<580&&e(j).length>0),I=le(()=>(t.filterText||"").toLowerCase().split(" ").filter(w=>w.length>1)),ae=le(()=>{if(console.log("filterText",t.filterText),t.filterText&&t.getFilterContent){const w=t.data.filter(U=>{let ee="";if(u()&&typeof U=="object"&&U!==null){const Q=B.get(U);Q?ee=Q:(ee=t.getFilterContent(U).toLowerCase(),B.set(U,ee))}else ee=t.getFilterContent(U).toLowerCase();return Wt(ee,e(I))});return console.log("data filtrada::",w),w}else return t.data});De(()=>{(t.selected||!t.selected)&&console.log("selected::",t.selected)}),De(()=>{if(!e(A)&&e(g)&&!H){H=Kt({count:0,getScrollElement:()=>e(g),estimateSize:()=>o(),overscan:a(),getCount:()=>e(ae).length});const w=()=>{if(!H)return;const ee=H.getVirtualItems(),Q=H.getTotalSize();p(T,[...ee],!0),p(v,Q,!0)},U=H.subscribe(w);return requestAnimationFrame(()=>{w(),f=!0}),()=>{f=!1,H=null,U()}}}),De(()=>{e(ae),e(ae).length,f&&H&&wt(()=>{Nt(y),H.refresh();const w=H.getVirtualItems(),U=H.getTotalSize();p(T,[...w],!0),p(v,U,!0)})});function be(w,U,ee){const Q={};if(w.render){const ue=w.render(U,ee);typeof ue=="string"?Q.contentHTML=ue:ue&&(Q.contentAST=ue)}return w.getValue&&(Q.content=w.getValue(U,ee)),t.cellRenderer&&w.id&&(Q.useSnippet=!0),Q.css=typeof w.cellCss=="string"?w.cellCss:w.onCellEdit?"relative":"px-8 py-4",w.css&&(Q.css+=" "+w.css),Q}function ye(w){return typeof w.header=="function"?w.header():w.header}function Je(w,U){return!t.selected||!t.isSelected?!1:t.isSelected(w,t.selected)}function q(w,U){t.onRowClick&&t.onRowClick(w,U)}var i=Xi();let ve;var K=L(i);{var Ae=w=>{var U=Fi(),ee=L(U);{var Q=Re=>{var Be=Mi(),Te=L(Be,!0);S(Be),$(()=>Ce(Te,c())),l(Re,Be)},ue=Re=>{Bt(Re,{get items(){return e(ae)},renderItem:(Te,Ie=Tt,Me=Tt)=>{var se=Oi();se.__click=()=>q(Ie(),Me()),se.__keydown=te=>{(te.key==="Enter"||te.key===" ")&&q(Ie(),Me())};var ge=L(se);je(ge,21,()=>e(j),it,(te,_e)=>{const b=le(()=>e(_e).mobile),Ue=le(()=>!e(b)?.if||e(b).if(Ie(),Me()));var Le=G(),ke=F(Le);{var We=pe=>{const fe=le(()=>be(e(_e),Ie(),Me()));var Ze=G(),Xe=F(Ze);{var d=R=>{var E=Li(),ie=L(E),N=L(ie,!0);S(ie);var re=he(ie,2),ne=L(re);{var m=J=>{var Z=Ii();$(()=>Se(Z,1,`icon-${e(b).icon??""} ${(e(b)?.iconCss||"")??""}`,"vTable_1r3tbgn")),l(J,Z)};C(ne,J=>{e(b)?.icon&&J(m)})}var W=he(ne,2);{var ce=J=>{var Z=Ei(),z=L(Z,!0);S(Z),$(()=>Ce(z,e(b).labelLeft)),l(J,Z)};C(W,J=>{e(b)?.labelLeft&&J(ce)})}var xe=he(W,2);{var Ve=J=>{var Z=Di(),z=L(Z);{var O=X=>{var me=G(),de=F(me);Ge(de,()=>e(b).elementLeft),l(X,me)},oe=X=>{qe(X,{get elements(){return e(b).elementLeft}})};C(z,X=>{typeof e(b).elementLeft=="string"?X(O):X(oe,!1)})}S(Z),l(J,Z)};C(xe,J=>{e(b)?.elementLeft&&J(Ve)})}var Oe=he(xe,2),ot=L(Oe);{var lt=J=>{const Z=le(()=>e(b).render(Ie(),Me()));var z=G(),O=F(z);{var oe=me=>{var de=G(),ze=F(de);Ge(ze,()=>e(Z)),l(me,de)},X=me=>{qe(me,{get elements(){return e(Z)}})};C(O,me=>{typeof e(Z)=="string"?me(oe):me(X,!1)})}l(J,z)},V=J=>{var Z=G(),z=F(Z);{var O=X=>{var me=G(),de=F(me);pt(de,()=>t.cellRenderer,Ie,()=>e(_e),()=>e(fe).content,Me),l(X,me)},oe=X=>{var me=G(),de=F(me);{var ze=Ne=>{qe(Ne,{get elements(){return e(fe).contentAST}})},$e=Ne=>{var at=G(),Ee=F(at);{var Pe=Ke=>{var et=G(),Qe=F(et);Ge(Qe,()=>e(fe).contentHTML),l(Ke,et)},ct=Ke=>{var et=rt();$(()=>Ce(et,e(fe).content)),l(Ke,et)};C(Ee,Ke=>{e(fe).contentHTML?Ke(Pe):Ke(ct,!1)},!0)}l(Ne,at)};C(de,Ne=>{e(fe).contentAST?Ne(ze):Ne($e,!1)},!0)}l(X,me)};C(z,X=>{e(fe).useSnippet&&t.cellRenderer?X(O):X(oe,!1)},!0)}l(J,Z)};C(ot,J=>{e(b)?.render?J(lt):J(V,!1)})}S(Oe);var Y=he(Oe,2);{var we=J=>{var Z=Ri(),z=L(Z);{var O=X=>{var me=G(),de=F(me);Ge(de,()=>e(b).elementRight),l(X,me)},oe=X=>{qe(X,{get elements(){return e(b).elementRight}})};C(z,X=>{typeof e(b).elementRight=="string"?X(O):X(oe,!1)})}S(Z),l(J,Z)};C(Y,J=>{e(b)?.elementRight&&J(we)})}S(re),S(E),$(()=>{Se(E,1,`mobile-card-item mobile-card-item-vertical ${(e(b)?.css||"col-span-full")??""}`,"vTable_1r3tbgn"),Ce(N,e(b).labelTop)}),l(R,E)},x=R=>{var E=Vi(),ie=L(E);{var N=V=>{var Y=ki();$(()=>Se(Y,1,`icon-${e(b).icon??""} ${(e(b)?.iconCss||"")??""}`,"vTable_1r3tbgn")),l(V,Y)};C(ie,V=>{e(b)?.icon&&V(N)})}var re=he(ie,2);{var ne=V=>{var Y=Bi(),we=L(Y,!0);S(Y),$(()=>Ce(we,e(b).labelLeft)),l(V,Y)};C(re,V=>{e(b)?.labelLeft&&V(ne)})}var m=he(re,2);{var W=V=>{var Y=zi(),we=L(Y);{var J=z=>{var O=G(),oe=F(O);Ge(oe,()=>e(b).elementLeft),l(z,O)},Z=z=>{qe(z,{get elements(){return e(b).elementLeft}})};C(we,z=>{typeof e(b).elementLeft=="string"?z(J):z(Z,!1)})}S(Y),l(V,Y)};C(m,V=>{e(b)?.elementLeft&&V(W)})}var ce=he(m,2),xe=L(ce);{var Ve=V=>{const Y=le(()=>e(b).render(Ie(),Me()));var we=G(),J=F(we);{var Z=O=>{var oe=G(),X=F(oe);Ge(X,()=>e(Y)),l(O,oe)},z=O=>{qe(O,{get elements(){return e(Y)}})};C(J,O=>{typeof e(Y)=="string"?O(Z):O(z,!1)})}l(V,we)},Oe=V=>{var Y=G(),we=F(Y);{var J=z=>{var O=G(),oe=F(O);pt(oe,()=>t.cellRenderer,Ie,()=>e(_e),()=>e(fe).content,Me),l(z,O)},Z=z=>{var O=G(),oe=F(O);{var X=de=>{qe(de,{get elements(){return e(fe).contentAST}})},me=de=>{var ze=G(),$e=F(ze);{var Ne=Ee=>{var Pe=G(),ct=F(Pe);Ge(ct,()=>e(fe).contentHTML),l(Ee,Pe)},at=Ee=>{var Pe=rt();$(()=>Ce(Pe,e(fe).content)),l(Ee,Pe)};C($e,Ee=>{e(fe).contentHTML?Ee(Ne):Ee(at,!1)},!0)}l(de,ze)};C(oe,de=>{e(fe).contentAST?de(X):de(me,!1)},!0)}l(z,O)};C(we,z=>{e(fe).useSnippet&&t.cellRenderer?z(J):z(Z,!1)},!0)}l(V,Y)};C(xe,V=>{e(b)?.render?V(Ve):V(Oe,!1)})}S(ce);var ot=he(ce,2);{var lt=V=>{var Y=Ai(),we=L(Y);{var J=z=>{var O=G(),oe=F(O);Ge(oe,()=>e(b).elementRight),l(z,O)},Z=z=>{qe(z,{get elements(){return e(b).elementRight}})};C(we,z=>{typeof e(b).elementRight=="string"?z(J):z(Z,!1)})}S(Y),l(V,Y)};C(ot,V=>{e(b)?.elementRight&&V(lt)})}S(E),$(()=>Se(E,1,`mobile-card-item ${(e(b)?.css||"col-span-full")??""}`,"vTable_1r3tbgn")),l(R,E)};C(Xe,R=>{e(b)?.labelTop?R(d):R(x,!1)})}l(pe,Ze)};C(ke,pe=>{e(Ue)&&pe(We)})}l(te,Le)}),S(ge),S(se),$(()=>Se(se,1,`mobile-card mb-6 ${(n()||"")??""}`,"vTable_1r3tbgn")),l(Te,se)},$$slots:{renderItem:!0}})};C(ee,Re=>{e(ae).length===0?Re(Q):Re(ue,!1)})}S(U),$(()=>Ye(U,`height: ${r()??""};`)),l(w,U)},ft=w=>{var U=Qi(),ee=L(U),Q=L(ee);je(Q,21,()=>e(M).level1,it,(se,ge)=>{var te=Ui();let _e;var b=L(te),Ue=L(b,!0);S(b),S(te),$((Le,ke)=>{_e=Se(te,1,`vtable-header-cell ${(e(ge).headerCss||"")??""}`,"vTable_1r3tbgn",_e,{hsc:(e(ge).subcols||[]).length>0}),Ye(te,Le),gt(te,"colspan",e(ge)._colspan||1),gt(te,"rowspan",e(ge)._colspan?1:e(M).hasSubcols?2:1),Ce(Ue,ke)},[()=>e(ge).headerStyle?Object.entries(e(ge).headerStyle).map(([Le,ke])=>`${Le}: ${ke}`).join("; "):"",()=>ye(e(ge))]),l(se,te)}),S(Q);var ue=he(Q);{var Re=se=>{var ge=Pi();je(ge,21,()=>e(M).level2,it,(te,_e)=>{var b=Ni(),Ue=L(b),Le=L(Ue,!0);S(Ue),S(b),$((ke,We)=>{Se(b,1,`vtable-header-cell ${(e(_e).headerCss||"")??""}`,"vTable_1r3tbgn"),Ye(b,ke),Ce(Le,We)},[()=>e(_e).headerStyle?Object.entries(e(_e).headerStyle).map(([ke,We])=>`${ke}: ${We}`).join("; "):"",()=>ye(e(_e))]),l(te,b)}),S(ge),l(se,ge)};C(ue,se=>{e(M).hasSubcols&&se(Re)})}S(ee);var Be=he(ee),Te=L(Be);{var Ie=se=>{var ge=qi(),te=L(ge),_e=L(te),b=L(_e,!0);S(_e),S(te),S(ge),$(()=>{gt(te,"colspan",e(M).flatColumns.length),Ce(b,c())}),l(se,ge)},Me=se=>{var ge=G(),te=F(ge);je(te,19,()=>e(T),_e=>`${_e.index}-${e(y)}`,(_e,b,Ue)=>{const Le=le(()=>e(T)[0]?.start||0),ke=le(()=>e(Ue)===e(T).length-1),We=le(()=>e(v)-(e(T)[0]?.size||o())*e(T).length),pe=le(()=>e(ae)[e(b).index]);var fe=G(),Ze=F(fe);{var Xe=d=>{const x=le(()=>Je(e(pe),e(b).index));var R=Ki(),E=F(R);let ie;E.__click=()=>q(e(pe),e(b).index),je(E,23,()=>e(M).flatColumns,(ne,m)=>`${m}_${t.filterText||""}`,(ne,m)=>{const W=le(()=>be(e(m),e(pe),e(b).index));var ce=Ji();ce.__click=V=>{e(m).onCellEdit&&V.stopPropagation()};var xe=L(ce);{var Ve=V=>{{let Y=le(()=>e(m).render?()=>e(m).render?.(e(pe),e(b).index):void 0);ii(V,{get contentClass(){return e(m).css},get inputClass(){return e(m).inputCss},getValue:()=>e(W).content,get render(){return e(Y)},onChange:we=>{e(m).onCellEdit?.(e(pe),we)}})}},Oe=V=>{var Y=G(),we=F(Y);{var J=z=>{Hi(z,{get options(){return e(m).cellOptions},keyId:"",keyName:"",onChange:O=>{e(m).onCellSelect?.(e(pe),O)}})},Z=z=>{var O=G(),oe=F(O);{var X=de=>{var ze=G(),$e=F(ze);pt($e,()=>t.cellRenderer,()=>e(pe),()=>e(m),()=>e(W).content,()=>e(b).index),l(de,ze)},me=de=>{var ze=G(),$e=F(ze);{var Ne=Ee=>{qe(Ee,{get elements(){return e(W).contentAST}})},at=Ee=>{var Pe=G(),ct=F(Pe);{var Ke=Qe=>{var dt=G(),St=F(dt);Ge(St,()=>e(W).contentHTML),l(Qe,dt)},et=Qe=>{var dt=G(),St=F(dt);{var zt=st=>{var ht=G(),Vt=F(ht);je(Vt,17,()=>Gt(e(W).content,e(I)),it,(Ot,Mt)=>{var mt=ji();let It;var Ft=L(mt,!0);S(mt),$(()=>{It=Se(mt,1,"vTable_1r3tbgn",null,It,{_2:e(Mt).highl}),Ce(Ft,e(Mt).text)}),l(Ot,mt)}),l(st,ht)},At=st=>{var ht=rt();$(()=>Ce(ht,e(W).content)),l(st,ht)};C(St,st=>{t.filterText&&e(m).highlight?st(zt):st(At,!1)})}l(Qe,dt)};C(ct,Qe=>{e(W).contentHTML?Qe(Ke):Qe(et,!1)},!0)}l(Ee,Pe)};C($e,Ee=>{e(W).contentAST?Ee(Ne):Ee(at,!1)},!0)}l(de,ze)};C(oe,de=>{e(W).useSnippet&&t.cellRenderer?de(X):de(me,!1)},!0)}l(z,O)};C(we,z=>{e(m).onCellSelect?z(J):z(Z,!1)},!0)}l(V,Y)};C(xe,V=>{e(m).onCellEdit?V(Ve):V(Oe,!1)})}var ot=he(xe,2);{var lt=V=>{var Y=Yi(),we=L(Y);{var J=O=>{var oe=Wi();oe.__click=X=>{X.stopPropagation(),e(m).buttonEditHandler?.(e(pe))},l(O,oe)};C(we,O=>{e(m).buttonEditHandler&&O(J)})}var Z=he(we,2);{var z=O=>{var oe=Gi();oe.__click=X=>{X.stopPropagation(),e(m).buttonDeleteHandler?.(e(pe))},l(O,oe)};C(Z,O=>{e(m).buttonDeleteHandler&&O(z)})}S(Y),l(V,Y)};C(ot,V=>{(e(m).buttonEditHandler||e(m).buttonDeleteHandler)&&V(lt)})}S(ce),$(V=>{Se(ce,1,e(W).css,"vTable_1r3tbgn"),Ye(ce,V)},[()=>e(m).cellStyle?Object.entries(e(m).cellStyle).map(([V,Y])=>`${V}: ${Y}`).join("; "):""]),l(ne,ce)}),S(E);var N=he(E,2);{var re=ne=>{var m=Zi();$(()=>Ye(m,`height: ${e(We)??""}px; visibility: hidden;`)),l(ne,m)};C(N,ne=>{e(ke)&&ne(re)})}$(()=>{ie=Se(E,1,"vtable-row vTable_1r3tbgn",null,ie,{"vtable-row-even":e(b).index%2===0,"vtable-row-odd":e(b).index%2!==0,"vtable-row-selected":e(x)}),Ye(E,`transform: translateY(${e(Le)??""}px);`)}),l(d,R)};C(Ze,d=>{e(pe)&&d(Xe)})}l(_e,fe)}),l(se,ge)};C(Te,se=>{e(ae).length===0?se(Ie):se(Me,!1)})}S(Be),S(U),$(()=>Se(U,1,`vtable ${h()??""}`,"vTable_1r3tbgn")),l(w,U)};C(K,w=>{e(A)?w(Ae):w(ft,!1)})}S(i),nt(i,w=>p(g,w),()=>e(g)),$(()=>{ve=Se(i,1,`vtable-container ${s()??""}`,"vTable_1r3tbgn",ve,{_14:e(A)}),Ye(i,`max-height: ${r()??""}; overflow: ${e(A)?"hidden":"auto"};`)}),l(_,i),yt()}xt(["click","keydown"]);export{Bt as S,fr as V};
