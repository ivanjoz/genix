import"./DsnmJJEf.js";import{a6 as fe,aK as ve,aL as de,aM as Y,R as w,at as ue,y as Z,m as q,a9 as B,aN as ce,p as oe,e as W,g as _e,l as j,i as b,f as S,c as N,s as h,r as O,t as x,b as k,d as me,h as g,a as z,aO as be,x as he,u as ye}from"./DsnVzSLI.js";import{s as G}from"./00GtM8hT.js";import{i as I}from"./tZVUs-sg.js";import{h as H}from"./trZv5SJJ.js";import{s as o,c as C,b as E,r as ke}from"./Dfx1yjcr.js";import{d as ge,e as Q}from"./BzG9rrjb.js";import{p as xe}from"./Dgo9tfmS.js";import{s as _}from"./BMRmn4k7.js";const Ce=[];function Se(e,a=!1,n=!1){return D(e,new Map,"",Ce,null,n)}function D(e,a,n,v,f=null,i=!1){if(typeof e=="object"&&e!==null){var c=a.get(e);if(c!==void 0)return c;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(fe(e)){var l=Array(e.length);a.set(e,l),f!==null&&a.set(f,l);for(var u=0;u<e.length;u+=1){var m=e[u];u in e&&(l[u]=D(m,a,n,v,null,i))}return l}if(ve(e)===de){l={},a.set(e,l),f!==null&&a.set(f,l);for(var V in e)l[V]=D(e[V],a,n,v,null,i);return l}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!i)return D(e.toJSON(),a,n,v,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function X(e,a,n=a){var v=new WeakSet;Y(e,"input",async f=>{var i=f?e.defaultValue:e.value;if(i=K(e)?T(i):i,n(i),w!==null&&v.add(w),await ue(),i!==(i=a())){var c=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=i??"",l!==null){var m=e.value.length;c===l&&l===u&&m>u?(e.selectionStart=m,e.selectionEnd=m):(e.selectionStart=c,e.selectionEnd=Math.min(l,m))}}}),(Z&&e.defaultValue!==e.value||q(a)==null&&e.value)&&(n(K(e)?T(e.value):e.value),w!==null&&v.add(w)),B(()=>{var f=a();if(e===document.activeElement){var i=ce??w;if(v.has(i))return}K(e)&&f===T(e.value)||e.type==="date"&&!f&&!e.value||f!==e.value&&(e.value=f??"")})}function Pe(e,a,n=a){Y(e,"change",v=>{var f=v?e.defaultChecked:e.checked;n(f)}),(Z&&e.defaultChecked!==e.checked||q(a)==null)&&n(e.checked),B(()=>{var v=a();e.checked=!!v})}function K(e){var a=e.type;return a==="number"||a==="range"}function T(e){return e===""?null:+e}var Ve=S("<div><div></div></div> <div> <!></div> <div><div></div></div> <div><div></div></div>",1),we=S("<div><div></div></div>"),Ie=S("<textarea></textarea>"),Me=S("<input/>"),Ne=S("<div> </div>"),Oe=S("<div><!> <div><!> <!> <!> <!></div></div>");function Re(e,a){oe(a,!0);const n=xe(a,"saveOn",15),v=a.baseDecimals?10**a.baseDecimals:0,f=()=>{if(!a.required||a.disabled)return 0;if(!n()||!a.save)return 1;const r=n()[a.save];let t=!a.required;return a.validator?t=a.validator(r):(r||r===0)&&(t=!0),t?2:1};let i=W(""),c=W(_e(f())),l=0;const u=(r,t)=>{r.stopPropagation();let d=r.target.value;if(a.type==="number"){if(!t&&!d&&r.key==="-")return;isNaN(d)?d=void 0:d=parseFloat(d)}a.transform&&t&&(d=a.transform(d)),q(()=>{if(n()&&a.save){let y=d;v&&typeof y=="number"&&(y=Math.round(y*v)),n(n()[a.save]=y,!0),g(c,f(),!0)}}),t||(l=1),g(i,d,!0)},m=()=>{if(b(c)){if(b(c)===2)return'<i class="v-icon icon-ok c-green"></i>';if(b(c)===1)return'<i class="v-icon icon-attention c-red"></i>'}else return null;return null};let V;const A=()=>{q(()=>{const r=n()[a.save];g(i,typeof r=="number"?r:r||"",!0),v&&typeof b(i)=="number"&&g(i,b(i)/v),g(c,f(),!0)})};j(()=>{!n()||!a.save||V!==n()&&(V=n(),n()[a.save]!==b(i)&&A())}),j(()=>{a.dependencyValue&&A()});let p=ye(()=>`${_.input} p-rel${a.css?` ${a.css}`:""}${a.label?"":" no-label"}`);var M=Oe(),F=N(M);{var $=r=>{var t=Ve(),s=z(t),d=h(s,2),y=N(d,!0),le=h(y);H(le,()=>m()||""),O(d);var U=h(d,2),se=h(U,2);x(()=>{o(s,1,C(_.input_lab_cell_left)),o(d,1,C(_.input_lab)),G(y,a.label),o(U,1,C(_.input_lab_cell_right)),o(se,1,C(_.input_shadow_layer))}),k(r,t)};I(F,r=>{a.label&&r($)})}var J=h(F,2),L=N(J);{var ee=r=>{var t=we();x(()=>o(t,1,C(_.input_div_1))),k(r,t)};I(L,r=>{a.label&&r(ee)})}var P=h(L,2);{var ae=r=>{var t=Ie();be(t),t.__keyup=s=>{u(s)},x(()=>{o(t,1,`w-full ${_.input_inp} ${a.inputCss||""}`),E(t,"placeholder",a.placeholder||""),t.disabled=a.disabled,E(t,"rows",a.rows)}),Q("blur",t,s=>{console.log("input saveon:",Se(n())),u(s,!0),a.onChange&&l&&(a.onChange(),l=0)}),X(t,()=>b(i),s=>g(i,s)),k(r,t)},te=r=>{var t=Me();ke(t),t.__keyup=s=>{u(s)},x(()=>{o(t,1,`w-full ${_.input_inp} ${(a.inputCss||"")??""}`),E(t,"type",a.type||"search"),E(t,"placeholder",a.placeholder||""),t.disabled=a.disabled}),Q("blur",t,s=>{u(s,!0),a.onChange&&l&&(a.onChange(),l=0)}),X(t,()=>b(i),s=>g(i,s)),k(r,t)};I(P,r=>{a.useTextArea?r(ae):r(te,!1)})}var R=h(P,2);{var re=r=>{var t=he(),s=z(t);H(s,()=>m()||""),k(r,t)};I(R,r=>{a.label||r(re)})}var ie=h(R,2);{var ne=r=>{var t=Ne(),s=N(t,!0);O(t),x(()=>{o(t,1,_.input_post_value),G(s,a.postValue)}),k(r,t)};I(ie,r=>{a.postValue&&r(ne)})}O(J),O(M),x(()=>{o(M,1,C(b(p))),o(J,1,`${_.input_div} flex w-full`)}),k(e,M),me()}ge(["keyup"]);export{Re as I,Pe as b,Se as s};
