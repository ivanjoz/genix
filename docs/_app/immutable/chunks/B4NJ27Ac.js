import"./DsnmJJEf.js";import{p as H,l as z,i as n,e as k,h as L,f as N,c as C,r as R,b as S,d as T,aA as U,g as B,D as O,x as j,a as A,s as D,t as F,u as G}from"./Bf0lWsRu.js";import{s as W}from"./Csa_d837.js";import{i as q}from"./D7jGWfSg.js";import{b as I,a as J}from"./BWVkWQLM.js";import{s as V,c as K}from"./C7iUW-It.js";import{b as X}from"./CPRIj_W5.js";import{p as b}from"./DEnCy23-.js";import{a as Q}from"./DP6SISrU.js";import{a as Z}from"./CZSWOYhl.js";var $=N('<div style="position: absolute; top: 0; left: 0; z-index: 300;"><!></div>');function tt(x,o){H(o,!0);let p=b(o,"target",3,void 0),t=k(null),u=k(null);z(()=>{if(!n(t))return;const i=p()||document.body;return L(u,i,!0),i.appendChild(n(t)),()=>{n(t)&&n(t).parentNode&&n(t).parentNode.removeChild(n(t))}});var w=$(),e=C(w);W(e,()=>o.children??U),R(w),X(w,i=>L(t,i),()=>n(t)),S(x,w),T()}function et(x,o,p={}){const{offset:t=8,preferredPlacement:u="bottom",fitViewport:w=!0}=p,e=x.getBoundingClientRect(),i=o.getBoundingClientRect(),c=window.innerWidth,d=window.innerHeight,v=window.scrollX||window.pageXOffset,_=window.scrollY||window.pageYOffset,s={top:e.top,bottom:d-e.bottom,left:e.left,right:c-e.right},f={top:s.top>=i.height+t,bottom:s.bottom>=i.height+t,left:s.left>=i.width+t,right:s.right>=i.width+t},h=u.split("-")[0];let a=u,l=h;f[h]||(h==="bottom"||h==="top"?h==="bottom"&&f.top?l="top":h==="top"&&f.bottom?l="bottom":f.right?l="right":f.left?l="left":l=s.bottom>=s.top?"bottom":"top":h==="right"&&f.left?l="left":h==="left"&&f.right?l="right":f.bottom?l="bottom":f.top?l="top":l=s.right>=s.left?"right":"left",a=l);let m=0,r=0;switch(l){case"bottom":m=e.bottom+t,r=e.left+e.width/2-i.width/2;break;case"top":m=e.top-i.height-t,r=e.left+e.width/2-i.width/2;break;case"right":m=e.top+e.height/2-i.height/2,r=e.right+t;break;case"left":m=e.top+e.height/2-i.height/2,r=e.left-i.width-t;break}if(u.includes("-")){const g=u.split("-")[1];l==="top"||l==="bottom"?g==="start"?r=e.left:g==="end"&&(r=e.right-i.width):g==="start"?m=e.top:g==="end"&&(m=e.bottom-i.height)}if(m+=_,r+=v,w){const g=t+v,P=c-i.width-t+v,M=t+_,Y=d-i.height-t+_;r=Math.max(g,Math.min(r,P)),m=Math.max(M,Math.min(m,Y))}const y=d-t*2,E=c-t*2;return{top:Math.round(m),left:Math.round(r),placement:a,maxHeight:y,maxWidth:E}}var ot=N('<div><!> <div><img alt=""/></div></div>');function ht(x,o){H(o,!0);let p=b(o,"open",3,!1),t=b(o,"placement",3,"bottom"),u=b(o,"offset",3,8),w=b(o,"fitViewport",3,!0),e=b(o,"class",3,""),i=b(o,"style",3,""),c=k(null),d=k(B({top:0,left:0,placement:t()}));z(()=>{p()&&o.referenceElement&&n(c)&&(console.log("referenceElement",o.referenceElement),v())}),z(()=>{if(!p())return;const a=()=>{p()&&o.referenceElement&&n(c)&&v()};return window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a,!0),window.removeEventListener("resize",a)}});async function v(){if(!o.referenceElement||!n(c))return;await O();const a=et(o.referenceElement,n(c),{offset:u(),preferredPlacement:t(),fitViewport:w()});L(d,a,!0),o.onPositionUpdate&&o.onPositionUpdate(a)}const _=G(()=>()=>p()?`
			position: absolute;
			top: ${n(d).top}px;
			left: ${n(d).left}px;
			z-index: 210;
			${i()}
		`.trim():"display: none;");var s=j(),f=A(s);{var h=a=>{tt(a,{children:(l,m)=>{var r=ot(),y=C(r);W(y,()=>o.children??U);var E=D(y,2),g=C(E);V(g,1,"_5 w-24 h-24 top"),R(E),R(r),X(r,P=>L(c,P),()=>n(c)),F((P,M)=>{V(r,1,`${e()??""} ps-${n(d).placement??""}`),I(r,P),V(E,1,K(["absolute overflow-hidden h-18 flex justify-center w-full",n(d).placement==="bottom"&&"top-[-18px]",n(d).placement==="top"&&"bottom-[-18px] rotate-180"])),J(g,"src",M)},[()=>n(_)(),()=>Q(Z)]),S(l,r)},$$slots:{default:!0}})};q(f,a=>{p()&&a(h)})}S(x,s),T()}export{ht as P,tt as a};
