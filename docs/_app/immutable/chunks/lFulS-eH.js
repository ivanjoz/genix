import"./DsnmJJEf.js";import{a8 as Et,m as Xe,x as oe,a as te,b as H,aw as mt,f as J,c as q,s as le,r as F,t as $,i as t,ax as We,p as $e,e as I,g as Qe,l as ge,d as et,h as v,u as ie,at as Me,bj as kt}from"./DsnVzSLI.js";import{s as me}from"./00GtM8hT.js";import{d as tt,e as at,s as vt}from"./BzG9rrjb.js";import{i as j}from"./tZVUs-sg.js";import{e as ye,i as Ae}from"./kj_n-KZc.js";import{h as Dt}from"./trZv5SJJ.js";import{s as fe,c as dt,d as xe,r as Rt,b as qe,a as Lt,e as Pe,S as ht}from"./Dfx1yjcr.js";import{b as Ie}from"./cribf4_g.js";import{p as re}from"./Dgo9tfmS.js";import{t as Bt,i as zt,h as At}from"./DP6SISrU.js";import{o as Ot}from"./BP6gtoFE.js";import{W as Ze,C as Ke}from"./Bz9XdVJx.js";import{P as Vt}from"./BBgjuJSb.js";function Ft(f,e,n){Et(()=>{var a=Xe(()=>e(f,n?.())||{});if(a?.destroy)return()=>a.destroy()})}function Ut(f){let e=null,n=0,a=new Map,c=null,l=new Set,s=!1,d=null;function h(){if(s||(e=f.getScrollElement(),!e))return;s=!0,n=e.scrollTop;const m=()=>{c!==null&&cancelAnimationFrame(c),c=requestAnimationFrame(()=>{e&&(n=e.scrollTop,r()),c=null})};e.addEventListener("scroll",m,{passive:!0}),d=new ResizeObserver(()=>{r()}),d.observe(e)}function r(){l.forEach(m=>m())}function g(m){return a.get(m)??f.estimateSize(m)}function b(){return f.getCount?f.getCount():f.count}function u(){let m=0;const w=b();for(let y=0;y<w;y++)m+=g(y);return m}function k(){if(!e)return[];n=e.scrollTop;const m=b(),w=f.overscan??3,y=e.clientHeight;if(y<=0)return[];let S=0,C=0;for(let M=0;M<m;M++){const K=g(M);if(C+K>n){S=Math.max(0,M-w);break}C+=K}C=0;for(let M=0;M<S;M++)C+=g(M);const z=[],D=n+y;for(let M=S;M<m;M++){const K=g(M),G=C+K;if(z.push({index:M,start:C,size:K,end:G,key:M}),C=G,C>D+w*f.estimateSize(0))break}return z}return h(),{subscribe:m=>(l.add(m),()=>{l.delete(m)}),getVirtualItems:()=>(s||h(),k()),getTotalSize:()=>(s||h(),u()),refresh:()=>{r()}}}var Nt=J("<button><!> <!></button>"),Pt=J("<div><!> <!></div>");function _t(f,e){const n=(h,r=mt)=>{var g=oe(),b=te(g);{var u=m=>{var w=Nt();w.__click=()=>a(r());var y=q(w);{var S=D=>{var M=We();$(()=>me(M,r().text)),H(D,M)};j(y,D=>{r().text&&D(S)})}var C=le(y,2);{var z=D=>{var M=oe(),K=te(M);ye(K,17,()=>r().children,Ae,(G,ee)=>{n(G,()=>t(ee))}),H(D,M)};j(C,D=>{r().children&&D(z)})}F(w),$(()=>fe(w,1,dt(r().css))),H(m,w)},k=m=>{var w=Pt(),y=q(w);{var S=D=>{var M=We();$(()=>me(M,r().text)),H(D,M)};j(y,D=>{r().text&&D(S)})}var C=le(y,2);{var z=D=>{var M=oe(),K=te(M);ye(K,17,()=>r().children,Ae,(G,ee)=>{n(G,()=>t(ee))}),H(D,M)};j(C,D=>{r().children&&D(z)})}F(w),$(()=>fe(w,1,dt(r().css))),H(m,w)};j(b,m=>{r().tagName==="BUTTON"?m(u):m(k,!1)})}H(h,g)},a=h=>{h.onClick&&h.onClick(h.id||0)};var c=oe(),l=te(c);{var s=h=>{var r=oe(),g=te(r);ye(g,17,()=>e.elements,Ae,(b,u)=>{n(b,()=>t(u))}),H(h,r)},d=h=>{n(h,()=>e.elements)};j(l,h=>{Array.isArray(e.elements)?h(s):h(d,!1)})}H(f,c)}tt(["click"]);var qt=J('<i class="icon-attention c-red svelte-1fe1sf"></i>'),Wt=J("<input/>"),jt=J('<div class="_2 svelte-1fe1sf"> </div> <div><div role="button" tabindex="0"><!> <!></div> <!></div>',1);function Gt(f,e){$e(e,!0);let n=re(e,"contentClass",3,""),a=re(e,"inputClass",3,""),c=re(e,"required",3,!1),l=re(e,"type",3,"text"),s=I(!1),d=I(void 0);const h=e.getValue?e.getValue(e.saveOn):(e.saveOn||{})[e.save];let r=I(Qe(h));ge(()=>{t(s)&&t(d)&&t(d).focus()});function g(L){return l()==="number"?parseFloat(L||"0"):L}function b(L){L.stopPropagation(),v(s,!0)}function u(L){L.stopPropagation();const i=g(L.target.value);t(r)!==i&&(console.log("cambiando::"),e.onChange&&e.onChange(i),v(r,i,!0)),v(s,!1)}var k=jt(),m=te(k),w=q(m,!0);F(m);var y=le(m,2),S=q(y);S.__click=b,S.__keydown=L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),b(L))};let C;var z=q(S);{var D=L=>{{let i=ie(()=>e.render(t(r)));_t(L,{get elements(){return t(i)}})}},M=L=>{var i=We();$(()=>me(i,t(r))),H(L,i)};j(z,L=>{e.render?L(D):L(M,!1)})}var K=le(z,2);{var G=L=>{var i=qt();H(L,i)};j(K,L=>{!t(r)&&c()&&L(G)})}F(S);var ee=le(S,2);{var Te=L=>{var i=Wt();Rt(i),Ie(i,Q=>v(d,Q),()=>t(d)),$(()=>{qe(i,"type",l()),Lt(i,t(r)||""),fe(i,1,`w-full ${a()}`,"svelte-1fe1sf")}),at("blur",i,u),H(L,i)};j(ee,L=>{t(s)&&L(Te)})}F(y),$(()=>{me(w,t(r)),fe(y,1,`_1 ${e.css??""}`,"svelte-1fe1sf"),fe(S,1,n(),"svelte-1fe1sf"),C=xe(S,"",C,{visibility:t(s)?"hidden":"visible"})}),H(f,k),et()}tt(["click","keydown"]);const Yt={smoothScroll:!0,shouldThrowOnBounds:!0,align:"auto"},Jt=(f,e,n)=>{if(f===0)return 0;const a=f*e;return Math.max(0,a-n)},ut=(f,e,n,a,c,l,s,d,h,r,g)=>{if(l==="bottomToTop"){const b=Math.ceil(e/n)+1,u=r??a*n,m=Math.max(0,u-e)-f,w=Math.floor(m/n);if(w<0)return{start:0,end:Math.min(a,b+c*2)};const y=Math.max(0,w-c),S=Math.min(a,w+b+c);return{start:y,end:S}}else{const b=Math.floor(f/n),u=Math.min(a,b+Math.ceil(e/n)+1),k=r??a*n,m=Math.max(0,k-e),w=Math.max(1,Math.floor(n*.25));if(Math.abs(f-m)<=w){const z=a;let D=z,M=0;const K=G=>{const ee=g?g[G]:void 0;return Number.isFinite(ee)&&ee>0?ee:n};for(;D>0&&M<e;){const G=K(D-1);M+=G,D-=1}return{start:Math.max(0,D-c),end:z}}const S=Math.max(0,b-c),C=Math.min(a,u+c);return{start:S,end:C}}},Zt=(f,e,n,a,c,l,s,d,h)=>{const r=l||h||0;if(f==="bottomToTop"){const g=s??e*c,b=(e-n)*c,u=Math.max(0,r-g);return b+u}else{if(d){const g=be(d,c,a);return Math.max(0,Math.round(g))}return a*c}},Kt=(f,e,n=!1)=>{const{initialized:a,mode:c,containerElement:l,viewportElement:s,calculatedItemHeight:d,scrollTop:h}=f,{setHeight:r,setScrollTop:g}=e;if(n&&l&&s&&a){const b=l.getBoundingClientRect().height;if(r(b),c==="bottomToTop"){const k=Math.floor(h/d)*d;s.scrollTop=k,g(k)}}},Qt=(f,e,n,a,c,l=0,s=0,d="topToBottom")=>{const h=f.filter(m=>m);if(h.length===0)return{newHeight:a,newLastMeasuredIndex:e.start,updatedHeightCache:n,clearedDirtyItems:new Set,newTotalHeight:l,newValidCount:s,heightChanges:[]};const r={...n},g=new Set,b=[];let u=l,k=s;return c.size>0?c.forEach(m=>{let w;d==="bottomToTop"?w=h.length-1-(m-e.start):w=m-e.start;const y=h[w];if(y&&w>=0&&w<h.length)try{y.offsetHeight;const S=y.getBoundingClientRect().height,C=r[m];if(Number.isFinite(S)&&S>0&&(!C||Math.abs(C-S)>=.1)){const z=C||a,D=S-z;b.push({index:m,oldHeight:z,newHeight:S,delta:D}),C&&Number.isFinite(C)&&C>0?u=u-C+S:(u+=S,k++),r[m]=S}g.add(m)}catch{g.add(m)}else g.add(m)}):h.forEach((m,w)=>{const y=d==="bottomToTop"?Math.max(0,(e.end??e.start+h.length)-1-w):e.start+w;if(!r[y])try{const S=m.getBoundingClientRect().height;Number.isFinite(S)&&S>0&&(u+=S,k++,r[y]=S)}catch{}}),{newHeight:k>0?u/k:a,newLastMeasuredIndex:e.start,updatedHeightCache:r,clearedDirtyItems:g,newTotalHeight:u,newValidCount:k,heightChanges:b}},be=(f,e,n,a,c=1e3)=>{const l=Math.max(0,Math.floor(n));if(l<=0)return 0;{let s=0;for(let d=0;d<l;d++){const h=f[d],r=Number.isFinite(h)&&h>0?h:e;s+=r}return s}},Xt=(f,e,n,a,c,l,s,d,h,r,g=0,b=0,u="topToBottom")=>{const k=n();return k.start===l&&r.size===0?null:(e&&clearTimeout(e),setTimeout(()=>{const{newHeight:w,newLastMeasuredIndex:y,updatedHeightCache:S,clearedDirtyItems:C,newTotalHeight:z,newValidCount:D,heightChanges:M}=Qt(a,k,c,s,r,g,b,u);(Math.abs(w-s)>1||r.size>0)&&d({newHeight:w,newLastMeasuredIndex:y,updatedHeightCache:S,clearedDirtyItems:C,newTotalHeight:z,newValidCount:D,heightChanges:M})},h))},$t=()=>{let f=!1,e=null;return n=>{e=n,f||(f=!0,requestAnimationFrame(()=>{f=!1,e&&(e(),e=null)}))}},ei=(f,e,n,a=1)=>{const c=n[f];return c===void 0?!0:Math.abs(e-c)>a},ti=(f,e,n,a)=>f?f.start!==e.start||f.end!==e.end||n!==a:!0,ii=(f,e,n,a,c,l,s)=>{const d=c<=1,h=c>=s-l-1;return{visibleItemsCount:f.end-f.start,startIndex:f.start,endIndex:f.end,totalItems:e,processedItems:n,averageItemHeight:a,atTop:d,atBottom:h,totalHeight:s}},ni=f=>{const{mode:e,align:n,targetIndex:a,itemsLength:c,calculatedItemHeight:l,height:s,scrollTop:d,firstVisibleIndex:h,lastVisibleIndex:r,heightCache:g}=f;return e==="bottomToTop"?ri({align:n,targetIndex:a,itemsLength:c,calculatedItemHeight:l,height:s,scrollTop:d,firstVisibleIndex:h,lastVisibleIndex:r,heightCache:g}):si({align:n,targetIndex:a,calculatedItemHeight:l,height:s,scrollTop:d,firstVisibleIndex:h,lastVisibleIndex:r,heightCache:g})},ri=f=>{const{align:e,targetIndex:n,itemsLength:a,calculatedItemHeight:c,height:l,scrollTop:s,firstVisibleIndex:d,lastVisibleIndex:h,heightCache:r}=f,g=be(r,c,a),b=be(r,c,n),u=c;if(e==="auto"){if(n<d)return Math.max(0,g-(b+u));if(n>h-1)return Math.max(0,g-b-l);{const k=g-(b+u),m=g-b,w=Math.abs(s-k),y=Math.abs(s+l-m);return w<y?k:Math.max(0,m-l)}}else{if(e==="top")return Math.max(0,g-(b+u));if(e==="bottom")return Math.max(0,g-b-l);if(e==="nearest"){const k=g-(b+u),m=g-b;if(m<=s||k>=s+l){const w=Math.abs(s-k),y=Math.abs(s+l-m);return w<y?k:Math.max(0,m-l)}else return null}}return null},si=f=>{const{align:e,targetIndex:n,calculatedItemHeight:a,height:c,scrollTop:l,firstVisibleIndex:s,lastVisibleIndex:d,heightCache:h}=f;if(e==="auto"){if(n<s)return be(h,a,n);if(n>d-1){const r=be(h,a,n+1);return Math.max(0,r-c)}else{const r=be(h,a,n),g=be(h,a,n+1),b=Math.abs(l-r),u=Math.abs(l+c-g);return b<u?r:Math.max(0,g-c)}}else{if(e==="top")return be(h,a,n);if(e==="bottom"){const r=be(h,a,n+1);return Math.max(0,r-c)}else if(e==="nearest"){const r=be(h,a,n),g=be(h,a,n+1);if(g<=l||r>=l+c){const b=Math.abs(l-r),u=Math.abs(l+c-g);return b<u?r:Math.max(0,g-c)}else return null}}return null},gt={now:()=>typeof performance<"u"&&performance.now?performance.now():Date.now()},ai=(f,e,n={})=>{const{leading:a=!0,trailing:c=!1}=n;let l=0,s=null,d=null,h=!0;const r=g=>{l=gt.now(),f(...g)};return((...g)=>{const b=gt.now(),u=h?e:b-l;if(d=g,s&&(clearTimeout(s),s=null),u>=e)a&&(h=!1,r(g)),c&&!a&&(s=setTimeout(()=>{d&&r(d),s=null},e));else if(h&&a)h=!1,r(g);else if(c){const k=e-u;s=setTimeout(()=>{d&&r(d),s=null},k)}})};var ft={},oi=J("<!> <div><!></div>",1),li=J("<div><div><div><div></div></div></div></div>");function ci(f,e){$e(e,!0);const n=$t(),a=16,c=new WeakMap,l=typeof process<"u"&&(ft?.PUBLIC_SVELTE_VIRTUAL_LIST_DEBUG==="true"||ft?.SVELTE_VIRTUAL_LIST_DEBUG==="true"),s=re(e,"items",19,()=>[]),d=re(e,"defaultEstimatedItemHeight",3,40),h=re(e,"debug",3,!1),r=re(e,"mode",3,"topToBottom"),g=re(e,"bufferSize",3,20),b=Qe([]);let u=I(0);const k=!1;let m=I(!1),w=I(-1),y=I(0),S=null,C=null,z=null;const D=Qe(new Set);let M=I(0),K=I(0),G=I(null),ee=I(0),Te=I(0),L=I(null);const i=new hi({itemLength:s().length,itemHeight:d(),internalDebug:l}),Q=Math.random().toString(36).slice(2,7),O=(o,p)=>{if(!(!h()&&!l))try{const B=new Date().toISOString().split("T")[1]?.replace("Z","");console.info(`[SVL][${Q}] ${B} ${o}`,p??"")}catch{}};let pe=I(0);const je=ie(()=>()=>{const o=t(_e)();return(r()==="bottomToTop"?s().slice(o.start,o.end).reverse():s().slice(o.start,o.end)).map((B,P)=>({item:B,originalIndex:r()==="bottomToTop"?o.end-1-P:o.start+P,sliceIndex:P}))}),Oe=o=>{if(!i.viewportElement||!i.initialized||t(R))return;if(r()==="bottomToTop"&&ve&&!t(x)&&performance.now()>=t(pe)){const A=performance.now(),Y=i.viewport,V=c.get(Y)??0;if(A-V<a){v(pe,A+50);return}c.set(Y,A);const E=Math.max(0,t(X)()-t(u));O("b2t-correction-approx",{approximateScrollTop:E}),i.viewport.scrollTop=E,i.scrollTop=E,Me().then(()=>{const W=i.viewport.querySelector('[data-original-index="0"]');if(W){const ae=i.viewport.getBoundingClientRect(),he=W.getBoundingClientRect();Math.abs(ae.y+ae.height-(he.y+he.height))<=4||(W.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"}),O("b2t-correction-native",{containerBottom:ae.y+ae.height,itemBottom:he.y+he.height})),i.scrollTop=i.viewport.scrollTop,v(pe,performance.now()+200)}});return}const p=i.viewport.scrollTop,B=Math.max(0,t(X)()-t(u));let P=0;const Z=t(_e)();for(const A of o)A.index<Z.start&&(P+=A.delta);if(Math.abs(P)>1){const A=Math.min(B,Math.max(0,p+P));i.viewport.scrollTop=A,i.scrollTop=A}},_=ai(()=>{t(M)>0&&(ve=t(de),i.startDynamicUpdate(),T())},16,{leading:!0,trailing:!0});ge(()=>{_()}),ge(()=>{i.updateItemLength(s().length)});const T=()=>{v(Te,i.totalHeight,!0),S=Xt(k,S,t(_e),b,i.getHeightCache(),t(w),i.averageHeight,o=>{if(i.itemHeight=o.newHeight,v(w,o.newLastMeasuredIndex,!0),o.heightChanges.length>0&&i.processDirtyHeights(o.heightChanges),o.heightChanges.length>0&&r()==="bottomToTop"){const p=o.heightChanges;queueMicrotask(()=>Oe(p))}if(r()==="topToBottom"&&i.isReady&&i.initialized){const p=t(Te),B=i.totalHeight,P=B-p;if(Math.abs(P)>1){const Z=Math.max(0,B-(t(u)||0)),A=Math.max(i.averageHeight,10),Y=i.viewport.scrollTop;if(Math.abs(Y-Z)<=A){const E=Math.min(Z,Math.max(0,Y+P));i.viewport.scrollTop=E,i.scrollTop=E}}}Xe(()=>{D.clear(),v(M,0),ve=!1}),i.endDynamicUpdate()},t(w)<0?0:100,D,0,0,r())};let R=I(!1),x=I(!1),U=I(0),ce=I(0);const X=ie(()=>()=>i.totalHeight),de=ie(()=>i.scrollTop>=t(X)()-t(u)-1);let ve=!1,ne=null;function Ge(){if(!i.viewportElement)return;const o=i.viewport.querySelector(`[data-original-index="${s().length-1}"]`);if(!o)return;const p=i.viewport.getBoundingClientRect(),B=o.getBoundingClientRect();v(L,Math.round(Math.abs(B.bottom-p.bottom)),!0),l&&console.info("[SVL] bottomDistance(px):",t(L))}ge(()=>{if(i.initialized&&r()==="bottomToTop"&&i.viewportElement){const o=Math.max(0,t(X)()-t(u)),p=i.viewport.scrollTop,B=Math.abs(p-o),P=Math.abs(i.averageHeight-t(U))>1,Z=Math.max(0,t(X)()-t(u)),A=Math.abs(p-Z)<i.averageHeight;if(P&&!t(R)&&!A&&!t(x)&&performance.now()>=t(pe)&&!i.isDynamicUpdateInProgress&&B>i.averageHeight*3){const V=Math.round(o);i.viewport.scrollTop=V,i.scrollTop=V}B>i.averageHeight*5&&v(R,!0),v(U,i.averageHeight,!0)}}),ge(()=>{const o=s().length;if(i.initialized&&r()==="bottomToTop"&&i.isReady&&t(ce)>0&&o-t(ce)!==0){const B=i.viewport.scrollTop,P=i.averageHeight,Z=t(u),A=t(X)(),Y=Math.max(0,A-Z);(Math.abs(B-Math.max(0,t(ce)*P-Z))<P*2||B===0)&&i.runDynamicUpdate(()=>{const E=Y;i.viewport.scrollTop=E,i.scrollTop=E,v(R,!1)})}v(ce,o,!0)}),ge(()=>{if(i.isReady){const o=i.container.getBoundingClientRect().height;Number.isFinite(o)&&o>0&&v(u,o,!0)}}),ge(()=>{if(t(u)===0&&i.isReady){const o=i.container.getBoundingClientRect().height;Number.isFinite(o)&&o>0&&v(K,o,!0)}});const _e=ie(()=>()=>{if(!s().length)return{start:0,end:0};const o=t(u)||0;if(r()==="bottomToTop"&&!i.initialized&&i.scrollTop===0&&o>0){const p=Math.max(0,t(X)()-o);return ne=ut(p,o,i.averageHeight,s().length,g(),r(),t(de),ve,ne,t(X)(),i.getHeightCache()),ne}return ne=ut(i.scrollTop,o,i.averageHeight,s().length,g(),r(),t(de),ve,ne,t(X)(),i.getHeightCache()),ne}),it=()=>{i.viewportElement&&(t(m)||(v(m,!0),n(()=>{const o=i.viewport.scrollTop;if(r()==="bottomToTop"&&t(y)-o>.5&&(v(pe,performance.now()+450),v(R,!0)),v(y,o,!0),i.scrollTop=o,Ge(),l){const p=t(_e)();O("scroll",{mode:r(),scrollTop:i.scrollTop,height:t(u),totalHeight:t(X)(),averageItemHeight:i.averageHeight,visibleRange:p})}v(m,!1)})))},Ee=(o=!1)=>{if(O("updateHeightAndScroll-enter",{immediate:o,initialized:i.initialized,mode:r()}),!i.initialized&&r()==="bottomToTop"){Me().then(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!i.isReady)return;const p=i.container.getBoundingClientRect().height;v(u,p,!0);const B=Jt(s().length,i.averageHeight,p),Z=String(Q).toLowerCase().replace(/[^a-z0-9]/g,"").slice(-4),A=parseInt(Z,36),Y=Number.isNaN(A)?Math.floor(Math.random()*3):A%3;O("b2t-init",{measuredHeight:p,targetScrollTop:B,jitterMs:Y}),setTimeout(()=>{i.viewport.scrollTop=B,i.scrollTop=B,requestAnimationFrame(()=>{i.initialized||(i.initialized=!0),Me().then(()=>{const V=i.viewport.querySelector('[data-original-index="0"]');if(!V)return;const E=i.viewport.getBoundingClientRect(),W=V.getBoundingClientRect();Math.abs(E.y+E.height-(W.y+W.height))<=4||(V.scrollIntoView({block:"end",inline:"nearest"}),i.scrollTop=i.viewport.scrollTop,O("b2t-init-native-fallback",{containerBottom:E.y+E.height,itemBottom:W.y+W.height}))})})},Y)})})});return}Kt({initialized:i.initialized,mode:r(),containerElement:i.containerElement,viewportElement:i.viewportElement,calculatedItemHeight:i.averageHeight,height:t(u),scrollTop:i.scrollTop},{setHeight:p=>v(u,p,!0),setScrollTop:p=>i.scrollTop=p},o),O("updateHeightAndScroll-exit",{immediate:o})};z=new ResizeObserver(o=>{n(()=>{O("item-resize-observer",{entries:o.length});let p=!1;t(_e)();for(const B of o){const P=B.target,Z=b.indexOf(P),A=parseInt(P.dataset.originalIndex||"-1",10);if(Z!==-1&&A>=0){const Y=P.getBoundingClientRect().height;ei(A,Y,i.getHeightCache())&&(t(M)===0&&(ve=t(de)),D.add(A),v(M,D.size,!0),p=!0)}}p&&(O("item-resize-recalc"),T())})}),Ot(()=>(O("onMount-enter",{mode:r(),items:s().length}),Ee(),Me().then(()=>requestAnimationFrame(()=>requestAnimationFrame(()=>{O("post-hydration-measure"),T()}))),C=new ResizeObserver(()=>{if(!i.initialized){O("container-resize-ignored","not-initialized");return}O("container-resize"),Ee(!0)}),i.isReady&&C.observe(i.container),()=>{C&&C.disconnect(),z&&z.disconnect()})),ge(()=>{l&&(v(G,t(_e)(),!0),v(ee,i.averageHeight,!0))});const nt=(o,p=!0,B=!0)=>{console.warn("SvelteVirtualList: scrollToIndex is deprecated and will be removed in a future version. Use the new scroll method from the component instance instead."),ke({index:o,smoothScroll:p,shouldThrowOnBounds:B})},ke=async o=>{const{index:p,smoothScroll:B,shouldThrowOnBounds:P,align:Z}={...Yt,...o};if(!s().length)return;if(!i.viewportElement){Me().then(()=>{i.viewportElement&&ke({index:p,smoothScroll:B,shouldThrowOnBounds:P,align:Z})});return}let A=p;if(A<0||A>=s().length){if(P)throw new Error(`scroll: index ${A} is out of bounds (0-${s().length-1})`);A=Math.max(0,Math.min(A,s().length-1))}const{start:Y,end:V}=t(_e)(),E=ni({mode:r(),align:Z||"auto",targetIndex:A,itemsLength:s().length,calculatedItemHeight:i.averageHeight,height:t(u),scrollTop:i.scrollTop,firstVisibleIndex:Y,lastVisibleIndex:V,heightCache:i.getHeightCache()});if(E!==null){if(v(x,!0),l&&i.viewportElement){const W=Math.max(0,i.viewport.scrollHeight-i.viewport.clientHeight);console.info("[SVL] scroll-intent",{targetIndex:A,align:Z||"auto",firstVisibleIndex:Y,lastVisibleIndex:V,currentScrollTop:i.scrollTop,scrollTarget:E,domMaxScrollTop:W})}if(r()==="bottomToTop"&&B){const W=i.viewport.querySelectorAll("[data-original-index]");let ae=-1,he=null;for(const ue of W){const se=parseInt(ue.getAttribute("data-original-index")||"-1");se>ae&&(ae=se,he=ue)}he?.scrollIntoView({behavior:"smooth"}),await Me(),await new Promise(ue=>setTimeout(ue,100)),await Me()}i.viewport.scrollTo({top:E,behavior:B?"smooth":"auto"}),requestAnimationFrame(()=>{if(i.scrollTop=E,l&&i.viewportElement){const W=Math.max(0,i.viewport.scrollHeight-i.viewport.clientHeight);console.info("[SVL] scroll-after-call",{scrollTop:i.scrollTop,domMaxScrollTop:W})}}),setTimeout(()=>{v(x,!1)},B?500:100)}};function Ce(o){return z&&z.observe(o),{destroy(){z&&z.unobserve(o)}}}var Ye={scrollToIndex:nt,scroll:ke},He=li();Pe(He,()=>({id:"virtual-list-container",...e.testId?{"data-testid":`${e.testId}-container`}:{},class:e.containerClass??"virtual-list-container"}),void 0,void 0,"svelte-1yn1i8s");var De=q(He);Pe(De,()=>({id:"virtual-list-viewport",...e.testId?{"data-testid":`${e.testId}-viewport`}:{},class:e.viewportClass??"virtual-list-viewport",onscroll:it}),void 0,void 0,"svelte-1yn1i8s");var we=q(De);Pe(we,o=>({id:"virtual-list-content",...e.testId?{"data-testid":`${e.testId}-content`}:{},class:e.contentClass??"virtual-list-content",[ht]:o}),[()=>({height:`${Math.max(t(u),t(X)())??""}px`})],void 0,"svelte-1yn1i8s");var N=q(we);return Pe(N,o=>({id:"virtual-list-items",...e.testId?{"data-testid":`${e.testId}-items`}:{},class:e.itemsClass??"virtual-list-items",[ht]:o}),[()=>({visibility:t(u)===0&&r()==="bottomToTop"?"hidden":"visible",transform:`translateY(${(()=>{const o=t(u)||t(K)||0,p=t(_e)(),B=o===0?400:o;return Math.round(Zt(r(),s().length,p.end,p.start,i.averageHeight,B,t(X)(),i.getHeightCache(),t(K)))})()??""}px)`})],void 0,"svelte-1yn1i8s"),ye(N,23,()=>t(je)(),o=>o.originalIndex,(o,p,B)=>{var P=oi(),Z=te(P);{var A=E=>{const W=ie(()=>ii(t(_e)(),s().length,Object.keys(i.getHeightCache()).length,i.averageHeight,i.scrollTop,t(u)||0,t(X)()));var ae=We();$(he=>me(ae,he),[()=>e.debugFunction?e.debugFunction(t(W)):console.info("Virtual List Debug:",t(W))]),H(E,ae)};j(Z,E=>{h()&&t(B)===0&&ti(t(G),t(_e)(),t(ee),i.averageHeight)&&E(A)})}var Y=le(Z,2);Pe(Y,()=>({"data-original-index":t(p).originalIndex,...e.testId?{"data-testid":`${e.testId}-item-${t(p).originalIndex}`}:{}}),void 0,void 0,"svelte-1yn1i8s");var V=q(Y);vt(V,()=>e.renderItem,()=>t(p).item,()=>t(p).originalIndex),F(Y),Ie(Y,(E,W)=>b[W.sliceIndex]=E,E=>b?.[E.sliceIndex],()=>[t(p)]),Ft(Y,E=>Ce?.(E)),H(o,P)}),F(N),F(we),F(De),Ie(De,o=>i.viewportElement=o,()=>i?.viewportElement),F(He),Ie(He,o=>i.containerElement=o,()=>i?.containerElement),H(f,He),et(Ye)}class di{onRecompute;isScheduled=!1;isPending=!1;blockDepth=0;timeoutId=null;rafId=null;constructor(e){this.onRecompute=e}schedule=()=>{if(this.blockDepth>0){this.isPending=!0;return}if(this.isScheduled)return;if(this.isScheduled=!0,!(typeof window<"u"&&typeof requestAnimationFrame=="function")){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.isScheduled=!1,this.onRecompute()},0);return}this.rafId!==null&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{this.rafId=null,this.isScheduled=!1,this.onRecompute()})};block=()=>{this.blockDepth+=1,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null,this.isScheduled=!1,this.isPending=!0),this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null,this.isScheduled=!1,this.isPending=!0)};unblock=()=>{this.blockDepth!==0&&(this.blockDepth-=1,this.blockDepth===0&&this.isPending&&(this.isPending=!1,this.onRecompute()))};cancel=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.isScheduled=!1,this.isPending=!1}}class hi{#r=I(0);get _totalMeasuredHeight(){return t(this.#r)}set _totalMeasuredHeight(e){v(this.#r,e,!0)}#s=I(0);get _measuredCount(){return t(this.#s)}set _measuredCount(e){v(this.#s,e,!0)}#a=I(0);get _itemLength(){return t(this.#a)}set _itemLength(e){v(this.#a,e,!0)}#o=I(40);get _itemHeight(){return t(this.#o)}set _itemHeight(e){v(this.#o,e,!0)}#l=I(40);get _averageHeight(){return t(this.#l)}set _averageHeight(e){v(this.#l,e,!0)}#c=I(0);get _totalHeight(){return t(this.#c)}set _totalHeight(e){v(this.#c,e,!0)}_measuredFlags=null;#d=I(!1);get _initialized(){return t(this.#d)}set _initialized(e){v(this.#d,e,!0)}#h=I(0);get _scrollTop(){return t(this.#h)}set _scrollTop(e){v(this.#h,e,!0)}#u=I(null);get _containerElement(){return t(this.#u)}set _containerElement(e){v(this.#u,e,!0)}#g=I(null);get _viewportElement(){return t(this.#g)}set _viewportElement(e){v(this.#g,e,!0)}_internalDebug=!1;#f=I(!1);get _isReady(){return t(this.#f)}set _isReady(e){v(this.#f,e,!0)}#m=I(!1);get _dynamicUpdateInProgress(){return t(this.#m)}set _dynamicUpdateInProgress(e){v(this.#m,e,!0)}#v=I(0);get _dynamicUpdateDepth(){return t(this.#v)}set _dynamicUpdateDepth(e){v(this.#v,e,!0)}#_=I(null);get _itemsWrapperElement(){return t(this.#_)}set _itemsWrapperElement(e){v(this.#_,e,!0)}#p=I(!1);get _gridDetected(){return t(this.#p)}set _gridDetected(e){v(this.#p,e,!0)}#b=I(1);get _gridColumns(){return t(this.#b)}set _gridColumns(e){v(this.#b,e,!0)}_gridObserver=null;_mutationObserver=null;_heightCache={};_scheduler=new di(()=>this.recomputeDerivedHeights());recomputeDerivedHeights(){const e=this._measuredCount>0?this._totalMeasuredHeight/this._measuredCount:this._itemHeight;this._averageHeight=e;const n=this._itemLength-this._measuredCount;this._totalHeight=this._totalMeasuredHeight+n*e}recomputeIsReady(){this._isReady=!!this._containerElement&&!!this._viewportElement}scheduleRecomputeDerivedHeights(){const e=typeof navigator<"u"&&typeof navigator.userAgent=="string"?/jsdom/i.test(navigator.userAgent):!1;if(typeof window>"u"||e){this.recomputeDerivedHeights();return}if(this._dynamicUpdateDepth>0){this._scheduler.block();return}this._scheduler.schedule()}get totalMeasuredHeight(){return this._totalMeasuredHeight}get measuredCount(){return this._measuredCount}get itemLength(){return this._itemLength}get itemHeight(){return this._itemHeight}set itemHeight(e){this._itemHeight=e,this.scheduleRecomputeDerivedHeights()}get initialized(){return this._initialized}set initialized(e){if(this._initialized)throw new Error("ReactiveListManager: initialized flag cannot be set to true after it has been set to true");this._initialized=e}get scrollTop(){return this._scrollTop}set scrollTop(e){this._internalDebug&&this.#w(e),this._scrollTop=e}get containerElement(){return this._containerElement}get container(){if(!this._isReady)throw new Error("ReactiveListManager: container is not ready");return this._containerElement}set containerElement(e){this._containerElement=e,this.recomputeIsReady()}get viewportElement(){return this._viewportElement}get viewport(){if(!this._isReady)throw new Error("ReactiveListManager: viewport is not ready");return this._viewportElement}set viewportElement(e){this._viewportElement=e,this.recomputeIsReady()}get itemsWrapperElement(){return this._itemsWrapperElement}set itemsWrapperElement(e){if(this._itemsWrapperElement!==e){if(this._gridObserver){try{this._gridObserver.disconnect()}catch{}this._gridObserver=null}if(this._mutationObserver){try{this._mutationObserver.disconnect()}catch{}this._mutationObserver=null}}if(this._itemsWrapperElement=e,!e){this._gridDetected=!1,this._gridColumns=1;return}this.#y(),this.#C(),this.#n()}get gridDetected(){return this._gridDetected}get gridColumns(){return this._gridColumns}get isReady(){return this._isReady}get isDynamicUpdateInProgress(){return this._dynamicUpdateDepth>0}startDynamicUpdate(){const e=this._dynamicUpdateDepth===0;this._dynamicUpdateDepth+=1,e&&(this._dynamicUpdateInProgress=!0,this._isReady&&this._viewportElement&&this._viewportElement.style.setProperty("overflow-anchor","none"))}endDynamicUpdate(){this._dynamicUpdateDepth<=0||(this._dynamicUpdateDepth-=1,this._dynamicUpdateDepth===0&&(this._isReady&&this._viewportElement&&this._viewportElement.style.setProperty("overflow-anchor","auto"),this._dynamicUpdateInProgress=!1,this._scheduler.unblock()))}async runDynamicUpdate(e){this.startDynamicUpdate();try{const n=e();return n instanceof Promise?await n:n}finally{this.endDynamicUpdate()}}#T=null;#t=0;#e=0;#i=!1;#w(e){const n=typeof performance<"u"&&performance.now?performance.now():Date.now();this.#T===e?n-this.#t<=1e3?(this.#e+=1,this.#e>10&&!this.#i&&(this.#i=!0,console.warn(`
================ SvelteVirtualList DEBUG ================
scrollTop assigned same value ${e} > 10 times within 1s
count=${this.#e}, windowStart=${Math.round(this.#t)}ms
This may indicate redundant updates or feedback loops.
========================================================
`))):(this.#t=n,this.#e=1,this.#i=!1):(this.#T=e,this.#t=n,this.#e=1,this.#i=!1)}get averageHeight(){return this._averageHeight}get totalHeight(){return this._totalHeight}flushRecompute=()=>{this.recomputeDerivedHeights()};getHeightCache(){return this._heightCache}constructor(e){this._itemLength=e.itemLength,this._itemHeight=e.itemHeight,this._internalDebug=e.internalDebug??!1,this._measuredFlags=new Uint8Array(Math.max(0,this._itemLength)),this.recomputeDerivedHeights()}processDirtyHeights(e){if(e.length===0)return;let n=0,a=0;for(const s of e){const{index:d,oldHeight:h,newHeight:r}=s;h!==void 0&&(n-=h,a-=1),r!==void 0?(n+=r,a+=1,this._heightCache[d]=r):delete this._heightCache[d],this._measuredFlags&&d>=0&&d<this._measuredFlags.length&&(this._measuredFlags[d]=1)}const c=typeof navigator<"u"&&typeof navigator.userAgent=="string"?/jsdom/i.test(navigator.userAgent):!1;if(typeof window>"u"||c){if(n===0&&a===0)return}else if(a===0)return;this._totalMeasuredHeight+=n,this._measuredCount+=a,this.scheduleRecomputeDerivedHeights()}updateItemLength(e){this._itemLength=e,this._measuredFlags=new Uint8Array(Math.max(0,e)),this.recomputeDerivedHeights()}updateEstimatedHeight(e){this._itemHeight=e,this.scheduleRecomputeDerivedHeights()}setMeasuredHeight(e,n){if(e<0||e>=this._itemLength)return;const a=this._heightCache[e];Number.isFinite(a)&&a>0?this._totalMeasuredHeight-=a:this._measuredCount+=1,Number.isFinite(n)&&n>0&&(this._heightCache[e]=n,this._totalMeasuredHeight+=n,this.scheduleRecomputeDerivedHeights())}reset(){this._totalMeasuredHeight=0,this._measuredCount=0,this._measuredFlags=this._itemLength>0?new Uint8Array(this._itemLength):null,this.scheduleRecomputeDerivedHeights()}getDebugInfo(){return{totalMeasuredHeight:this._totalMeasuredHeight,measuredCount:this._measuredCount,itemLength:this._itemLength,coveragePercent:this._itemLength>0?this._measuredCount/this._itemLength*100:0,itemHeight:this._itemHeight,averageHeight:this.averageHeight,totalHeight:this.totalHeight,gridDetected:this._gridDetected,gridColumns:this._gridColumns}}getMeasurementCoverage(){return this.getDebugInfo().coveragePercent}hasSufficientMeasurements(e=10){return this.getMeasurementCoverage()>=e}recomputeGridDetection(){this.#n()}#y(){const e=this._itemsWrapperElement;if(!(typeof window>"u"||!e))try{this._gridObserver=new ResizeObserver(()=>{this.#n()}),this._gridObserver.observe(e)}catch{this._gridObserver=null}}#C(){const e=this._itemsWrapperElement;if(!(typeof window>"u"||!e))try{this._mutationObserver=new MutationObserver(n=>{for(const a of n)if(a.type==="attributes"&&(a.attributeName==="class"||a.attributeName==="style")){this.#n();break}}),this._mutationObserver.observe(e,{attributes:!0,attributeFilter:["class","style"]})}catch{this._mutationObserver=null}}#n(){const e=this._itemsWrapperElement;if(!e){this._gridDetected=!1,this._gridColumns=1;return}let n=!1,a=1;try{const c=getComputedStyle(e);if(c.display==="grid"){const l=c.gridTemplateColumns,s=/repeat\(\s*(\d+)\s*,/i.exec(l);if(s&&s[1])a=Math.max(1,parseInt(s[1],10)),n=!0;else if(l&&l!=="none"){const d=this.#x(l);Number.isFinite(d)&&d>0&&(a=d,n=!0)}}}catch{}if(!n){const c=e.children;if(c&&c.length>0){const l=c[0].getBoundingClientRect().top;let s=0;for(let d=0;d<c.length;d+=1){const h=c[d].getBoundingClientRect().top;if(Math.abs(h-l)<=1)s+=1;else break}s>0&&(a=s,n=s>1)}}this._gridDetected=n,this._gridColumns=Math.max(1,a),this._internalDebug&&console.info("[ReactiveListManager] grid detection:",{detected:this._gridDetected,columns:this._gridColumns})}#x(e){let n=0,a=0,c=!1;for(let l=0;l<e.length;l+=1){const s=e[l];s==="("?n+=1:s===")"&&(n=Math.max(0,n-1)),n===0&&/\s/.test(s)?c&&(a+=1,c=!1):s!==" "&&(c=!0)}return c&&(a+=1),a}}var ui=J('<i class="icon-attention c-red"></i>'),gi=J('<input class="svelte-1tz0s5a"/>'),fi=J('<div class="_3 min-h-28 px-8 py-4 flex items-center svelte-1tz0s5a" role="button" tabindex="0"> </div>'),mi=J('<div class="h-200 w-400 p-4 _4 overflow-auto svelte-1tz0s5a"><!></div>'),vi=J('<div class="_2 svelte-1tz0s5a"> </div> <div class="_1 svelte-1tz0s5a" role="button" tabindex="0"><div> <!></div> <!> <!></div>',1);function _i(f,e){$e(e,!0);let n=re(e,"saveOn",7),a=ie(()=>Ke.popoverShowID===e.id),c=I(null),l=I(null),s=I(""),d=I(null),h=!1;const r=()=>{if(Ze.has(e.options))return;const i=new Map,Q=new Map;for(const O of e.options)i.set(O[e.keyId],O),Q.set(O[e.keyName].toLowerCase(),O);Ze.set(e.options,{idToRecord:i,valueToRecord:Q})};r();let g=ie(()=>(console.log("filtrando valores::",t(s)),t(s)?e.options.filter(i=>String(i[e.keyName]||"").toLowerCase().includes(t(s))):e.options));const b=i=>{const Q=Ze.get(e.options)?.valueToRecord||new Map;v(d,Q.get(String(i.value||"").toLowerCase()),!0),t(d)?i.value=t(d)[e.keyName]:i.value="",n()&&e.save&&(t(d)?n()[e.save]=t(d)[e.keyId]:delete n()[e.save])},u=i=>{console.log("selected",i),v(d,i,!0),t(l)&&(t(l).value=i[e.keyName]),n()&&e.save&&(n()[e.save]=i[e.keyId]),Ke.popoverShowID=0};ge(()=>{(t(d)||!t(d))&&console.log("selected 2",t(d))});const k=ie(()=>e.render?e.render(t(d),t(a)):t(d)?.[e.keyName]||""),m=()=>{v(s,""),Ke.popoverShowID=e.id};ge(()=>{t(a)&&t(l)&&(t(d)&&(t(l).value=t(d)[e.keyName]),t(l).focus())}),ge(()=>{n()&&e.save&&(r(),Xe(()=>{const i=Ze.get(e.options)?.idToRecord||new Map;v(d,n()[e.save]?i.get(n()[e.save]):null,!0),console.log("selected 3",t(d)),t(d)?t(l)&&(t(l).value=t(d)[e.keyName]):t(l)&&(t(l).value="")}))});var w=vi(),y=te(w),S=q(y,!0);F(y);var C=le(y,2);C.__keydown=i=>{(i.key==="Enter"||i.key===" ")&&i.preventDefault()},C.__click=i=>{i.stopPropagation(),m()};var z=q(C);let D;var M=q(z),K=le(M);{var G=i=>{var Q=ui();H(i,Q)};j(K,i=>{!t(d)&&e.required&&i(G)})}F(z);var ee=le(z,2);{var Te=i=>{var Q=gi();Q.__keyup=O=>{const pe=(O.target.value||"").trim();Bt(()=>{v(s,String(pe||"").toLowerCase(),!0)},200)},Ie(Q,O=>v(l,O),()=>t(l)),$(O=>qe(Q,"id",O),[()=>String(e.id)]),at("focus",Q,()=>{}),at("blur",Q,O=>{if(h){h=!1;return}b(O.target),Ke.popoverShowID=0,v(s,"")}),H(i,Q)};j(ee,i=>{t(a)&&i(Te)})}var L=le(ee,2);Vt(L,{get referenceElement(){return t(c)},get open(){return t(a)},placement:"bottom",children:(i,Q)=>{var O=mi(),pe=q(O);ci(pe,{get items(){return t(g)},renderItem:(Oe,_=mt)=>{var T=fi();T.__click=x=>{x.stopPropagation(),u(_())},T.__mousedown=()=>{h=!0},T.__keydown=x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),u(_()))};var R=q(T,!0);F(T),$(()=>me(R,_()[e.keyName])),H(Oe,T)},$$slots:{renderItem:!0}}),F(O),H(i,O)},$$slots:{default:!0}}),F(C),Ie(C,i=>v(c,i),()=>t(c)),$(()=>{me(S,t(k)),fe(z,1,e.contentClass,"svelte-1tz0s5a"),D=xe(z,"",D,{visibility:t(a)?"hidden":"visible"}),me(M,`${t(k)??""} `)}),H(f,w),et()}tt(["keydown","click","keyup","mousedown"]);var pi=J('<th><div class="svelte-1kfim0d"> </div></th>'),bi=J('<th><div class="svelte-1kfim0d"> </div></th>'),Ti=J('<tr class="vtable-header-row vtable-header-row-sub svelte-1kfim0d"></tr>'),wi=J('<tr><td class="vtable-empty svelte-1kfim0d"><div class="vtable-empty-message svelte-1kfim0d"> </div></td></tr>'),yi=J("<span> </span>"),Ci=J('<button class="_11 _e svelte-1kfim0d" title="edit"><i class="icon-pencil"></i></button>'),xi=J('<button class="_11 _d svelte-1kfim0d" title="delete"><i class="icon-trash"></i></button>'),Hi=J('<div class="flex gap-4 items-center justify-center svelte-1kfim0d"><!> <!></div>'),Si=J("<td><!> <!></td>"),Mi=J('<tr><td style="border: none;"></td></tr>'),Ii=J("<tr></tr> <!>",1),Ei=J('<div><table><thead class="vtable-header svelte-1kfim0d"><tr class="vtable-header-row svelte-1kfim0d"></tr><!></thead><tbody class="vtable-body svelte-1kfim0d"><!></tbody></table></div>');function Wi(f,e){$e(e,!0);let n=re(e,"maxHeight",3,"calc(100vh - 8rem)"),a=re(e,"css",3,""),c=re(e,"tableCss",3,""),l=re(e,"estimateSize",3,34),s=re(e,"overscan",3,15),d=re(e,"emptyMessage",3,"No se encontraron registros."),h=re(e,"useFilterCache",3,!1),r=I(void 0),g=I(Qe([])),b=I(0),u=null,k=!1,m=I(0);const w=new WeakMap,y=ie(()=>{const _=[],T=[],R=[];for(const x of e.columns){const U={...x};if(U._colspan=x.subcols?.length||0,_.push(U),x.subcols&&x.subcols.length>0)for(const ce of x.subcols)T.push(ce),R.push(ce);else R.push(U)}return{level1:_,level2:T,flatColumns:R,hasSubcols:T.length>0}}),S=ie(()=>(e.filterText||"").toLowerCase().split(" ").filter(_=>_.length>1)),C=ie(()=>{if(console.log("filterText",e.filterText),e.filterText&&e.getFilterContent){const _=e.data.filter(T=>{let R="";if(h()&&typeof T=="object"&&T!==null){const x=w.get(T);x?R=x:(R=e.getFilterContent(T).toLowerCase(),w.set(T,R))}else R=e.getFilterContent(T).toLowerCase();return zt(R,t(S))});return console.log("data filtrada::",_),_}else return e.data});ge(()=>{(e.selected||!e.selected)&&console.log("selected::",e.selected)}),ge(()=>{if(t(r)&&!u){u=Ut({count:0,getScrollElement:()=>t(r),estimateSize:()=>l(),overscan:s(),getCount:()=>t(C).length});const _=()=>{if(!u)return;const R=u.getVirtualItems(),x=u.getTotalSize();v(g,[...R],!0),v(b,x,!0)},T=u.subscribe(_);return requestAnimationFrame(()=>{_(),k=!0}),()=>{k=!1,u=null,T()}}}),ge(()=>{t(C),t(C).length,k&&u&&Xe(()=>{kt(m),u.refresh();const _=u.getVirtualItems(),T=u.getTotalSize();v(g,[..._],!0),v(b,T,!0)})});function z(_,T,R){const x={};if(_.render){const U=_.render(T,R);typeof U=="string"?x.contentHTML=U:U&&(x.contentAST=U)}return _.getValue&&(x.content=_.getValue(T,R)),e.cellRenderer&&_.id&&(x.useSnippet=!0),x.css=typeof _.cellCss=="string"?_.cellCss:_.onCellEdit?"relative":"px-8 py-4",_.css&&(x.css+=" "+_.css),x}function D(_){return typeof _.header=="function"?_.header():_.header}function M(_,T){return!e.selected||!e.isSelected?!1:e.isSelected(_,e.selected)}function K(_,T){e.onRowClick&&e.onRowClick(_,T)}var G=Ei(),ee=q(G),Te=q(ee),L=q(Te);ye(L,21,()=>t(y).level1,Ae,(_,T)=>{var R=pi();let x;var U=q(R),ce=q(U,!0);F(U),F(R),$((X,de)=>{x=fe(R,1,`vtable-header-cell ${(t(T).headerCss||"")??""}`,"svelte-1kfim0d",x,{hsc:(t(T).subcols||[]).length>0}),xe(R,X),qe(R,"colspan",t(T)._colspan||1),qe(R,"rowspan",t(T)._colspan?1:t(y).hasSubcols?2:1),me(ce,de)},[()=>t(T).headerStyle?Object.entries(t(T).headerStyle).map(([X,de])=>`${X}: ${de}`).join("; "):"",()=>D(t(T))]),H(_,R)}),F(L);var i=le(L);{var Q=_=>{var T=Ti();ye(T,21,()=>t(y).level2,Ae,(R,x)=>{var U=bi(),ce=q(U),X=q(ce,!0);F(ce),F(U),$((de,ve)=>{fe(U,1,`vtable-header-cell ${(t(x).headerCss||"")??""}`,"svelte-1kfim0d"),xe(U,de),me(X,ve)},[()=>t(x).headerStyle?Object.entries(t(x).headerStyle).map(([de,ve])=>`${de}: ${ve}`).join("; "):"",()=>D(t(x))]),H(R,U)}),F(T),H(_,T)};j(i,_=>{t(y).hasSubcols&&_(Q)})}F(Te);var O=le(Te),pe=q(O);{var je=_=>{var T=wi(),R=q(T),x=q(R),U=q(x,!0);F(x),F(R),F(T),$(()=>{qe(R,"colspan",t(y).flatColumns.length),me(U,d())}),H(_,T)},Oe=_=>{var T=oe(),R=te(T);ye(R,19,()=>t(g),x=>`${x.index}-${t(m)}`,(x,U,ce)=>{const X=ie(()=>t(g)[0]?.start||0),de=ie(()=>t(ce)===t(g).length-1),ve=ie(()=>t(b)-(t(g)[0]?.size||l())*t(g).length),ne=ie(()=>t(C)[t(U).index]);var Ge=oe(),_e=te(Ge);{var it=Ee=>{const nt=ie(()=>M(t(ne),t(U).index));var ke=Ii(),Ce=te(ke);let Ye;Ce.__click=()=>K(t(ne),t(U).index),ye(Ce,23,()=>t(y).flatColumns,(we,N)=>`${N}_${e.filterText||""}`,(we,N)=>{const o=ie(()=>z(t(N),t(ne),t(U).index));var p=Si();p.__click=V=>{t(N).onCellEdit&&V.stopPropagation()};var B=q(p);{var P=V=>{{let E=ie(()=>t(N).render?()=>t(N).render?.(t(ne),t(U).index):void 0);Gt(V,{get contentClass(){return t(N).css},get inputClass(){return t(N).inputCss},getValue:()=>t(o).content,get render(){return t(E)},onChange:W=>{t(N).onCellEdit?.(t(ne),W)}})}},Z=V=>{var E=oe(),W=te(E);{var ae=ue=>{_i(ue,{get options(){return t(N).cellOptions},keyId:"",keyName:"",onChange:se=>{t(N).onCellSelect?.(t(ne),se)}})},he=ue=>{var se=oe(),Se=te(se);{var Ve=Re=>{var Fe=oe(),rt=te(Fe);vt(rt,()=>e.cellRenderer,()=>t(ne),()=>t(N),()=>t(o).content,()=>t(U).index),H(Re,Fe)},pt=Re=>{var Fe=oe(),rt=te(Fe);{var bt=Le=>{_t(Le,{get elements(){return t(o).contentAST}})},Tt=Le=>{var ot=oe(),wt=te(ot);{var yt=Be=>{var Ue=oe(),st=te(Ue);Dt(st,()=>t(o).contentHTML),H(Be,Ue)},Ct=Be=>{var Ue=oe(),st=te(Ue);{var xt=ze=>{var Ne=oe(),St=te(Ne);ye(St,17,()=>At(t(o).content,t(S)),Ae,(Mt,lt)=>{var Je=yi();let ct;var It=q(Je,!0);F(Je),$(()=>{ct=fe(Je,1,"svelte-1kfim0d",null,ct,{_2:t(lt).highl}),me(It,t(lt).text)}),H(Mt,Je)}),H(ze,Ne)},Ht=ze=>{var Ne=We();$(()=>me(Ne,t(o).content)),H(ze,Ne)};j(st,ze=>{e.filterText&&t(N).highlight?ze(xt):ze(Ht,!1)})}H(Be,Ue)};j(wt,Be=>{t(o).contentHTML?Be(yt):Be(Ct,!1)},!0)}H(Le,ot)};j(rt,Le=>{t(o).contentAST?Le(bt):Le(Tt,!1)},!0)}H(Re,Fe)};j(Se,Re=>{t(o).useSnippet&&e.cellRenderer?Re(Ve):Re(pt,!1)},!0)}H(ue,se)};j(W,ue=>{t(N).onCellSelect?ue(ae):ue(he,!1)},!0)}H(V,E)};j(B,V=>{t(N).onCellEdit?V(P):V(Z,!1)})}var A=le(B,2);{var Y=V=>{var E=Hi(),W=q(E);{var ae=se=>{var Se=Ci();Se.__click=Ve=>{Ve.stopPropagation(),t(N).buttonEditHandler?.(t(ne))},H(se,Se)};j(W,se=>{t(N).buttonEditHandler&&se(ae)})}var he=le(W,2);{var ue=se=>{var Se=xi();Se.__click=Ve=>{Ve.stopPropagation(),t(N).buttonDeleteHandler?.(t(ne))},H(se,Se)};j(he,se=>{t(N).buttonDeleteHandler&&se(ue)})}F(E),H(V,E)};j(A,V=>{(t(N).buttonEditHandler||t(N).buttonDeleteHandler)&&V(Y)})}F(p),$(V=>{fe(p,1,t(o).css,"svelte-1kfim0d"),xe(p,V)},[()=>t(N).cellStyle?Object.entries(t(N).cellStyle).map(([V,E])=>`${V}: ${E}`).join("; "):""]),H(we,p)}),F(Ce);var He=le(Ce,2);{var De=we=>{var N=Mi();$(()=>xe(N,`height: ${t(ve)??""}px; visibility: hidden;`)),H(we,N)};j(He,we=>{t(de)&&we(De)})}$(()=>{Ye=fe(Ce,1,"vtable-row svelte-1kfim0d",null,Ye,{"vtable-row-even":t(U).index%2===0,"vtable-row-odd":t(U).index%2!==0,"vtable-row-selected":t(nt)}),xe(Ce,`transform: translateY(${t(X)??""}px);`)}),H(Ee,ke)};j(_e,Ee=>{t(ne)&&Ee(it)})}H(x,Ge)}),H(_,T)};j(pe,_=>{t(C).length===0?_(je):_(Oe,!1)})}F(O),F(ee),F(G),Ie(G,_=>v(r,_),()=>t(r)),$(()=>{fe(G,1,`vtable-container ${a()??""}`,"svelte-1kfim0d"),xe(G,`max-height: ${n()??""}; overflow: auto;`),fe(ee,1,`vtable ${c()??""}`,"svelte-1kfim0d")}),H(f,G),et()}tt(["click"]);export{Wi as V};
