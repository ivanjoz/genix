import{a as c,k as U,c as o,d as H,g as h,b as l,i as n,r as L,e as O,t as x,o as A,f as Q}from"./web-n9SrCLWm.js";import{c as R,w as q,S as B,t as z,f as G,a as p,P as J,N as v,L as b}from"./app-CxTCLAtU.js";import{D as $}from"./Datepicker-CClIS149.js";import{Q as K}from"./QTable-BpZD-x6b.js";import{u as W,c as X,g as Y}from"./ventas-B3c_tsgO.js";var Z=x('<div class="flex ai-center jc-between mb-06"><div class="flex ai-center w100-10"><!$><!/><!$><!/><!$><!/><button class="bn1 b-blue ml-10"><i class=icon-search></i></button></div><div class="search-c4 mr-16 w14rem ml-auto"><div><i class=icon-search></i></div><input class=w100 autocomplete=off type=text>'),ee=x("<span>");function ne(){const m=R(X,"id"),u=q.getFechaUnix(),C=u-7,[t,_]=c({fechaFin:u,fechaInicio:C}),[s]=W(),[j,S]=c([]),[w,M]=c(""),F=async()=>{const e=t();if(console.log("form::",e),!e.CajaID||!e.fechaInicio||!e.fechaFin){v.failure("Debe seleccionar una caja y un rango de fechas.");return}b.standard("Consultando registros...");let a;try{a=await Y(e)}catch(i){v.failure(i);return}b.remove(),S(a),console.log("movimientos obtenidos: ",a)};return U(A(()=>[s()],()=>{(s()?.Cajas||[]).length>0&&_({...t(),CajaID:s().Cajas[0].ID})})),o(J,{title:"Almacén Stock",get children(){return[(()=>{var e=h(Z),a=e.firstChild,i=a.firstChild,[g,T]=l(i.nextSibling),y=g.nextSibling,[f,k]=l(y.nextSibling),I=f.nextSibling,[d,D]=l(I.nextSibling),N=d.nextSibling,P=a.nextSibling,E=P.firstChild,V=E.nextSibling;return a.style.setProperty("max-width","64rem"),n(a,o(B,{get saveOn(){return t()},save:"CajaID",css:"w-08x mb-02 mr-12",label:"Cajas & Bancos",keys:"ID.Nombre",get options(){return s()?.Cajas||[]},placeholder:"",required:!0,onChange:r=>{}}),g,T),n(a,o($,{label:"Fecha Inicio",css:"w-045x",save:"fechaInicio",get saveOn(){return t()}}),f,k),n(a,o($,{label:"Fecha Fin",css:"w-045x",save:"fechaFin",get saveOn(){return t()}}),d,D),N.$$click=r=>{r.stopPropagation(),F()},V.$$keyup=r=>{r.stopPropagation(),z(()=>{M((r.target.value||"").toLowerCase().trim())},150)},L(),e})(),o(K,{get data(){return j()},css:"w100",tableCss:"w-page-t w100",maxHeight:"calc(100vh - 8rem - 12px)",makeFilter:e=>[m.get(e.Tipo)?.name||"",e.Usuario?.usuario].join(" "),get filterText(){return w()},columns:[{header:"Fecha Hora",getValue:e=>G(e.Created,"d-M h:n")},{header:"Tipo Mov.",getValue:e=>m.get(e.Tipo)?.name||""},{header:"Monto",css:"ff-mono t-r",render:e=>(()=>{var a=h(ee);return n(a,()=>p(e.Monto/100,2)),O(()=>Q(a,e.Monto<0?"c-red":"")),a})()},{header:"Saldo Final",css:"ff-mono t-r",getValue:e=>p(e.SaldoFinal/100,2)},{header:"Nº Documento",getValue:e=>""},{header:"Usuario",css:"t-c",getValue:e=>e.Usuario?.usuario||""}]})]}})}H(["click","keyup"]);export{ne as default};
