import{u as L,c as W,i as q,j as G,p as H,k as J,P as K,l as D,_ as Q,s as U,n as A,I as X}from"./app-De9iPHfG.js";import{a as h,g as Y,c as p,d as Z,f as u,i as d,F as B,b as v,s as I,t as f,e as g}from"./web-D2t8vN-4.js";const k="_webpage_dev_card_1k9d5_1",x="_cms_editable_card_selected_1k9d5_5",E="_cms_editable_card_1k9d5_5",N="_cms_card_buttons_1k9d5_15",w="_cms_card_button_1k9d5_15",O="_cs1_1k9d5_27",R="_seccion_card_1k9d5_36",ee={webpage_dev_card:k,cms_editable_card_selected:x,cms_editable_card:E,cms_card_buttons:N,cms_card_button:w,cs1:O,seccion_card:R},te=Object.freeze(Object.defineProperty({__proto__:null,cms_card_button:w,cms_card_buttons:N,cms_editable_card:E,cms_editable_card_selected:x,cs1:O,default:ee,seccion_card:R,webpage_dev_card:k},Symbol.toStringTag,{value:"Module"}));var ne=f('<div class="h100 p-rel cms-1">'),P=f("<div>"),ae=f("<div>Seleccione una sección para editar su contenido."),se=f("<div>--"),ce=f('<div><div><i class="icon-plus h6"></i>Sección</div><div>'),oe=f("<i class=icon-up-1>"),re=f("<i class=icon-down-1>");const[pe,ue]=h({}),M=new Map,le=r=>{if(M.size===0)for(let c of D)M.set(c.type,c);return M.get(r)};function me(){const r=L(),[c,s]=h(H),[l,m]=h(),[a,S]=h([]),b=W(Object.values(G),"id"),$=q();Y(()=>{Q(()=>Promise.resolve().then(()=>te),void 0),U(!1),console.log("params::",$.webpage),console.log("location:: ",r.pathname)});const T=(t,e)=>{const n=[],i={type:1,content:"demo",title:"demo"},o=c();console.log("args sections::",t,e);debugger;for(let _=0;_<o.length;_++)e===1&&t===_&&n.push(i),n.push(o[_]),e===2&&t===_&&n.push(i);console.log("nuevas seccciones::",n),s(n)},j=(t,e)=>{let n=!1;if((t===c().length-1&&e===2||t===0&&e===1)&&(n=!0),n)return;const i=c()[t],o=c().filter(_=>_!==i);e===1?t--:e===2&&t++,o.splice(t,0,i),s(o)},z=t=>{const e=[];for(const n of c())n.id===t.id?e.push(t):e.push(n);m(t),s(e)};return p(K,{title:"Webpage",class:"",views:[[1,"Constructor"],[2,"Secciones"]],pageStyle:{display:"grid","grid-template-columns":"1.1fr 4fr",padding:"0","background-color":"white"},get children(){return[u(()=>u(()=>A()===1)()&&(()=>{var t=P();return d(t,(()=>{var e=u(()=>!l());return()=>e()&&ae()})(),null),d(t,p(B,{get each(){return a()},children:e=>e.type===1?p(X,{css:"mb-10",inputCss:"s5",get label(){return e.name},save:"content",saveOn:e,onChange:()=>{console.log(e.content);const n={...l()};n[e.key]=e.content,z(n)}}):se()}),null),v(()=>g(t,`h100 px-08 py-08 p-rel flex-column ${k}`)),t})()),u(()=>u(()=>A()===2)()&&(()=>{var t=P();return d(t,()=>D.map(e=>{const n=u(()=>l()?.type===e.type);return p(ie,{params:e,get isSelected(){return n()},onSelect:()=>{if(l()){const i={...l()};i.type=e.type,z(i)}}})})),v(()=>g(t,`h100 px-08 py-08 p-rel flex-column ${k}`)),t})()),(()=>{var t=ne();return t.style.setProperty("overflow","auto"),t.style.setProperty("max-height","calc(100vh - var(--header-height))"),t.style.setProperty("padding","2px"),t.style.setProperty("z-index","999"),t.style.setProperty("margin-left","-2px"),d(t,p(B,{get each(){return c()},children:(e,n)=>{const i=()=>{let o=`p-rel w100 ${E}`;return l()?.id===e.id&&(o+=` ${x}`),o};return e.marginTop&&(e.marginTop=void 0),e.marginBottom&&(e.marginBottom=void 0),(()=>{var o=P();return o.$$click=_=>{_.stopPropagation(),m(e);const C=[];for(const F of le(e.type)?.params||[]){const y={...b.get(F.id)};e[y.key]&&(y.content=e[y.key]),C.push(y)}console.log("params a renderizar::",C),S(C)},d(o,p(V,{mode:1,onAddSeccion:()=>T(n(),1),onMoveSeccion:()=>j(n(),1)}),null),d(o,p(J,{args:e,get type(){return e.type}}),null),d(o,p(V,{mode:2,onAddSeccion:()=>T(n(),2),onMoveSeccion:()=>j(n(),2)}),null),v(()=>g(o,i())),o})()}})),t})()]}})}const V=r=>{const c={};return r.mode===1&&(c.top="0"),r.mode===2&&(c.bottom="0"),(()=>{var s=ce(),l=s.firstChild,m=l.nextSibling;return I(s,c),l.$$click=a=>{a.stopPropagation(),r.onAddSeccion()},m.$$click=a=>{a.stopPropagation(),r.onMoveSeccion()},d(m,(()=>{var a=u(()=>r.mode===1);return()=>a()&&oe()})(),null),d(m,(()=>{var a=u(()=>r.mode===2);return()=>a()&&re()})(),null),v(a=>{var S=`flex p-abs ${N}`,b=`flex ai-center p-rel ff-bold mr-06 ${w}`,$=`flex ai-center p-rel ff-bold mr-06 ${w} ${O}`;return S!==a.e&&g(s,a.e=S),b!==a.t&&g(l,a.t=b),$!==a.a&&g(m,a.a=$),a},{e:void 0,t:void 0,a:void 0}),s})()},ie=r=>{const c=()=>{let s=`mt-04 mb-04 ${R}`;return r.isSelected&&(s+=" selected"),s};return(()=>{var s=P();return s.$$click=l=>{l.stopPropagation(),r.onSelect()},d(s,()=>r.params.name),v(()=>g(s,c())),s})()};Z(["click"]);export{me as default,pe as pageViews,ue as setPageViews};
