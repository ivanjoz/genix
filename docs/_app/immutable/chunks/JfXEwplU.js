import"./DsnmJJEf.js";import{p as st,l as rt,h as _,x as dt,a as lt,b as w,d as ct,e as re,f as z,c as r,s as i,r as d,i as a,t as T,m as vt,u as M}from"./Bf0lWsRu.js";import{s as P}from"./WwA8pLij.js";import{i as de}from"./D7jGWfSg.js";import{e as ee,i as te}from"./CA0Nq6W4.js";import{r as Ee,s as Ve,a as Ke}from"./BWVkWQLM.js";import{s as g,c as B}from"./C7iUW-It.js";import{d as ut,e as ae}from"./Cu2BEfFs.js";import{b as Be}from"./CPRIj_W5.js";import{p as H}from"./DEnCy23-.js";import{s as b}from"./BMRmn4k7.js";var _t=z('<div class="dp-col text-center flex items-center justify-center text-[13px] ff-bold DateInput_1m5izqo"> </div>'),mt=z('<div class="ln-today DateInput_1m5izqo"></div>'),ft=z("<div> <!></div>"),pt=z('<div class="flex"><div class="dp-week text-[13px] ff-bold text-center flex items-center justify-center c-purple DateInput_1m5izqo"> </div> <!></div>'),ht=z('<div class="date-picker-c DateInput_1m5izqo"><div class="flex justify-between items-center mb-[2px]"><div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">«</div> <div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">‹</div> <div class="bn-d2 flex items-center justify-center DateInput_1m5izqo"><div class="mr-[4px]"> </div> <div> </div></div> <div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">›</div> <div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">»</div></div> <div class="flex"><div class="dp-week base text-[13px] ff-bold c-purple DateInput_1m5izqo"></div> <!></div> <!></div>'),gt=z('<div><div><div></div></div> <div> </div> <div><div></div></div> <div><div></div></div> <div><div><div></div></div> <input type="text"/></div> <!></div>'),xt=z('<div class="dp-col text-center flex items-center justify-center text-[13px] ff-bold DateInput_1m5izqo"> </div>'),Dt=z('<div class="ln-today DateInput_1m5izqo"></div>'),yt=z("<div> <!></div>"),wt=z('<div class="flex"><div class="dp-week text-[13px] ff-bold text-center flex items-center justify-center c-purple DateInput_1m5izqo"> </div> <!></div>'),bt=z('<div class="date-picker-c DateInput_1m5izqo"><div class="flex justify-between items-center mb-[2px]"><div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">«</div> <div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">‹</div> <div class="bn-d2 flex items-center justify-center DateInput_1m5izqo"><div class="mr-[4px]"> </div> <div> </div></div> <div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">›</div> <div class="h2 bn-d1 flex items-center justify-center DateInput_1m5izqo">»</div></div> <div class="flex"><div class="dp-week base text-[13px] ff-bold c-purple DateInput_1m5izqo"></div> <!></div> <!></div>'),It=z('<div><div><div></div></div> <div><div><div></div></div> <input type="text"/></div> <!></div>');function Ct(He,u){st(u,!0);let J=H(u,"saveOn",15),be=H(u,"label",3,""),le=H(u,"css",3,""),Ie=H(u,"inputCss",3,""),ke=H(u,"placeholder",3,"DD-MM-YYYY");H(u,"required",3,!1);let ze=H(u,"disabled",3,!1);H(u,"type",3,"unix");const qe=[{n:1,name:"LU"},{n:2,name:"MA"},{n:3,name:"MI"},{n:4,name:"JU"},{n:5,name:"VI"},{n:6,name:"SA"},{n:7,name:"DO"}],Je=[{n:1,name:"Enero"},{n:2,name:"Febrero"},{n:3,name:"Marzo"},{n:4,name:"Abril"},{n:5,name:"Mayo"},{n:6,name:"Junio"},{n:7,name:"Julio"},{n:8,name:"Agosto"},{n:9,name:"Septiembre"},{n:10,name:"Octubre"},{n:11,name:"Noviembre"},{n:12,name:"Diciembre"}],We=new Map(Je.map(e=>[e.n,e])),W=new Date,ce=W.getTimezoneOffset()*60,Me=Math.floor((W.getTime()-ce*1e3)/864e5),Pe=W.getFullYear()*100+(W.getMonth()+1);let A=re(Pe),ve=re(0),S=re(0),N=re(!1),ne=re(""),f=!1,q;const Se=e=>{const t=String(e),n=parseInt(t.substring(0,4)),o=parseInt(t.substring(4,6));return{name:We.get(o)?.name||"-",year:n,month:o}},Le=e=>{const t=new Date(e),n=t.getDay(),o=(n===0?-6:1)-n;return t.setDate(t.getDate()+o),t.setHours(0,0,0,0),t},Ge=e=>{const t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const n=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-n.getTime())/864e5+1)/7)},Qe=e=>{const t=new Date(e);return t.setDate(t.getDate()+4-(t.getDay()||7)),t.getFullYear()},Fe=M(()=>{let e;if(a(A)){const{year:p,month:I}=Se(a(A));e=new Date(p,I-1,1,0,0,0)}else e=new Date;const t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),o=e.getMonth();let m=Le(t);const s=[];for(;m.getTime()<=n.getTime();){const p=m.getTime(),I=Math.floor((p-ce*1e3)/864e5),y=Qe(m),c=Ge(m),h=[];for(let F=0;F<7;F++){const x=new Date(p+864e5*F),j=I+F,U=x.getDate(),L=x.getFullYear()*100+(x.getMonth()+1);h.push({date:x,fechaUnix:j,day:U,month:L})}s.push({year:y,week:c,weekDays:h,monthCurrent:o}),m=new Date(p+864e5*7)}return s}),ie=M(()=>Se(a(A))),O=e=>{const t=a(ie),n=new Date(t.year,t.month-1,1,0,0,0);n.setMonth(n.getMonth()+e);const o=n.getFullYear()*100+(n.getMonth()+1);_(A,o),q?.focus()},Re=e=>{if(!e)return"";const t=e*86400+ce,n=new Date(t*1e3),o=String(n.getDate()).padStart(2,"0"),m=String(n.getMonth()+1).padStart(2,"0"),s=n.getFullYear();return`${o}-${m}-${s}`},je=e=>{e=e.trim().substring(0,10).replaceAll("/","-");const t=String(W.getFullYear()),n=e.split("-").filter(h=>h);let o=isNaN(n[0])?0:parseInt(n[0]),m=isNaN(n[1])?0:parseInt(n[1]),s=n[2]||"";if(s.length!==4)for(let h=0;h<t.length;h++)s[h]||(s+=t[h]);let p=isNaN(s)?0:parseInt(s);const I=o&&m&&s.length===4;let y=0,c=null;return o&&(m||(m=W.getMonth()+1),p||(p=W.getFullYear()),c=new Date(p,m-1,o,0,0,0),c.getTime?y=Math.floor((c.getTime()-ce*1e3)/864e5):c=null),{isCompleted:I,fechaUnixAutocomplated:y,fechaAutocomplated:c,day:o,month:m,year:p}},Te=e=>{const t=je(e);if(t.fechaAutocomplated){const n=t.fechaAutocomplated.getFullYear()*100+(t.fechaAutocomplated.getMonth()+1);_(A,n),_(S,t.fechaUnixAutocomplated,!0)}else _(S,0)},fe=e=>{vt(()=>{u.save&&J()&&J(J()[u.save]=e,!0)}),_(ve,e,!0)},Ue=new Set(["1","2","3","4","5","6","7","8","9","0","-","/"]),Xe=new Set([...Ue,"Backspace","Control","c","v","x","Tab"]);let pe;const Ze=(e,t)=>{pe&&clearTimeout(pe),pe=setTimeout(e,t)},Ye=e=>{Xe.has(e.key)||e.preventDefault()},Ce=e=>{e.stopPropagation();let t=e.target.value,n="";for(let o of t)Ue.has(o)&&(n+=o);t!==n&&(e.target.value=n),_(ne,n,!0),Ze(()=>{Te(n)},150)},Ae=e=>{e.stopPropagation(),_(N,!0)},Ne=e=>{if(e.stopPropagation(),f){f=!1;return}if(_(N,!1),a(S)!==0){const t=(e.target.value||"").trim(),n=je(t);t.length===10&&n.isCompleted?(fe(n.fechaUnixAutocomplated),u.onChange&&u.onChange()):(e.target.value="",u.save&&J()&&delete J()[u.save]),_(S,0)}};rt(()=>{if(J()&&u.save){const e=J()[u.save];if(e){const t=Re(e);Te(t),_(ne,t,!0),q&&(q.value=t)}else _(ne,""),q&&(q.value=""),_(A,Pe);_(ve,e||0,!0)}});let $e=M(()=>`${b.input} relative date-input-container`+(le()?" "+le():""));var Oe=dt(),et=lt(Oe);{var tt=e=>{var t=gt(),n=r(t),o=i(n,2),m=r(o,!0);d(o);var s=i(o,2),p=i(s,2),I=i(p,2),y=r(I),c=i(y,2);Ee(c),c.__keydown=Ye,c.__keyup=Ce,Be(c,x=>q=x,()=>q),d(I);var h=i(I,2);{var F=x=>{var j=ht(),U=r(j),L=r(U);L.__mousedown=v=>{v.stopPropagation(),f=!0},L.__click=v=>{v.stopPropagation(),O(-12)};var X=i(L,2);X.__mousedown=v=>{v.stopPropagation(),f=!0},X.__click=v=>{v.stopPropagation(),O(-1)};var oe=i(X,2),G=r(oe),ue=r(G,!0);d(G);var Z=i(G,2),he=r(Z,!0);d(Z),d(oe);var se=i(oe,2);se.__mousedown=v=>{v.stopPropagation(),f=!0},se.__click=v=>{v.stopPropagation(),O(1)};var l=i(se,2);l.__mousedown=v=>{v.stopPropagation(),f=!0},l.__click=v=>{v.stopPropagation(),O(12)},d(U);var E=i(U,2),Y=i(r(E),2);ee(Y,17,()=>qe,te,(v,$)=>{var C=_t(),k=r(C,!0);d(C),T(()=>P(k,a($).name)),w(v,C)}),d(E);var Q=i(E,2);ee(Q,17,()=>a(Fe),te,(v,$)=>{var C=pt(),k=r(C),ge=r(k,!0);d(k);var xe=i(k,2);ee(xe,17,()=>a($).weekDays,te,(De,V)=>{const K=M(()=>a(V).month!==a(A)),_e=M(()=>a(V).fechaUnix===a(ve)),ye=M(()=>a(V).fechaUnix===a(S)),we=M(()=>Me===a(V).fechaUnix);var D=ft();D.__click=R=>{R.stopPropagation(),fe(a(V).fechaUnix),_(N,!1),_(S,0),f=!1,u.onChange&&u.onChange()},D.__mousedown=R=>{f=!0,R.stopPropagation()};var me=r(D),nt=i(me);{var it=R=>{var ot=mt();w(R,ot)};de(nt,R=>{a(we)&&R(it)})}d(D),T(()=>{g(D,1,`relative dp-day text-center flex items-center justify-center ${a(K)?"is-out":""} ${a(_e)?"selected":""} ${a(ye)?"focused":""}`,"DateInput_1m5izqo"),P(me,`${a(V).day??""} `)}),w(De,D)}),d(C),T(()=>P(ge,a($).week)),w(v,C)}),d(j),T(()=>{P(ue,a(ie).name),P(he,a(ie).year)}),ae("mouseleave",j,v=>{v.stopPropagation(),q!==document.activeElement&&(f=!1,_(N,!1),_(S,0))}),w(x,j)};de(h,x=>{a(N)&&x(F)})}d(t),T(()=>{g(t,1,B(a($e)),"DateInput_1m5izqo"),g(n,1,B(b.input_lab_cell_left),"DateInput_1m5izqo"),g(o,1,B(b.input_lab),"DateInput_1m5izqo"),P(m,be()),g(s,1,B(b.input_lab_cell_right),"DateInput_1m5izqo"),g(p,1,B(b.input_shadow_layer),"DateInput_1m5izqo"),g(I,1,`${b.input_div} flex w-full`,"DateInput_1m5izqo"),g(y,1,B(b.input_div_1),"DateInput_1m5izqo"),g(c,1,`w-full ${b.input_inp} ff-mono ${(Ie()||"")??""}`,"DateInput_1m5izqo"),Ve(c,a(ne)),Ke(c,"placeholder",ke()),c.disabled=ze()}),ae("focus",c,Ae),ae("blur",c,Ne),w(e,t)},at=e=>{var t=It(),n=r(t),o=i(n,2),m=r(o),s=i(m,2);Ee(s),s.__keydown=Ye,s.__keyup=Ce,Be(s,y=>q=y,()=>q),d(o);var p=i(o,2);{var I=y=>{var c=bt(),h=r(c),F=r(h);F.__mousedown=l=>{l.stopPropagation(),f=!0},F.__click=l=>{l.stopPropagation(),O(-12)};var x=i(F,2);x.__mousedown=l=>{l.stopPropagation(),f=!0},x.__click=l=>{l.stopPropagation(),O(-1)};var j=i(x,2),U=r(j),L=r(U,!0);d(U);var X=i(U,2),oe=r(X,!0);d(X),d(j);var G=i(j,2);G.__mousedown=l=>{l.stopPropagation(),f=!0},G.__click=l=>{l.stopPropagation(),O(1)};var ue=i(G,2);ue.__mousedown=l=>{l.stopPropagation(),f=!0},ue.__click=l=>{l.stopPropagation(),O(12)},d(h);var Z=i(h,2),he=i(r(Z),2);ee(he,17,()=>qe,te,(l,E)=>{var Y=xt(),Q=r(Y,!0);d(Y),T(()=>P(Q,a(E).name)),w(l,Y)}),d(Z);var se=i(Z,2);ee(se,17,()=>a(Fe),te,(l,E)=>{var Y=wt(),Q=r(Y),v=r(Q,!0);d(Q);var $=i(Q,2);ee($,17,()=>a(E).weekDays,te,(C,k)=>{const ge=M(()=>a(k).month!==a(A)),xe=M(()=>a(k).fechaUnix===a(ve)),De=M(()=>a(k).fechaUnix===a(S)),V=M(()=>Me===a(k).fechaUnix);var K=yt();K.__click=D=>{D.stopPropagation(),fe(a(k).fechaUnix),_(N,!1),_(S,0),f=!1,u.onChange&&u.onChange()},K.__mousedown=D=>{f=!0,D.stopPropagation()};var _e=r(K),ye=i(_e);{var we=D=>{var me=Dt();w(D,me)};de(ye,D=>{a(V)&&D(we)})}d(K),T(()=>{g(K,1,`relative dp-day text-center flex items-center justify-center ${a(ge)?"is-out":""} ${a(xe)?"selected":""} ${a(De)?"focused":""}`,"DateInput_1m5izqo"),P(_e,`${a(k).day??""} `)}),w(C,K)}),d(Y),T(()=>P(v,a(E).week)),w(l,Y)}),d(c),T(()=>{P(L,a(ie).name),P(oe,a(ie).year)}),ae("mouseleave",c,l=>{l.stopPropagation(),q!==document.activeElement&&(f=!1,_(N,!1),_(S,0))}),w(y,c)};de(p,y=>{a(N)&&y(I)})}d(t),T(()=>{g(t,1,`${b.input} no-label relative date-input-container`+(le()?" "+le():""),"DateInput_1m5izqo"),g(n,1,B(b.input_shadow_layer),"DateInput_1m5izqo"),g(o,1,`${b.input_div} flex w-full`,"DateInput_1m5izqo"),g(m,1,B(b.input_div_1),"DateInput_1m5izqo"),g(s,1,`w-full ${b.input_inp} ff-mono ${(Ie()||"")??""}`,"DateInput_1m5izqo"),Ve(s,a(ne)),Ke(s,"placeholder",ke()),s.disabled=ze()}),ae("focus",s,Ae),ae("blur",s,Ne),w(e,t)};de(et,e=>{be()?e(tt):e(at,!1)})}w(He,Oe),ct()}ut(["keydown","keyup","mousedown","click"]);export{Ct as D};
