import"./DsnmJJEf.js";import{p as L,e as P,g as j,l as y,m as q,h as x,f as R,c as C,i as t,u as b,s as I,r as v,t as S,b as w,d as A}from"./CaHRSXkO.js";import{s as B}from"./CrFq4NBa.js";import{e as E,i as F}from"./cG-FGtBW.js";import{d as G}from"./EZdBy8tr.js";import{s as O,c as H}from"./ZZ_SO04P.js";import{p as m}from"./DdsaxoiY.js";import{S as J}from"./CcW3yA61.js";import{W as f}from"./6ShiOQ4x.js";var K=R('<div class="m-2 px-8 min-w-56 h-32 lh-10 flex _3 svelte-vrzsuu"> <button class="_4 absolute w-28 h-28 rounded right-2 svelte-vrzsuu" aria-label="eliminar"><i class="icon-trash"></i></button></div>'),Q=R("<div><!> <div></div></div>");function ae(N,e){L(e,!0);const i=m(e,"saveOn",15),T=m(e,"css",3,""),o=m(e,"options",19,()=>[]);let s=P(j([]));const l=()=>{if(f.has(o()))return;const a=new Map,r=new Map;for(const n of o())a.set(n[e.keyId],n),r.set(n[e.keyName].toLowerCase(),n);f.set(o(),{idToRecord:a,valueToRecord:r})};l(),y(()=>{o()?.length>0&&l()});const h=()=>{i()&&e.save&&i(i()[e.save]=t(s),!0),e.onChange&&e.onChange(t(s))};let g;y(()=>{i()&&e.save&&i()!==g&&(g=i(),l(),q(()=>{x(s,i()[e.save]||[],!0)}))});const z=a=>(f.get(o())?.idToRecord||new Map).get(a)||{[e.keyName]:`ID-${a}`,[e.keyId]:a};var c=Q(),k=C(c);{let a=b(()=>"s1 "+e.inputCss);J(k,{get options(){return o()},get keyId(){return e.keyId},get keyName(){return e.keyName},clearOnSelect:!0,get avoidIDs(){return t(s)},get placeholder(){return e.label},get css(){return t(a)},get optionsCss(){return e.optionsCss},onChange:r=>{if(!r)return;const n=r[e.keyId];t(s).includes(n)||(t(s).push(n),h())}})}var d=I(k,2);E(d,21,()=>t(s),F,(a,r)=>{const n=b(()=>z(t(r)));var u=K(),_=C(u),M=I(_);M.__click=D=>{D.stopPropagation(),x(s,t(s).filter(W=>W!==t(r)),!0),h()},v(u),S(()=>B(_,`${t(n)[e.keyName]??""} `)),w(a,u)}),v(d),v(c),S(()=>{O(c,1,H(T()),"svelte-vrzsuu"),O(d,1,`p-4 min-h-40 _2 flex flex-wrap ${e.cardCss??""}`,"svelte-vrzsuu")}),w(N,c),A()}G(["click"]);export{ae as S};
