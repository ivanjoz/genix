import"../chunks/DsnmJJEf.js";import{a as w}from"../chunks/BHthWC4L.js";import{p as _,at as I,f as k,d as i,t as z,b as C,c as E,a3 as x,s as o,a2 as P,r as l,k as L}from"../chunks/Du-3VwLa.js";import{d as N}from"../chunks/1RyHG_68.js";import{I as b}from"../chunks/B9EnRgQ8.js";import{N as c}from"../chunks/VsnTSXou.js";import{a as U}from"../chunks/CIgzKi8q.js";import{m as A,a as y,E as v,c as j}from"../chunks/uY9SMk4J.js";async function K(a){let r;a.CipherKey=A(32);try{r=await U({data:a,route:"p-user-login",apiName:"MAIN",headers:{"Content-Type":"application/json"}})}catch(e){return console.log(e),{error:e}}let s="";try{await y.parseAccesos(r,a.CipherKey),y.checkAcceso(1)?v.navigate("/"):v.clearAccesos?.()}catch(e){console.log("error encriptando::"),console.log(e)}return console.log(s),{result:r}}var M=k('<div class="relative"><img class="bg-image-1 svelte-1x05zx6" src="/images/background-1.webp" alt=""/> <div class="flex items-center h-screen login-bg-c1 relative svelte-1x05zx6"><div class="login-bg-1 w-full svelte-1x05zx6"><div class="login-tt flex items-center text-xl svelte-1x05zx6">Iniciar Sesión</div> <div class="login-logo-c relative mb-2 svelte-1x05zx6"><img class="w-full h-full svelte-1x05zx6" src="/images/genix_logo.svg" alt="Genix Logo"/></div> <div class="flex justify-center items-center text-xl font-semibold text-[#686caa] mb-4">Gestor Empresarial en la Nube para MyPes</div> <!> <!> <div class="flex w-full justify-center items-center mt-[1.4rem]"><button class="bn1 big d-blue svelte-1x05zx6"><i class="icon-login"></i> Ingresar</button></div></div></div></div>');function B(a,r){_(r,!0);let s=I({Usuario:"",Password:"",EmpresaID:1,CipherKey:""}),e=P(!1);const h=async()=>{if(s.Usuario.length<4||s.Password.length<4){c.failure("Debe proporcionar un usuario y una contraseña válidos");return}x(e,!0),c.info("Enviando Credenciales...");const t=await K(s);console.log(t),x(e,!1),t.error&&c.failure("Error al iniciar sesión")};w(()=>{j()===2&&v.navigate("/")});var n=M(),g=o(i(n),2),u=i(g),d=o(i(u),6);b(d,{required:!0,css:"mb-12 w-full text-lg",label:"Usuario",get saveOn(){return s},save:"Usuario",type:"text"});var m=o(d,2);b(m,{required:!0,css:"mb-12 w-full text-lg",label:"Contraseña",get saveOn(){return s},save:"Password",type:"password"});var p=o(m,2),f=i(p);f.__click=t=>{t.stopPropagation(),h()},l(p),l(u),l(g),l(n),z(()=>f.disabled=L(e)),C(a,n),E()}N(["click"]);export{B as component};
