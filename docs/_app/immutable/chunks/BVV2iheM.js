import"./DsnmJJEf.js";import{p as H,l as z,i as n,e as k,h as L,f as N,c as C,r as R,b as S,d as T,aw as U,g as B,at as O,x as j,a as F,s as G,t as q,u as A}from"./CaHRSXkO.js";import{s as W}from"./EZdBy8tr.js";import{i as D}from"./BLuAT40e.js";import{s as V,d as I,c as J,b as K}from"./ZZ_SO04P.js";import{b as X}from"./D1kHjzM_.js";import{p as b}from"./DdsaxoiY.js";import{a as Q}from"./DP6SISrU.js";import{a as Z}from"./CZSWOYhl.js";var $=N('<div style="position: absolute; top: 0; left: 0; z-index: 300;"><!></div>');function tt(x,o){H(o,!0);let p=b(o,"target",3,void 0),t=k(null),u=k(null);z(()=>{if(!n(t))return;const i=p()||document.body;return L(u,i,!0),i.appendChild(n(t)),()=>{n(t)&&n(t).parentNode&&n(t).parentNode.removeChild(n(t))}});var w=$(),e=C(w);W(e,()=>o.children??U),R(w),X(w,i=>L(t,i),()=>n(t)),S(x,w),T()}function et(x,o,p={}){const{offset:t=8,preferredPlacement:u="bottom",fitViewport:w=!0}=p,e=x.getBoundingClientRect(),i=o.getBoundingClientRect(),m=window.innerWidth,d=window.innerHeight,v=window.scrollX||window.pageXOffset,_=window.scrollY||window.pageYOffset,s={top:e.top,bottom:d-e.bottom,left:e.left,right:m-e.right},f={top:s.top>=i.height+t,bottom:s.bottom>=i.height+t,left:s.left>=i.width+t,right:s.right>=i.width+t},h=u.split("-")[0];let a=u,r=h;f[h]||(h==="bottom"||h==="top"?h==="bottom"&&f.top?r="top":h==="top"&&f.bottom?r="bottom":f.right?r="right":f.left?r="left":r=s.bottom>=s.top?"bottom":"top":h==="right"&&f.left?r="left":h==="left"&&f.right?r="right":f.bottom?r="bottom":f.top?r="top":r=s.right>=s.left?"right":"left",a=r);let c=0,l=0;switch(r){case"bottom":c=e.bottom+t,l=e.left+e.width/2-i.width/2;break;case"top":c=e.top-i.height-t,l=e.left+e.width/2-i.width/2;break;case"right":c=e.top+e.height/2-i.height/2,l=e.right+t;break;case"left":c=e.top+e.height/2-i.height/2,l=e.left-i.width-t;break}if(u.includes("-")){const g=u.split("-")[1];r==="top"||r==="bottom"?g==="start"?l=e.left:g==="end"&&(l=e.right-i.width):g==="start"?c=e.top:g==="end"&&(c=e.bottom-i.height)}if(c+=_,l+=v,w){const g=t+v,P=m-i.width-t+v,M=t+_,Y=d-i.height-t+_;l=Math.max(g,Math.min(l,P)),c=Math.max(M,Math.min(c,Y))}const y=d-t*2,E=m-t*2;return{top:Math.round(c),left:Math.round(l),placement:a,maxHeight:y,maxWidth:E}}var ot=N('<div><!> <div><img alt=""/></div></div>');function dt(x,o){H(o,!0);let p=b(o,"open",3,!1),t=b(o,"placement",3,"bottom"),u=b(o,"offset",3,8),w=b(o,"fitViewport",3,!0),e=b(o,"class",3,""),i=b(o,"style",3,""),m=k(null),d=k(B({top:0,left:0,placement:t()}));z(()=>{p()&&o.referenceElement&&n(m)&&(console.log("referenceElement",o.referenceElement),v())}),z(()=>{if(!p())return;const a=()=>{p()&&o.referenceElement&&n(m)&&v()};return window.addEventListener("scroll",a,!0),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a,!0),window.removeEventListener("resize",a)}});async function v(){if(!o.referenceElement||!n(m))return;await O();const a=et(o.referenceElement,n(m),{offset:u(),preferredPlacement:t(),fitViewport:w()});L(d,a,!0),o.onPositionUpdate&&o.onPositionUpdate(a)}const _=A(()=>()=>p()?`
			position: absolute;
			top: ${n(d).top}px;
			left: ${n(d).left}px;
			z-index: 210;
			${i()}
		`.trim():"display: none;");var s=j(),f=F(s);{var h=a=>{tt(a,{children:(r,c)=>{var l=ot(),y=C(l);W(y,()=>o.children??U);var E=G(y,2),g=C(E);V(g,1,"_5 w-24 h-24 top"),R(E),R(l),X(l,P=>L(m,P),()=>n(m)),q((P,M)=>{V(l,1,`${e()??""} ps-${n(d).placement??""}`),I(l,P),V(E,1,J(["absolute overflow-hidden h-18 flex justify-center w-full",n(d).placement==="bottom"&&"top-[-18px]",n(d).placement==="top"&&"bottom-[-18px] rotate-180"])),K(g,"src",M)},[()=>n(_)(),()=>Q(Z)]),S(r,l)},$$slots:{default:!0}})};D(f,a=>{p()&&a(h)})}S(x,s),T()}export{dt as P,tt as a};
