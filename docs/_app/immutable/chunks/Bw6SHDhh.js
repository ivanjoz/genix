import{e as a,g as i,i as c,h as p}from"./Bf0lWsRu.js";import{G as d,P as n}from"./CUNP7WoD.js";class g extends d{route="productos";useCache={min:5,ver:9};#s=a(i([]));get productos(){return c(this.#s)}set productos(s){p(this.#s,s,!0)}#t=a(i(new Map));get productosMap(){return c(this.#t)}set productosMap(s){p(this.#t,s,!0)}handler(s){console.log("productos result::",s);for(const t of s)t.Image=t.Images?.[0],t.CategoriasIDs=t.CategoriasIDs||[];this.productos=s.filter(t=>t.ss),this.productosMap=new Map(s.map(t=>[t.ID,t]))}constructor(){super(),this.fetch()}}const f=r=>n({data:r,route:"productos",refreshRoutes:["productos"]});class l extends d{route="listas-compartidas2";useCache={min:5,ver:6};#s=a(i([]));get Records(){return c(this.#s)}set Records(s){p(this.#s,s,!0)}#t=a(i(new Map));get RecordsMap(){return c(this.#t)}set RecordsMap(s){p(this.#t,s,!0)}#e=a(i(new Map));get ListaRecordsMap(){return c(this.#e)}set ListaRecordsMap(s){p(this.#e,s,!0)}get(s){return this.RecordsMap.get(s)}handler(s){console.log("result getted::",s),this.Records=[],this.ListaRecordsMap=new Map;for(const[t,u]of Object.entries(s)){const h=parseInt(t.split("_")[1]);for(const e of u)if(e.ss){if(this.Records.push(e),[1,2].includes(h)){const M=new Map((e.Images||[]).filter(o=>o).map(o=>[parseInt(o.split("-")[1]),o]));e.Images=[];for(const o of[1,2,3])e.Images.push(M.get(o)||"")}this.ListaRecordsMap.has(e.ListaID)?this.ListaRecordsMap.get(e.ListaID)?.push(e):this.ListaRecordsMap.set(e.ListaID,[e])}}this.RecordsMap=new Map(this.Records.map(t=>[t.ID,t]))}addNew(s){const t=this.ListaRecordsMap.get(s.ListaID)||[];t.unshift(s),this.ListaRecordsMap.set(s.ListaID,[...t]),this.ListaRecordsMap=new Map(this.ListaRecordsMap),this.RecordsMap.set(s.ID,s),this.Records.push(s)}constructor(s=[]){super(),s.length>0&&(this.route=`listas-compartidas2?ids=${s.join(",")}`),s&&this.fetch()}}const L=r=>n({data:r,route:"listas-compartidas",refreshRoutes:["listas-compartidas2"]}),I=[{id:1,name:"Color"},{id:2,name:"Talla"},{id:3,name:"Tamaño"},{id:4,name:"Forma"},{id:5,name:"Presentación"}];export{l as L,g as P,L as a,f as b,I as p};
