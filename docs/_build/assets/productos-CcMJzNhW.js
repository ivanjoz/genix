import{e as i,N as a,E as s}from"./main-CypfFe8I.js";import{m as d,G as c,P as n}from"./http-BThfyHi6.js";const p=()=>d({route:"productos",emptyValue:[],errorMessage:"Hubo un error al obtener los productos.",cacheSyncTime:1,mergeRequest:!0,useIndexDBCache:"productos"},o=>{console.log("result productos 1:: ",o);const r=o;for(let e of r.Records)e.Propiedades=e.Propiedades||[],e.Images?.length>0&&(e.Image=e.Images[e.Images.length-1]);return console.log("result productos:: ",r),r.productos=(r.Records||[]).filter(e=>e.ss>0),r.productosMap=i(r.productos,"ID"),r}),f=o=>n({data:o,route:"productos",refreshIndexDBCache:"productos"}),h=async o=>{let r=[];try{r=(await c({route:"productos-stock",emptyValue:[],errorMessage:"Hubo un error al obtener el stock.",cacheSyncTime:1,mergeRequest:!0,useIndexDBCache:"productos_stock",partition:{key:"AlmacenID",value:o,param:"almacen-id"}})).Records||[]}catch(e){a.failure(e)}return r},I=o=>n({data:o,route:"productos-stock",refreshIndexDBCache:"productos_stock"}),y=[{id:1,name:"Entrada Manual"},{id:2,name:"Salida Manual"}],g=async o=>{let r=`almacen-movimientos?almacen-id=${o.almacenID}`;if(!o.fechaInicio||!o.fechaFin)throw"No se encontrÃ³ una fecha de inicio o fin.";r+=`&fecha-hora-inicio=${o.fechaInicio*24*60*60+s.zoneOffset}`,r+=`&fecha-hora-fin=${(o.fechaFin+1)*24*60*60+s.zoneOffset}`;let e;try{e=await c({route:r,emptyValue:[],errorMessage:"Hubo un error al obtener los movimientos del almacÃ©n"})}catch(t){a.failure(t)}return e.Usuarios=e.Usuarios||[],e.Productos=e.Productos||[],e.Movimientos=e.Movimientos||[],e.Movimientos.sort((t,u)=>u.Created-t.Created),e};export{f as a,h as g,y as m,I as p,g as q,p as u};
