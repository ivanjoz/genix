import{p as ne,_ as se}from"./main-udiurNuS.js";import{d as q,t as m,i as _,c as y,a as ce,s as J,u as le}from"./web-B9EQUxsk.js";import{c as g,d as p,b as S,a as P,e as K,F as V}from"./solid-DoXAfIeo.js";import{I as z}from"./Input-CUgxELMd.js";import{u as ie,b as oe,s as _e,p as I,P as me}from"./app-BifxGjsW.js";import{componentsRenders as T,PageSectionRenderer as de}from"./page-B0PLAxnP.js";import{m as ue}from"./http-BWo7MeJm.js";import{h as ge,t as pe,P as ve,e as Q}from"./main-B7EV-6VH.js";import{I as fe,a as $e,b as he}from"./Uploaders-Bfkc23L7.js";import{s as F,M as be}from"./Modals-HMBQ8aj0.js";import"./store-DHPf-lLy.js";const ye=()=>ue({route:"galeria-images",emptyValue:[],errorMessage:"Hubo un error al obtener las sedes / almacenes.",cacheSyncTime:1,mergeRequest:!0,useIndexDBCache:"galeria_images"},r=>{const n=r.Records;return n.sort((s,a)=>a.upd-s.upd),n}),M="_webpage_dev_card_9pjch_1",R="_cms_editable_card_selected_9pjch_5",A="_cms_editable_card_9pjch_5",D="_cms_card_buttons_9pjch_15",k="_cms_card_button_9pjch_15",E="_cs1_9pjch_27",L="_seccion_card_9pjch_36",O="_btn_11_9pjch_54",U="_layer_11_9pjch_73",B="_layer_11a_9pjch_96",N="_cms_content_layer_9pjch_101",X="_image_galery_page_9pjch_110",Y="_image_upload_card_9pjch_115",G="_input_invisible_9pjch_125",Z="_image_selector_9pjch_134",ee="_image_selector_seleccione_9pjch_151",te="_image_selector_cambiar_9pjch_160",x={webpage_dev_card:M,cms_editable_card_selected:R,cms_editable_card:A,cms_card_buttons:D,cms_card_button:k,cs1:E,seccion_card:L,btn_11:O,layer_11:U,layer_11a:B,cms_content_layer:N,image_galery_page:X,image_upload_card:Y,input_invisible:G,image_selector:Z,image_selector_seleccione:ee,image_selector_cambiar:te},Se=Object.freeze(Object.defineProperty({__proto__:null,btn_11:O,cms_card_button:k,cms_card_buttons:D,cms_content_layer:N,cms_editable_card:A,cms_editable_card_selected:R,cs1:E,default:x,image_galery_page:X,image_selector:Z,image_selector_cambiar:te,image_selector_seleccione:ee,image_upload_card:Y,input_invisible:G,layer_11:U,layer_11a:B,seccion_card:L,webpage_dev_card:M},Symbol.toStringTag,{value:"Module"}));var we=m('<div><div class="flex ai-center w100"><div class="search-c4 mr-16 w14rem mr-auto"><div><i class=icon-search></i></div><input class=w100 autocomplete=off type=text></div></div><div class="flex-wrap w100">'),Pe=m('<div class="ff-bold h2 mr-16">Galería Imágenes'),Ce=m("<div><div>"),H=m("<i class=icon-picture-1>"),xe=m("<div>Cambiar Imagen"),je=m("<div>Seleccione Imagen");const ae=r=>{const[n,s]=P(r.imagenes||[]);K(()=>{s(r.imagenes||[])});const[a,d]=P([]),l=p(()=>{const u=a();return u.length===0?n():n().filter(f=>ge(f.Description,u))});return(()=>{var u=we(),f=u.firstChild,h=f.firstChild,C=h.firstChild,v=C.nextSibling,i=f.nextSibling;return _(f,(()=>{var c=p(()=>!!r.showTitle);return()=>c()&&Pe()})(),h),v.$$keyup=c=>{c.stopPropagation(),pe(()=>{const e=(c.target.value||"").toLowerCase().trim();d(e.split(" ").filter(t=>t))},150)},_(i,(()=>{var c=p(()=>!!r.useUploader);return()=>c()&&g($e,{saveAPI:"galeria-image",refreshIndexDBCache:"galeria_images",clearOnUpload:!0,get cardCss(){return x.image_upload_card},setDataToSend:e=>{},onUploaded:(e,t)=>{const o={Image:e,Description:t,upd:ve.sunixTime(),ss:1};r.imagenes.unshift(o),s([...r.imagenes])}})})(),null),_(i,()=>l().map(c=>g(he,{size:4,types:["avif","webp"],get src(){return`img-galeria/${c.Image}`},get description(){return c.Description},style:{height:"12rem",width:"auto","min-width":"10rem","max-width":"18rem"},imageStyle:{"object-fit":"contain"},selectable:!0,onSelect:()=>{r.onSelect&&r.onSelect(c)}})),null),S(c=>{var e=`flex-column grow-1 w100 ${x.image_galery_page}`,t=r.barStyle;return e!==c.e&&y(u,c.e=e),c.t=J(f,t,c.t),c},{e:void 0,t:void 0}),u})()},ke=r=>[(()=>{var n=Ce(),s=n.firstChild;return n.$$click=a=>{a.stopPropagation(),F([101])},_(s,(()=>{var a=p(()=>!!r.imageSelected);return()=>a()&&[H(),xe()]})(),null),_(s,(()=>{var a=p(()=>!r.imageSelected);return()=>a()&&[H(),je()]})(),null),_(n,(()=>{var a=p(()=>!!r.imageSelected);return()=>a()&&g(fe,{get src(){return`img-galeria/${r.imageSelected}`},types:["avif","webp"],size:4,class:"w100 h100"})})(),null),S(a=>{var d=`p-rel ${x.image_selector}`,l=`p-abs w100 h100 flex-column ai-center jc-center ${x.image_selector_seleccione}`,u={[x.image_selector_cambiar]:!!r.imageSelected};return d!==a.e&&y(n,a.e=d),l!==a.t&&y(s,a.t=l),a.a=ce(s,u,a.a),a},{e:void 0,t:void 0,a:void 0}),n})(),g(be,{title:"",id:101,css:"w74-84",get children(){return g(ae,{get imagenes(){return r.imagenes},showTitle:!0,barStyle:{position:"absolute",top:"0.6rem",width:"fit-content"},selectable:!0,onSelect:n=>{F([]),r.onSelect(n)}})}})];q(["keyup","click"]);var j=m("<div>"),Ie=m('<div class="h100 w100">'),Te=m("<div>Seleccione una sección para editar su contenido1."),Me=m("<div>--"),Re=m('<div><div><i class="icon-plus h6"></i>Sección</div><div>'),Ae=m("<i class=icon-up-1>"),De=m("<i class=icon-down-1>"),Ee=m('<div class="w100 p-rel mb-08"><button><div>'),Le=m("<i class=icon-cancel>"),Oe=m("<i class=icon-menu>"),Ue=m("<input>"),Be=m('<div><div class="flex-wrap ac-baseline h100 w100">');const[Ze,et]=P({});function tt(){const r=ie(),[n,s]=P(ne),[a,d]=P(),[l,u]=P([]),f=Q(T,"type"),[h]=ye(),C=oe();K(()=>{se(()=>Promise.resolve().then(()=>Se),void 0),_e(!1),console.log("params::",C.webpage),console.log("location:: ",r.pathname)});const v=(e,t)=>{const o=[],b={type:1,content:"demo",title:"demo"},$=n();for(let w=0;w<$.length;w++)t===1&&e===w&&o.push(b),o.push($[w]),t===2&&e===w&&o.push(b);console.log("nuevas seccciones::",o),s(o)},i=(e,t)=>{let o=!1;if((e===n().length-1&&t===2||e===0&&t===1)&&(o=!0),o)return;const b=n()[e],$=n().filter(w=>w!==b);t===1?e--:t===2&&e++,$.splice(e,0,b),s($)},c=e=>{const t=[];for(const o of n())o.id===e.id?t.push(e):t.push(o);d(e),s(t)};return g(me,{title:"Webpage",class:"",views:[[1,"Edición"],[2,"Imágenes"]],get pageStyle(){return{display:I()===1?"grid":"flex","grid-template-columns":"1.1fr 8px 4fr",padding:"0","background-color":"white"}},get children(){return[p(()=>p(()=>I()===1)()&&[(()=>{var e=j();return e.style.setProperty("z-index","51"),_(e,(()=>{var t=p(()=>!a());return()=>t()&&Te()})(),null),_(e,(()=>{var t=p(()=>!!a());return()=>t()&&g(Ge,{get selected(){return a()},onSectionTypeSelect:o=>{const b={...a()};b.type=o.type,c(b)}})})(),null),_(e,g(V,{get each(){return l()},children:t=>{console.log("section params::",t);const o=()=>{const b={...a()};c(b)};return t.type===1?g(z,{css:"mb-10",inputCss:"s5",get label(){return t.name},get save(){return t.key},get saveOn(){return a()},onChange:()=>{o()}}):t.type===2?g(z,{css:"mb-10",inputCss:"s5",get label(){return t.name},get save(){return t.key},get saveOn(){return a()},useTextArea:!0,onChange:()=>{o()}}):t.type===5?g(ke,{get imagenes(){return h()},get imageSelected(){return a()[t.key]},onSelect:b=>{a()[t.key]=b.Image,console.log("section updated::",a()),o()}}):Me()}}),null),S(()=>y(e,`h100 px-08 py-08 p-rel flex-column ${M}`)),e})(),(()=>{var e=Ie();return e.style.setProperty("background-color","#fbaeae"),e})(),(()=>{var e=j();return _(e,g(V,{get each(){return n()},children:(t,o)=>{const b=()=>{let $=`p-rel w100 ${A}`;return a()?.id===t.id&&($+=` ${R}`),$};return t.marginTop&&(t.marginTop=void 0),t.marginBottom&&(t.marginBottom=void 0),(()=>{var $=j();return $.$$click=w=>{w.stopPropagation(),d(t);const re=f.get(t.type)?.params||[];u(re)},_($,g(W,{mode:1,onAddSeccion:()=>v(o(),1),onMoveSeccion:()=>i(o(),1)}),null),_($,g(de,{args:t,get type(){return t.type}}),null),_($,g(W,{mode:2,onAddSeccion:()=>v(o(),2),onMoveSeccion:()=>i(o(),2)}),null),S(()=>y($,b())),$})()}})),S(()=>y(e,`h100 p-rel cms-1 ${N}`)),e})()]),p(()=>p(()=>I()===2)()&&g(ae,{get imagenes(){return h()},useUploader:!0}))]}})}const W=r=>{const n={};return r.mode===1&&(n.top="0"),r.mode===2&&(n.bottom="0"),(()=>{var s=Re(),a=s.firstChild,d=a.nextSibling;return J(s,n),a.$$click=l=>{l.stopPropagation(),r.onAddSeccion()},d.$$click=l=>{l.stopPropagation(),r.onMoveSeccion()},_(d,(()=>{var l=p(()=>r.mode===1);return()=>l()&&Ae()})(),null),_(d,(()=>{var l=p(()=>r.mode===2);return()=>l()&&De()})(),null),S(l=>{var u=`flex p-abs ${D}`,f=`flex ai-center p-rel ff-bold mr-06 ${k}`,h=`flex ai-center p-rel ff-bold mr-06 ${k} ${E}`;return u!==l.e&&y(s,l.e=u),f!==l.t&&y(a,l.t=f),h!==l.a&&y(d,l.a=h),l},{e:void 0,t:void 0,a:void 0}),s})()},Ne=r=>{const n=()=>{let s=`mt-06 mb-06 mr-06 ml-06 ${L}`;return r.isSelected&&(s+=" selected"),s};return(()=>{var s=j();return s.$$click=a=>{a.stopPropagation(),r.onSelect()},_(s,()=>r.params.name),S(()=>y(s,n())),s})()},Ge=r=>{const[n,s]=P(!1),a=Q(T,"type");let d,l=!1,u=0;return(()=>{var f=Ee(),h=f.firstChild,C=h.firstChild;return h.$$click=v=>{if(v.stopPropagation(),u&&u>Date.now())return;const i=!n();s(i),setTimeout(()=>{i&&d&&d.focus()},250)},_(h,(()=>{var v=p(()=>!!n());return()=>v()?Le():Oe()})(),C),_(C,()=>a.get(r.selected?.type)?.name),_(f,(()=>{var v=p(()=>!!n());return()=>v()&&[(()=>{var i=Ue();i.addEventListener("blur",e=>{e.stopPropagation(),l?(l=!1,e.target.focus()):(s(!1),u=Date.now()+400)});var c=d;return typeof c=="function"?le(c,i):d=i,S(()=>y(i,`p-abs ${G}`)),i})(),(()=>{var i=j();return S(()=>y(i,`layer-angle1 w100 p-abs ${B}`)),i})(),(()=>{var i=Be(),c=i.firstChild;return i.$$mousedown=e=>{e.stopPropagation(),l=!0},_(c,()=>T.map(e=>{const t=p(()=>r.selected?.type===e.type);return g(Ne,{params:e,get isSelected(){return t()},onSelect:()=>{r.onSectionTypeSelect(e),s(!1)}})})),S(()=>y(i,`p-abs ${U}`)),i})()]})(),null),S(v=>{var i=`flex ai-center w100 p-rel h3 ff-bold ${O}`,c=!!n();return i!==v.e&&y(h,v.e=i),c!==v.t&&h.classList.toggle("open",v.t=c),v},{e:void 0,t:void 0}),f})()};q(["click","mousedown"]);export{tt as default,Ze as pageViews,et as setPageViews};
