import"./DsnmJJEf.js";import{p as L,e as P,g as j,l as C,m as q,h as S,f as R,c as y,i as t,u as x,s as b,r as h,t as I,b as w,d as A}from"./Bf0lWsRu.js";import{s as B}from"./WwA8pLij.js";import{e as E,i as F}from"./CA0Nq6W4.js";import{d as G}from"./Cu2BEfFs.js";import{s as O,c as H}from"./C7iUW-It.js";import{p as m}from"./DEnCy23-.js";import{S as J}from"./CgTtmJH3.js";import{W as f}from"./CUNP7WoD.js";var K=R('<div class="m-2 px-8 min-w-56 h-32 lh-10 flex _3 SearchCard_1u2hhcz"> <button class="_4 absolute w-28 h-28 rounded right-2 SearchCard_1u2hhcz" aria-label="eliminar"><i class="icon-trash"></i></button></div>'),Q=R("<div><!> <div></div></div>");function ae(N,e){L(e,!0);const i=m(e,"saveOn",15),T=m(e,"css",3,""),o=m(e,"options",19,()=>[]);let s=P(j([]));const d=()=>{if(f.has(o()))return;const a=new Map,r=new Map;for(const n of o())a.set(n[e.keyId],n),r.set(n[e.keyName].toLowerCase(),n);f.set(o(),{idToRecord:a,valueToRecord:r})};d(),C(()=>{o()?.length>0&&d()});const v=()=>{i()&&e.save&&i(i()[e.save]=t(s),!0),e.onChange&&e.onChange(t(s))};let g;C(()=>{i()&&e.save&&i()!==g&&(g=i(),d(),q(()=>{S(s,i()[e.save]||[],!0)}))});const z=a=>(f.get(o())?.idToRecord||new Map).get(a)||{[e.keyName]:`ID-${a}`,[e.keyId]:a};var c=Q(),_=y(c);{let a=x(()=>"s1 "+e.inputCss);J(_,{get options(){return o()},get keyId(){return e.keyId},get keyName(){return e.keyName},clearOnSelect:!0,get avoidIDs(){return t(s)},get placeholder(){return e.label},get css(){return t(a)},get optionsCss(){return e.optionsCss},onChange:r=>{if(!r)return;const n=r[e.keyId];t(s).includes(n)||(t(s).push(n),v())}})}var l=b(_,2);E(l,21,()=>t(s),F,(a,r)=>{const n=x(()=>z(t(r)));var u=K(),k=y(u),M=b(k);M.__click=D=>{D.stopPropagation(),S(s,t(s).filter(W=>W!==t(r)),!0),v()},h(u),I(()=>B(k,`${t(n)[e.keyName]??""} `)),w(a,u)}),h(l),h(c),I(()=>{O(c,1,H(T()),"SearchCard_1u2hhcz"),O(l,1,`p-4 min-h-40 _2 flex flex-wrap ${e.cardCss??""}`,"SearchCard_1u2hhcz")}),w(N,c),A()}G(["click"]);export{ae as S};
