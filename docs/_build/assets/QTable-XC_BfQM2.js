import{d as J,t as E,i as C,c as R,s as V,u as X}from"./web-B9EQUxsk.js";import{m as W,a as F,o as Z,g as ee,h as te,e as B,f as K,d as k,c as x,F as p,b as T,S as j}from"./solid-DoXAfIeo.js";import{c as se,r as ne}from"./store-DHPf-lLy.js";import{h as ie}from"./main-wawJI9OC.js";import{d as N,h as re}from"./app-B5TM_Vz_.js";function _(n,o,e){let s=e.initialDeps??[],t;return()=>{var i,r,l,a;let h;e.key&&((i=e.debug)!=null&&i.call(e))&&(h=Date.now());const u=n();if(!(u.length!==s.length||u.some((z,M)=>s[M]!==z)))return t;s=u;let g;if(e.key&&((r=e.debug)!=null&&r.call(e))&&(g=Date.now()),t=o(...u),e.key&&((l=e.debug)!=null&&l.call(e))){const z=Math.round((Date.now()-h)*100)/100,M=Math.round((Date.now()-g)*100)/100,c=M/16,b=(f,d)=>{for(f=String(f);f.length<d;)f=" "+f;return f};console.info(`%câ± ${b(M,5)} /${b(z,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*c,120))}deg 100% 31%);`,e?.key)}return(a=e?.onChange)==null||a.call(e,t),t}}function D(n,o){if(n===void 0)throw new Error("Unexpected undefined");return n}const le=(n,o)=>Math.abs(n-o)<1,oe=(n,o,e)=>{let s;return function(...t){n.clearTimeout(s),s=n.setTimeout(()=>o.apply(this,t),e)}},ae=n=>n,ce=n=>{const o=Math.max(n.startIndex-n.overscan,0),e=Math.min(n.endIndex+n.overscan,n.count-1),s=[];for(let t=o;t<=e;t++)s.push(t);return s},he=(n,o)=>{const e=n.scrollElement;if(!e)return;const s=n.targetWindow;if(!s)return;const t=r=>{const{width:l,height:a}=r;o({width:Math.round(l),height:Math.round(a)})};if(t(e.getBoundingClientRect()),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(r=>{const l=()=>{const a=r[0];if(a?.borderBoxSize){const h=a.borderBoxSize[0];if(h){t({width:h.inlineSize,height:h.blockSize});return}}t(e.getBoundingClientRect())};n.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},H={passive:!0},q=typeof window>"u"?!0:"onscrollend"in window,ue=(n,o)=>{const e=n.scrollElement;if(!e)return;const s=n.targetWindow;if(!s)return;let t=0;const i=n.options.useScrollendEvent&&q?()=>{}:oe(s,()=>{o(t,!1)},n.options.isScrollingResetDelay),r=u=>()=>{const{horizontal:v,isRtl:g}=n.options;t=v?e.scrollLeft*(g&&-1||1):e.scrollTop,i(),o(t,u)},l=r(!0),a=r(!1);a(),e.addEventListener("scroll",l,H);const h=n.options.useScrollendEvent&&q;return h&&e.addEventListener("scrollend",a,H),()=>{e.removeEventListener("scroll",l),h&&e.removeEventListener("scrollend",a)}},de=(n,o,e)=>{if(o?.borderBoxSize){const s=o.borderBoxSize[0];if(s)return Math.round(s[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(n.getBoundingClientRect()[e.options.horizontal?"width":"height"])},fe=(n,{adjustments:o=0,behavior:e},s)=>{var t,i;const r=n+o;(i=(t=s.scrollElement)==null?void 0:t.scrollTo)==null||i.call(t,{[s.options.horizontal?"left":"top"]:r,behavior:e})};class me{constructor(o){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const s=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(t=>{t.forEach(i=>{const r=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()})}));return{disconnect:()=>{var t;(t=s())==null||t.disconnect(),e=null},observe:t=>{var i;return(i=s())==null?void 0:i.observe(t,{box:"border-box"})},unobserve:t=>{var i;return(i=s())==null?void 0:i.unobserve(t)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([s,t])=>{typeof t>"u"&&delete e[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ae,rangeExtractor:ce,onChange:()=>{},measureElement:de,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var s,t;(t=(s=this.options).onChange)==null||t.call(s,this,e)},this.maybeNotify=_(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(t=>{this.observer.observe(t)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,t=>{this.scrollRect=t,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(t,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,s)=>{const t=new Map,i=new Map;for(let r=s-1;r>=0;r--){const l=e[r];if(t.has(l.lane))continue;const a=i.get(l.lane);if(a==null||l.end>a.end?i.set(l.lane,l):l.end<a.end&&t.set(l.lane,!0),t.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((r,l)=>r.end===l.end?r.index-l.index:r.end-l.end)[0]:void 0},this.getMeasurementOptions=_(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,s,t,i,r)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:s,scrollMargin:t,getItemKey:i,enabled:r}),{key:!1}),this.getMeasurements=_(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:s,scrollMargin:t,getItemKey:i,enabled:r},l)=>{if(!r)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,a);for(let u=a;u<e;u++){const v=i(u),g=this.options.lanes===1?h[u-1]:this.getFurthestMeasurement(h,u),z=g?g.end+this.options.gap:s+t,M=l.get(v),c=typeof M=="number"?M:this.options.estimateSize(u),b=z+c,f=g?g.lane:u%this.options.lanes;h[u]={index:u,start:z,size:c,end:b,key:v,lane:f}}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=_(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,s,t,i)=>this.range=e.length>0&&s>0?ge({measurements:e,outerSize:s,scrollOffset:t,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=_(()=>{let e=null,s=null;const t=this.calculateRange();return t&&(e=t.startIndex,s=t.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,s]},(e,s,t,i,r)=>i===null||r===null?[]:e({startIndex:i,endIndex:r,overscan:s,count:t}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const s=this.options.indexAttribute,t=e.getAttribute(s);return t?parseInt(t,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(e,s)=>{const t=this.indexFromElement(e),i=this.measurementsCache[t];if(!i)return;const r=i.key,l=this.elementsCache.get(r);l!==e&&(l&&this.observer.unobserve(l),this.observer.observe(e),this.elementsCache.set(r,e)),e.isConnected&&this.resizeItem(t,this.options.measureElement(e,s,this))},this.resizeItem=(e,s)=>{const t=this.measurementsCache[e];if(!t)return;const i=this.itemSizeCache.get(t.key)??t.size,r=s-i;r!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,r,this):t.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,s)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((s,t)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(t))});return}this._measureElement(e,void 0)},this.getVirtualItems=_(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,s)=>{const t=[];for(let i=0,r=e.length;i<r;i++){const l=e[i],a=s[l];t.push(a)}return t},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const s=this.getMeasurements();if(s.length!==0)return D(s[Y(0,s.length-1,t=>D(s[t]).start,e)])},this.getOffsetForAlignment=(e,s,t=0)=>{const i=this.getSize(),r=this.getScrollOffset();s==="auto"&&(s=e>=r+i?"end":"start"),s==="center"?e+=(t-i)/2:s==="end"&&(e-=i);const l=this.options.horizontal?"scrollWidth":"scrollHeight",h=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-i;return Math.max(Math.min(h,e),0)},this.getOffsetForIndex=(e,s="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const t=this.measurementsCache[e];if(!t)return;const i=this.getSize(),r=this.getScrollOffset();if(s==="auto")if(t.end>=r+i-this.options.scrollPaddingEnd)s="end";else if(t.start<=r+this.options.scrollPaddingStart)s="start";else return[r,s];const l=s==="end"?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,s,t.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:s="start",behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,s),{adjustments:void 0,behavior:t})},this.scrollToIndex=(e,{align:s="auto",behavior:t}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(e,s);if(!i)return;const[r,l]=i;this._scrollToOffset(r,{adjustments:void 0,behavior:t}),t!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[h]=D(this.getOffsetForIndex(e,l));le(h,this.getScrollOffset())||this.scrollToIndex(e,{align:l,behavior:t})}else this.scrollToIndex(e,{align:l,behavior:t})}))},this.scrollBy=(e,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var e;const s=this.getMeasurements();let t;return s.length===0?t=this.options.paddingStart:t=this.options.lanes===1?((e=s[s.length-1])==null?void 0:e.end)??0:Math.max(...s.slice(-this.options.lanes).map(i=>i.end)),Math.max(t-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:s,behavior:t})=>{this.options.scrollToFn(e,{behavior:t,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(o)}}const Y=(n,o,e,s)=>{for(;n<=o;){const t=(n+o)/2|0,i=e(t);if(i<s)n=t+1;else if(i>s)o=t-1;else return t}return n>0?n-1:0};function ge({measurements:n,outerSize:o,scrollOffset:e,lanes:s}){const t=n.length-1;let r=Y(0,t,a=>n[a].start,e),l=r;for(;l<t&&n[l].end<e+o;)l++;return s>1&&(r=Math.max(0,r-r%s),l=Math.min(t,l+(s-1-l%s))),{startIndex:r,endIndex:l}}function ve(n){const o=W(n),e=new me(o),[s,t]=se(e.getVirtualItems()),[i,r]=F(e.getTotalSize()),l={get(h,u){switch(u){case"getVirtualItems":return()=>s;case"getTotalSize":return()=>i();default:return Reflect.get(h,u)}}},a=new Proxy(e,l);return a.setOptions(o),Z(()=>{const h=a._didMount();a._willUpdate(),ee(h)}),te(()=>{a.setOptions(W(o,n,{onChange:(h,u)=>{var v;h._willUpdate(),t(ne(h.getVirtualItems(),{key:"index"})),r(h.getTotalSize()),(v=n.onChange)==null||v.call(n,h,u)}})),a.measure()}),a}function be(n){return ve(W({observeElementRect:he,observeElementOffset:ue,scrollToFn:fe},n))}var Se=E("<table><thead></thead><tbody>"),L=E("<div>"),Q=E('<tr><td colspan=99><div class="empty-message flex ai-center">No se encontraron registros.'),ye=E('<div class="flex ai-center jc-between">'),xe=E("<span class=_highlight>"),G=E("<tr>"),we=E("<td>"),Ce=E("<tr><td>"),ze=E("<th>");function Re(n){let o;const e=()=>{let c=[];for(let d of n.columns)if(d.subcols)for(let S of d.subcols)c.push(S);else c.push(d);c=c.filter(d=>d.cardColumn?.length>0),c.sort((d,S)=>d.cardColumn[0]-S.cardColumn[0]);const b=new Map;for(let d of c)b.has(d.cardColumn[0])?b.get(d.cardColumn[0]).push(d):b.set(d.cardColumn[0],[d]);const f=[];for(let d of b.values())d.sort((S,m)=>(S.cardColumn[1]||1)-(m.cardColumn[1]||1)),f.push(d);return f};let s=new Map,t=e();const i=()=>(console.log("is card view:: ",N(),t.length),N()===3&&t.length>0);B(K(()=>[n.columns],()=>{s=new Map;for(let c of n.columns)c.field&&s.set(c.field,c);t=e()}));const r=(c,b)=>be({count:(typeof b=="number"?b:c.data.length)||1,estimateSize:()=>34,getScrollElement:()=>o});let l=r(n);const[a,h]=F(l.getVirtualItems()),[u,v]=F(n.data),g=(c,b)=>{let f=c.makeFilter;if(!f&&c.filterKeys?.length>0&&(f=m=>{let y=[];for(let w of c.filterKeys){const I=w;m[I]&&(typeof m[I]=="string"||typeof m[I]=="number")&&y.push(String(m[I]))}return y.join(" ").toLowerCase()}),!f||!b)return c.data;let d=[];const S=b.split(" ").map(m=>m.toLowerCase());for(let m of c.data){const y=f(m);y&&ie(y,S)&&d.push(m)}return d};B(K(()=>[n.data,n.filterText||""],()=>{const c=g(n,n.filterText);v(c),l=r(n,c.length),h(l.getVirtualItems())}));const z=k(()=>{const c=a();return c.length===0?50:l.getTotalSize()-c[0].size*c.length}),M=()=>i()?"w100":"qtable-c"+(n.css?" "+n.css:"");return(()=>{var c=L(),b=o;return typeof b=="function"?X(b,c):o=c,C(c,x(j,{get when(){return!i()},get children(){var f=Se(),d=f.firstChild,S=d.nextSibling;return C(d,x(Ie,{get columns(){return n.columns}})),C(S,x(p,{get each(){return a()},children:(m,y)=>{const w=u(),I=w[m.index],$=k(()=>n.selected&&n.isSelected?n.isSelected(I,n.selected):!1);return w.length===0&&y()===0?Q():x(Me,{row:m,record:I,get isFinal(){return a().length-1===y()},get firstItemStart(){return a()[0].start},get tableSize(){return z()},get isSelected(){return $()},get columns(){return n.columns},get onRowCLick(){return n.onRowCLick},get filterText(){return n.filterText},get filterKeys(){return n.filterKeys}})}})),T(m=>{var y="qtable h100 fixed-header "+(n.tableCss||""),w=n.tableStyle;return y!==m.e&&R(f,m.e=y),m.t=V(f,w,m.t),m},{e:void 0,t:void 0}),f}}),null),C(c,x(j,{get when(){return i()},get children(){return x(p,{get each(){return a()},children:(f,d)=>{const S=u(),m=S[f.index],y=k(()=>n.selected&&n.isSelected?n.isSelected(m,n.selected):!1);return S.length===0&&d()===0?Q():(()=>{var w=L();return w.$$click=I=>{I.stopPropagation(),n.onRowCLick&&n.onRowCLick(m)},C(w,x(p,{each:t,children:I=>(()=>{var $=ye();return C($,()=>I.map(O=>{let P="";return O.cardRender?P=O.cardRender(m,d(),null):O.render?P=O.render(m,-1,null):O.getValue&&(P=O.getValue(m,d())),(()=>{var A=L();return C(A,P),T(()=>R(A,O.cardCss||"")),A})()})),$})()})),T(()=>R(w,"w100 flex-column card-ct mb-04"+(y()?" selected":""))),w})()}})}}),null),T(f=>{var d=M(),S={"max-height":n.maxHeight||"calc(100vh - 8rem - 12px)",...n.style||{},...i()?n.styleMobile||{}:{}};return d!==f.e&&R(c,f.e=d),f.t=V(c,S,f.t),f},{e:void 0,t:void 0}),c})()}function Me(n){const[o]=F(n.columns),e=new Map,s=i=>{const r=i?new Set(i):null;for(let[l,a]of e)r&&!r.has(l)||a()},t=i=>{let r="";if(i.render?r=i.render(n.record,n.row.index,s):i.getValue&&(r=i.getValue(n.record,n.row.index)),typeof r=="string"&&i.field&&n.filterText){if(n.filterKeys&&n.filterKeys.includes(i.field))return(()=>{var l=xe();return C(l,()=>re(r,n.filterText.split(" "))),l})()}else return r};return[(()=>{var i=G();return i.$$click=r=>{r.stopPropagation(),n.onRowCLick&&n.onRowCLick(n.record)},C(i,x(p,{get each(){return o()},children:(r,l)=>{const[a,h]=F(t(r)),u=()=>{h(t(r))};return e.set(r.id||l(),u),(()=>{var v=we();return C(v,a),T(g=>{var z=r.css||void 0,M=r.cellStyle||void 0;return z!==g.e&&R(v,g.e=z),g.t=V(v,M,g.t),g},{e:void 0,t:void 0}),v})()}})),T(r=>{var l=!!n.isSelected,a=!!n.isFinal,h=n.row.index%2===0,u=n.row.index%2!==0,v=`${n.row.size}px`,g=`translateY(${n.firstItemStart}px)`;return l!==r.e&&i.classList.toggle("selected",r.e=l),a!==r.t&&i.classList.toggle("is-final",r.t=a),h!==r.a&&i.classList.toggle("tr-even",r.a=h),u!==r.o&&i.classList.toggle("tr-odd",r.o=u),v!==r.i&&((r.i=v)!=null?i.style.setProperty("height",v):i.style.removeProperty("height")),g!==r.n&&((r.n=g)!=null?i.style.setProperty("transform",g):i.style.removeProperty("transform")),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i})(),k(()=>k(()=>!!n.isFinal)()&&(()=>{var i=Ce(),r=i.firstChild;return i.style.setProperty("visibility","hidden"),r.style.setProperty("border","none"),T(l=>(l=`${n.tableSize}px`)!=null?i.style.setProperty("height",l):i.style.removeProperty("height")),i})())]}function Ie(n){const o=()=>{const e=[],s=[];for(let t of n.columns){if(t._colspan=t?.subcols?.length||0,t._colspan)for(let i of t.subcols)s.push(i);e.push(t)}return[e,s]};return[(()=>{var e=G();return C(e,x(p,{get each(){return o()[0]},children:s=>x(U,{column:s})})),e})(),x(j,{get when(){return o()[1].length>0},get children(){return x(p,{get each(){return o()[1]},children:e=>x(U,{column:e})})}})]}function U(n){const o=n.column;let e=o.header;return typeof o.header=="function"&&(e=o.header()),(()=>{var s=ze();return C(s,e),T(t=>V(s,o.headerStyle,t)),s})()}J(["click"]);export{Re as Q};
